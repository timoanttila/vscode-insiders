var Vf=Object.create;var rr=Object.defineProperty,Jf=Object.defineProperties,Qf=Object.getOwnPropertyDescriptor,Yf=Object.getOwnPropertyDescriptors,Zf=Object.getOwnPropertyNames,bs=Object.getOwnPropertySymbols,eh=Object.getPrototypeOf,Ps=Object.prototype.hasOwnProperty,th=Object.prototype.propertyIsEnumerable;var Ds=(t,e,n)=>e in t?rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mi=(t,e)=>{for(var n in e||(e={}))Ps.call(e,n)&&Ds(t,n,e[n]);if(bs)for(var n of bs(e))th.call(e,n)&&Ds(t,n,e[n]);return t},ji=(t,e)=>Jf(t,Yf(e)),Es=t=>rr(t,"__esModule",{value:!0});var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),nh=(t,e)=>{for(var n in e)rr(t,n,{get:e[n],enumerable:!0})},qs=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zf(e))!Ps.call(t,i)&&(n||i!=="default")&&rr(t,i,{get:()=>e[i],enumerable:!(r=Qf(e,i))||r.enumerable});return t},Mr=(t,e)=>qs(Es(rr(t!=null?Vf(eh(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),rh=(t=>(e,n)=>t&&t.get(e)||(n=qs(Es({}),e,1),t&&t.set(e,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var nn=(t,e,n)=>new Promise((r,i)=>{var s=d=>{try{f(n.next(d))}catch(p){i(p)}},c=d=>{try{f(n.throw(d))}catch(p){i(p)}},f=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,c);f((n=n.apply(t,e)).next())});var ir=E((TR,Os)=>{var ih="2.0.0",oh=256,sh=Number.MAX_SAFE_INTEGER||9007199254740991,ah=16;Os.exports={SEMVER_SPEC_VERSION:ih,MAX_LENGTH:oh,MAX_SAFE_INTEGER:sh,MAX_SAFE_COMPONENT_LENGTH:ah}});var or=E((bR,xs)=>{var ch=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};xs.exports=ch});var vn=E((rn,ks)=>{var{MAX_SAFE_COMPONENT_LENGTH:$i}=ir(),uh=or();rn=ks.exports={};var lh=rn.re=[],j=rn.src=[],$=rn.t={},dh=0,Z=(t,e,n)=>{let r=dh++;uh(t,r,e),$[t]=r,j[r]=e,lh[r]=new RegExp(e,n?"g":void 0)};Z("NUMERICIDENTIFIER","0|[1-9]\\d*");Z("NUMERICIDENTIFIERLOOSE","[0-9]+");Z("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");Z("MAINVERSION",`(${j[$.NUMERICIDENTIFIER]})\\.(${j[$.NUMERICIDENTIFIER]})\\.(${j[$.NUMERICIDENTIFIER]})`);Z("MAINVERSIONLOOSE",`(${j[$.NUMERICIDENTIFIERLOOSE]})\\.(${j[$.NUMERICIDENTIFIERLOOSE]})\\.(${j[$.NUMERICIDENTIFIERLOOSE]})`);Z("PRERELEASEIDENTIFIER",`(?:${j[$.NUMERICIDENTIFIER]}|${j[$.NONNUMERICIDENTIFIER]})`);Z("PRERELEASEIDENTIFIERLOOSE",`(?:${j[$.NUMERICIDENTIFIERLOOSE]}|${j[$.NONNUMERICIDENTIFIER]})`);Z("PRERELEASE",`(?:-(${j[$.PRERELEASEIDENTIFIER]}(?:\\.${j[$.PRERELEASEIDENTIFIER]})*))`);Z("PRERELEASELOOSE",`(?:-?(${j[$.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${j[$.PRERELEASEIDENTIFIERLOOSE]})*))`);Z("BUILDIDENTIFIER","[0-9A-Za-z-]+");Z("BUILD",`(?:\\+(${j[$.BUILDIDENTIFIER]}(?:\\.${j[$.BUILDIDENTIFIER]})*))`);Z("FULLPLAIN",`v?${j[$.MAINVERSION]}${j[$.PRERELEASE]}?${j[$.BUILD]}?`);Z("FULL",`^${j[$.FULLPLAIN]}$`);Z("LOOSEPLAIN",`[v=\\s]*${j[$.MAINVERSIONLOOSE]}${j[$.PRERELEASELOOSE]}?${j[$.BUILD]}?`);Z("LOOSE",`^${j[$.LOOSEPLAIN]}$`);Z("GTLT","((?:<|>)?=?)");Z("XRANGEIDENTIFIERLOOSE",`${j[$.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Z("XRANGEIDENTIFIER",`${j[$.NUMERICIDENTIFIER]}|x|X|\\*`);Z("XRANGEPLAIN",`[v=\\s]*(${j[$.XRANGEIDENTIFIER]})(?:\\.(${j[$.XRANGEIDENTIFIER]})(?:\\.(${j[$.XRANGEIDENTIFIER]})(?:${j[$.PRERELEASE]})?${j[$.BUILD]}?)?)?`);Z("XRANGEPLAINLOOSE",`[v=\\s]*(${j[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[$.XRANGEIDENTIFIERLOOSE]})(?:${j[$.PRERELEASELOOSE]})?${j[$.BUILD]}?)?)?`);Z("XRANGE",`^${j[$.GTLT]}\\s*${j[$.XRANGEPLAIN]}$`);Z("XRANGELOOSE",`^${j[$.GTLT]}\\s*${j[$.XRANGEPLAINLOOSE]}$`);Z("COERCE",`(^|[^\\d])(\\d{1,${$i}})(?:\\.(\\d{1,${$i}}))?(?:\\.(\\d{1,${$i}}))?(?:$|[^\\d])`);Z("COERCERTL",j[$.COERCE],!0);Z("LONETILDE","(?:~>?)");Z("TILDETRIM",`(\\s*)${j[$.LONETILDE]}\\s+`,!0);rn.tildeTrimReplace="$1~";Z("TILDE",`^${j[$.LONETILDE]}${j[$.XRANGEPLAIN]}$`);Z("TILDELOOSE",`^${j[$.LONETILDE]}${j[$.XRANGEPLAINLOOSE]}$`);Z("LONECARET","(?:\\^)");Z("CARETTRIM",`(\\s*)${j[$.LONECARET]}\\s+`,!0);rn.caretTrimReplace="$1^";Z("CARET",`^${j[$.LONECARET]}${j[$.XRANGEPLAIN]}$`);Z("CARETLOOSE",`^${j[$.LONECARET]}${j[$.XRANGEPLAINLOOSE]}$`);Z("COMPARATORLOOSE",`^${j[$.GTLT]}\\s*(${j[$.LOOSEPLAIN]})$|^$`);Z("COMPARATOR",`^${j[$.GTLT]}\\s*(${j[$.FULLPLAIN]})$|^$`);Z("COMPARATORTRIM",`(\\s*)${j[$.GTLT]}\\s*(${j[$.LOOSEPLAIN]}|${j[$.XRANGEPLAIN]})`,!0);rn.comparatorTrimReplace="$1$2$3";Z("HYPHENRANGE",`^\\s*(${j[$.XRANGEPLAIN]})\\s+-\\s+(${j[$.XRANGEPLAIN]})\\s*$`);Z("HYPHENRANGELOOSE",`^\\s*(${j[$.XRANGEPLAINLOOSE]})\\s+-\\s+(${j[$.XRANGEPLAINLOOSE]})\\s*$`);Z("STAR","(<|>)?=?\\s*\\*");Z("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Z("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var sr=E((PR,Fs)=>{var fh=["includePrerelease","loose","rtl"],hh=t=>t?typeof t!="object"?{loose:!0}:fh.filter(e=>t[e]).reduce((e,n)=>(e[n]=!0,e),{}):{};Fs.exports=hh});var jr=E((DR,Ls)=>{var Ns=/^[0-9]+$/,Is=(t,e)=>{let n=Ns.test(t),r=Ns.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},ph=(t,e)=>Is(e,t);Ls.exports={compareIdentifiers:Is,rcompareIdentifiers:ph}});var He=E((ER,$s)=>{var $r=or(),{MAX_LENGTH:As,MAX_SAFE_INTEGER:Wr}=ir(),{re:Ms,t:js}=vn(),gh=sr(),{compareIdentifiers:In}=jr(),ft=class{constructor(e,n){if(n=gh(n),e instanceof ft){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>As)throw new TypeError(`version is longer than ${As} characters`);$r("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?Ms[js.LOOSE]:Ms[js.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Wr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Wr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Wr||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<Wr)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($r("SemVer.compare",this.version,this.options,e),!(e instanceof ft)){if(typeof e=="string"&&e===this.version)return 0;e=new ft(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ft||(e=new ft(e,this.options)),In(this.major,e.major)||In(this.minor,e.minor)||In(this.patch,e.patch)}comparePre(e){if(e instanceof ft||(e=new ft(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if($r("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return In(r,i)}while(++n)}compareBuild(e){e instanceof ft||(e=new ft(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if($r("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return In(r,i)}while(++n)}inc(e,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n),this.inc("pre",n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n),this.inc("pre",n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}n&&(In(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=[n,0]):this.prerelease=[n,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};$s.exports=ft});var yn=E((qR,zs)=>{var{MAX_LENGTH:mh}=ir(),{re:Ws,t:Hs}=vn(),Ks=He(),vh=sr(),yh=(t,e)=>{if(e=vh(e),t instanceof Ks)return t;if(typeof t!="string"||t.length>mh||!(e.loose?Ws[Hs.LOOSE]:Ws[Hs.FULL]).test(t))return null;try{return new Ks(t,e)}catch{return null}};zs.exports=yh});var Bs=E((OR,Us)=>{var Ch=yn(),Rh=(t,e)=>{let n=Ch(t,e);return n?n.version:null};Us.exports=Rh});var Xs=E((xR,Gs)=>{var _h=yn(),wh=(t,e)=>{let n=_h(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};Gs.exports=wh});var Qs=E((kR,Js)=>{var Vs=He(),Sh=(t,e,n,r)=>{typeof n=="string"&&(r=n,n=void 0);try{return new Vs(t instanceof Vs?t.version:t,n).inc(e,r).version}catch{return null}};Js.exports=Sh});var ht=E((FR,Zs)=>{var Ys=He(),Th=(t,e,n)=>new Ys(t,n).compare(new Ys(e,n));Zs.exports=Th});var Hr=E((NR,ea)=>{var bh=ht(),Ph=(t,e,n)=>bh(t,e,n)===0;ea.exports=Ph});var ra=E((IR,na)=>{var ta=yn(),Dh=Hr(),Eh=(t,e)=>{if(Dh(t,e))return null;{let n=ta(t),r=ta(e),i=n.prerelease.length||r.prerelease.length,s=i?"pre":"",c=i?"prerelease":"";for(let f in n)if((f==="major"||f==="minor"||f==="patch")&&n[f]!==r[f])return s+f;return c}};na.exports=Eh});var oa=E((LR,ia)=>{var qh=He(),Oh=(t,e)=>new qh(t,e).major;ia.exports=Oh});var aa=E((AR,sa)=>{var xh=He(),kh=(t,e)=>new xh(t,e).minor;sa.exports=kh});var ua=E((MR,ca)=>{var Fh=He(),Nh=(t,e)=>new Fh(t,e).patch;ca.exports=Nh});var da=E((jR,la)=>{var Ih=yn(),Lh=(t,e)=>{let n=Ih(t,e);return n&&n.prerelease.length?n.prerelease:null};la.exports=Lh});var ha=E(($R,fa)=>{var Ah=ht(),Mh=(t,e,n)=>Ah(e,t,n);fa.exports=Mh});var ga=E((WR,pa)=>{var jh=ht(),$h=(t,e)=>jh(t,e,!0);pa.exports=$h});var Kr=E((HR,va)=>{var ma=He(),Wh=(t,e,n)=>{let r=new ma(t,n),i=new ma(e,n);return r.compare(i)||r.compareBuild(i)};va.exports=Wh});var Ca=E((KR,ya)=>{var Hh=Kr(),Kh=(t,e)=>t.sort((n,r)=>Hh(n,r,e));ya.exports=Kh});var _a=E((zR,Ra)=>{var zh=Kr(),Uh=(t,e)=>t.sort((n,r)=>zh(r,n,e));Ra.exports=Uh});var ar=E((UR,wa)=>{var Bh=ht(),Gh=(t,e,n)=>Bh(t,e,n)>0;wa.exports=Gh});var zr=E((BR,Sa)=>{var Xh=ht(),Vh=(t,e,n)=>Xh(t,e,n)<0;Sa.exports=Vh});var Wi=E((GR,Ta)=>{var Jh=ht(),Qh=(t,e,n)=>Jh(t,e,n)!==0;Ta.exports=Qh});var Ur=E((XR,ba)=>{var Yh=ht(),Zh=(t,e,n)=>Yh(t,e,n)>=0;ba.exports=Zh});var Br=E((VR,Pa)=>{var ep=ht(),tp=(t,e,n)=>ep(t,e,n)<=0;Pa.exports=tp});var Hi=E((JR,Da)=>{var np=Hr(),rp=Wi(),ip=ar(),op=Ur(),sp=zr(),ap=Br(),cp=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return np(t,n,r);case"!=":return rp(t,n,r);case">":return ip(t,n,r);case">=":return op(t,n,r);case"<":return sp(t,n,r);case"<=":return ap(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Da.exports=cp});var qa=E((QR,Ea)=>{var up=He(),lp=yn(),{re:Gr,t:Xr}=vn(),dp=(t,e)=>{if(t instanceof up)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(Gr[Xr.COERCE]);else{let r;for(;(r=Gr[Xr.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||r.index+r[0].length!==n.index+n[0].length)&&(n=r),Gr[Xr.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Gr[Xr.COERCERTL].lastIndex=-1}return n===null?null:lp(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)};Ea.exports=dp});var xa=E((YR,Oa)=>{"use strict";Oa.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Fa=E((ZR,ka)=>{"use strict";ka.exports=ce;ce.Node=Cn;ce.create=ce;function ce(t){var e=this;if(e instanceof ce||(e=new ce),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}ce.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};ce.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ce.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ce.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)hp(this,arguments[t]);return this.length};ce.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)pp(this,arguments[t]);return this.length};ce.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ce.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ce.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};ce.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};ce.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};ce.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};ce.prototype.map=function(t,e){e=e||this;for(var n=new ce,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};ce.prototype.mapReverse=function(t,e){e=e||this;for(var n=new ce,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};ce.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=t(n,r.value,i),r=r.next;return n};ce.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=t(n,r.value,i),r=r.prev;return n};ce.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};ce.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};ce.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ce;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)n.push(i.value);return n};ce.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new ce;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>t;r--,i=i.prev)n.push(i.value);return n};ce.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,i=this.head;i!==null&&r<t;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=fp(this,i,n[r]);return s};ce.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function fp(t,e,n){var r=e===t.head?new Cn(n,null,e,t):new Cn(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function hp(t,e){t.tail=new Cn(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function pp(t,e){t.head=new Cn(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Cn(t,e,n,r){if(!(this instanceof Cn))return new Cn(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{xa()(ce)}catch{}});var $a=E((e_,ja)=>{"use strict";var gp=Fa(),Rn=Symbol("max"),jt=Symbol("length"),Ln=Symbol("lengthCalculator"),cr=Symbol("allowStale"),_n=Symbol("maxAge"),$t=Symbol("dispose"),Na=Symbol("noDisposeOnSet"),Ie=Symbol("lruList"),_t=Symbol("cache"),Ia=Symbol("updateAgeOnGet"),Ki=()=>1,La=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let n=this[Rn]=e.max||1/0,r=e.length||Ki;if(this[Ln]=typeof r!="function"?Ki:r,this[cr]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[_n]=e.maxAge||0,this[$t]=e.dispose,this[Na]=e.noDisposeOnSet||!1,this[Ia]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Rn]=e||1/0,ur(this)}get max(){return this[Rn]}set allowStale(e){this[cr]=!!e}get allowStale(){return this[cr]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[_n]=e,ur(this)}get maxAge(){return this[_n]}set lengthCalculator(e){typeof e!="function"&&(e=Ki),e!==this[Ln]&&(this[Ln]=e,this[jt]=0,this[Ie].forEach(n=>{n.length=this[Ln](n.value,n.key),this[jt]+=n.length})),ur(this)}get lengthCalculator(){return this[Ln]}get length(){return this[jt]}get itemCount(){return this[Ie].length}rforEach(e,n){n=n||this;for(let r=this[Ie].tail;r!==null;){let i=r.prev;Ma(this,e,r,n),r=i}}forEach(e,n){n=n||this;for(let r=this[Ie].head;r!==null;){let i=r.next;Ma(this,e,r,n),r=i}}keys(){return this[Ie].toArray().map(e=>e.key)}values(){return this[Ie].toArray().map(e=>e.value)}reset(){this[$t]&&this[Ie]&&this[Ie].length&&this[Ie].forEach(e=>this[$t](e.key,e.value)),this[_t]=new Map,this[Ie]=new gp,this[jt]=0}dump(){return this[Ie].map(e=>Vr(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Ie]}set(e,n,r){if(r=r||this[_n],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[Ln](n,e);if(this[_t].has(e)){if(s>this[Rn])return An(this,this[_t].get(e)),!1;let d=this[_t].get(e).value;return this[$t]&&(this[Na]||this[$t](e,d.value)),d.now=i,d.maxAge=r,d.value=n,this[jt]+=s-d.length,d.length=s,this.get(e),ur(this),!0}let c=new Aa(e,n,s,i,r);return c.length>this[Rn]?(this[$t]&&this[$t](e,n),!1):(this[jt]+=c.length,this[Ie].unshift(c),this[_t].set(e,this[Ie].head),ur(this),!0)}has(e){if(!this[_t].has(e))return!1;let n=this[_t].get(e).value;return!Vr(this,n)}get(e){return zi(this,e,!0)}peek(e){return zi(this,e,!1)}pop(){let e=this[Ie].tail;return e?(An(this,e),e.value):null}del(e){An(this,this[_t].get(e))}load(e){this.reset();let n=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let c=s-n;c>0&&this.set(i.k,i.v,c)}}}prune(){this[_t].forEach((e,n)=>zi(this,n,!1))}},zi=(t,e,n)=>{let r=t[_t].get(e);if(r){let i=r.value;if(Vr(t,i)){if(An(t,r),!t[cr])return}else n&&(t[Ia]&&(r.value.now=Date.now()),t[Ie].unshiftNode(r));return i.value}},Vr=(t,e)=>{if(!e||!e.maxAge&&!t[_n])return!1;let n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[_n]&&n>t[_n]},ur=t=>{if(t[jt]>t[Rn])for(let e=t[Ie].tail;t[jt]>t[Rn]&&e!==null;){let n=e.prev;An(t,e),e=n}},An=(t,e)=>{if(e){let n=e.value;t[$t]&&t[$t](n.key,n.value),t[jt]-=n.length,t[_t].delete(n.key),t[Ie].removeNode(e)}},Aa=class{constructor(e,n,r,i,s){this.key=e,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}},Ma=(t,e,n,r)=>{let i=n.value;Vr(t,i)&&(An(t,n),t[cr]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};ja.exports=La});var pt=E((t_,za)=>{var Mn=class{constructor(e,n){if(n=vp(n),e instanceof Mn)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new Mn(e.raw,n);if(e instanceof Ui)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!Ha(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&wp(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Wa.get(r);if(i)return i;let s=this.options.loose,c=s?et[Ge.HYPHENRANGELOOSE]:et[Ge.HYPHENRANGE];e=e.replace(c,kp(this.options.includePrerelease)),Re("hyphen replace",e),e=e.replace(et[Ge.COMPARATORTRIM],Cp),Re("comparator trim",e),e=e.replace(et[Ge.TILDETRIM],Rp),e=e.replace(et[Ge.CARETTRIM],_p),e=e.split(/\s+/).join(" ");let f=e.split(" ").map(R=>Sp(R,this.options)).join(" ").split(/\s+/).map(R=>xp(R,this.options));s&&(f=f.filter(R=>(Re("loose invalid filter",R,this.options),!!R.match(et[Ge.COMPARATORLOOSE])))),Re("range list",f);let d=new Map,p=f.map(R=>new Ui(R,this.options));for(let R of p){if(Ha(R))return[R];d.set(R.value,R)}d.size>1&&d.has("")&&d.delete("");let C=[...d.values()];return Wa.set(r,C),C}intersects(e,n){if(!(e instanceof Mn))throw new TypeError("a Range is required");return this.set.some(r=>Ka(r,n)&&e.set.some(i=>Ka(i,n)&&r.every(s=>i.every(c=>s.intersects(c,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new yp(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(Fp(this.set[n],e,this.options))return!0;return!1}};za.exports=Mn;var mp=$a(),Wa=new mp({max:1e3}),vp=sr(),Ui=lr(),Re=or(),yp=He(),{re:et,t:Ge,comparatorTrimReplace:Cp,tildeTrimReplace:Rp,caretTrimReplace:_p}=vn(),Ha=t=>t.value==="<0.0.0-0",wp=t=>t.value==="",Ka=(t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(s=>i.intersects(s,e)),i=r.pop();return n},Sp=(t,e)=>(Re("comp",t,e),t=Pp(t,e),Re("caret",t),t=Tp(t,e),Re("tildes",t),t=Ep(t,e),Re("xrange",t),t=Op(t,e),Re("stars",t),t),Xe=t=>!t||t.toLowerCase()==="x"||t==="*",Tp=(t,e)=>t.trim().split(/\s+/).map(n=>bp(n,e)).join(" "),bp=(t,e)=>{let n=e.loose?et[Ge.TILDELOOSE]:et[Ge.TILDE];return t.replace(n,(r,i,s,c,f)=>{Re("tilde",t,r,i,s,c,f);let d;return Xe(i)?d="":Xe(s)?d=`>=${i}.0.0 <${+i+1}.0.0-0`:Xe(c)?d=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:f?(Re("replaceTilde pr",f),d=`>=${i}.${s}.${c}-${f} <${i}.${+s+1}.0-0`):d=`>=${i}.${s}.${c} <${i}.${+s+1}.0-0`,Re("tilde return",d),d})},Pp=(t,e)=>t.trim().split(/\s+/).map(n=>Dp(n,e)).join(" "),Dp=(t,e)=>{Re("caret",t,e);let n=e.loose?et[Ge.CARETLOOSE]:et[Ge.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,s,c,f,d)=>{Re("caret",t,i,s,c,f,d);let p;return Xe(s)?p="":Xe(c)?p=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Xe(f)?s==="0"?p=`>=${s}.${c}.0${r} <${s}.${+c+1}.0-0`:p=`>=${s}.${c}.0${r} <${+s+1}.0.0-0`:d?(Re("replaceCaret pr",d),s==="0"?c==="0"?p=`>=${s}.${c}.${f}-${d} <${s}.${c}.${+f+1}-0`:p=`>=${s}.${c}.${f}-${d} <${s}.${+c+1}.0-0`:p=`>=${s}.${c}.${f}-${d} <${+s+1}.0.0-0`):(Re("no pr"),s==="0"?c==="0"?p=`>=${s}.${c}.${f}${r} <${s}.${c}.${+f+1}-0`:p=`>=${s}.${c}.${f}${r} <${s}.${+c+1}.0-0`:p=`>=${s}.${c}.${f} <${+s+1}.0.0-0`),Re("caret return",p),p})},Ep=(t,e)=>(Re("replaceXRanges",t,e),t.split(/\s+/).map(n=>qp(n,e)).join(" ")),qp=(t,e)=>{t=t.trim();let n=e.loose?et[Ge.XRANGELOOSE]:et[Ge.XRANGE];return t.replace(n,(r,i,s,c,f,d)=>{Re("xRange",t,r,i,s,c,f,d);let p=Xe(s),C=p||Xe(c),R=C||Xe(f),S=R;return i==="="&&S&&(i=""),d=e.includePrerelease?"-0":"",p?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&S?(C&&(c=0),f=0,i===">"?(i=">=",C?(s=+s+1,c=0,f=0):(c=+c+1,f=0)):i==="<="&&(i="<",C?s=+s+1:c=+c+1),i==="<"&&(d="-0"),r=`${i+s}.${c}.${f}${d}`):C?r=`>=${s}.0.0${d} <${+s+1}.0.0-0`:R&&(r=`>=${s}.${c}.0${d} <${s}.${+c+1}.0-0`),Re("xRange return",r),r})},Op=(t,e)=>(Re("replaceStars",t,e),t.trim().replace(et[Ge.STAR],"")),xp=(t,e)=>(Re("replaceGTE0",t,e),t.trim().replace(et[e.includePrerelease?Ge.GTE0PRE:Ge.GTE0],"")),kp=t=>(e,n,r,i,s,c,f,d,p,C,R,S,b)=>(Xe(r)?n="":Xe(i)?n=`>=${r}.0.0${t?"-0":""}`:Xe(s)?n=`>=${r}.${i}.0${t?"-0":""}`:c?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Xe(p)?d="":Xe(C)?d=`<${+p+1}.0.0-0`:Xe(R)?d=`<${p}.${+C+1}.0-0`:S?d=`<=${p}.${C}.${R}-${S}`:t?d=`<${p}.${C}.${+R+1}-0`:d=`<=${d}`,`${n} ${d}`.trim()),Fp=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Re(t[r].semver),t[r].semver!==Ui.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var lr=E((n_,Va)=>{var dr=Symbol("SemVer ANY"),fr=class{static get ANY(){return dr}constructor(e,n){if(n=Np(n),e instanceof fr){if(e.loose===!!n.loose)return e;e=e.value}Gi("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===dr?this.value="":this.value=this.operator+this.semver.version,Gi("comp",this)}parse(e){let n=this.options.loose?Ua[Ba.COMPARATORLOOSE]:Ua[Ba.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new Ga(r[2],this.options.loose):this.semver=dr}toString(){return this.value}test(e){if(Gi("Comparator.test",e,this.options.loose),this.semver===dr||e===dr)return!0;if(typeof e=="string")try{e=new Ga(e,this.options)}catch{return!1}return Bi(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof fr))throw new TypeError("a Comparator is required");if((!n||typeof n!="object")&&(n={loose:!!n,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Xa(e.value,n).test(this.value);if(e.operator==="")return e.value===""?!0:new Xa(this.value,n).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,c=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),f=Bi(this.semver,"<",e.semver,n)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),d=Bi(this.semver,">",e.semver,n)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&c||f||d}};Va.exports=fr;var Np=sr(),{re:Ua,t:Ba}=vn(),Bi=Hi(),Gi=or(),Ga=He(),Xa=pt()});var hr=E((r_,Ja)=>{var Ip=pt(),Lp=(t,e,n)=>{try{e=new Ip(e,n)}catch{return!1}return e.test(t)};Ja.exports=Lp});var Ya=E((i_,Qa)=>{var Ap=pt(),Mp=(t,e)=>new Ap(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));Qa.exports=Mp});var ec=E((o_,Za)=>{var jp=He(),$p=pt(),Wp=(t,e,n)=>{let r=null,i=null,s=null;try{s=new $p(e,n)}catch{return null}return t.forEach(c=>{s.test(c)&&(!r||i.compare(c)===-1)&&(r=c,i=new jp(r,n))}),r};Za.exports=Wp});var nc=E((s_,tc)=>{var Hp=He(),Kp=pt(),zp=(t,e,n)=>{let r=null,i=null,s=null;try{s=new Kp(e,n)}catch{return null}return t.forEach(c=>{s.test(c)&&(!r||i.compare(c)===1)&&(r=c,i=new Hp(r,n))}),r};tc.exports=zp});var oc=E((a_,ic)=>{var Xi=He(),Up=pt(),rc=ar(),Bp=(t,e)=>{t=new Up(t,e);let n=new Xi("0.0.0");if(t.test(n)||(n=new Xi("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],s=null;i.forEach(c=>{let f=new Xi(c.semver.version);switch(c.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!s||rc(f,s))&&(s=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),s&&(!n||rc(n,s))&&(n=s)}return n&&t.test(n)?n:null};ic.exports=Bp});var ac=E((c_,sc)=>{var Gp=pt(),Xp=(t,e)=>{try{return new Gp(t,e).range||"*"}catch{return null}};sc.exports=Xp});var Jr=E((u_,dc)=>{var Vp=He(),cc=lr(),{ANY:Jp}=cc,Qp=pt(),Yp=hr(),uc=ar(),lc=zr(),Zp=Br(),eg=Ur(),tg=(t,e,n,r)=>{t=new Vp(t,r),e=new Qp(e,r);let i,s,c,f,d;switch(n){case">":i=uc,s=Zp,c=lc,f=">",d=">=";break;case"<":i=lc,s=eg,c=uc,f="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Yp(t,e,r))return!1;for(let p=0;p<e.set.length;++p){let C=e.set[p],R=null,S=null;if(C.forEach(b=>{b.semver===Jp&&(b=new cc(">=0.0.0")),R=R||b,S=S||b,i(b.semver,R.semver,r)?R=b:c(b.semver,S.semver,r)&&(S=b)}),R.operator===f||R.operator===d||(!S.operator||S.operator===f)&&s(t,S.semver))return!1;if(S.operator===d&&c(t,S.semver))return!1}return!0};dc.exports=tg});var hc=E((l_,fc)=>{var ng=Jr(),rg=(t,e,n)=>ng(t,e,">",n);fc.exports=rg});var gc=E((d_,pc)=>{var ig=Jr(),og=(t,e,n)=>ig(t,e,"<",n);pc.exports=og});var yc=E((f_,vc)=>{var mc=pt(),sg=(t,e,n)=>(t=new mc(t,n),e=new mc(e,n),t.intersects(e));vc.exports=sg});var Rc=E((h_,Cc)=>{var ag=hr(),cg=ht();Cc.exports=(t,e,n)=>{let r=[],i=null,s=null,c=t.sort((C,R)=>cg(C,R,n));for(let C of c)ag(C,e,n)?(s=C,i||(i=C)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let f=[];for(let[C,R]of r)C===R?f.push(C):!R&&C===c[0]?f.push("*"):R?C===c[0]?f.push(`<=${R}`):f.push(`${C} - ${R}`):f.push(`>=${C}`);let d=f.join(" || "),p=typeof e.raw=="string"?e.raw:String(e);return d.length<p.length?d:e}});var bc=E((p_,Tc)=>{var _c=pt(),Qr=lr(),{ANY:Vi}=Qr,pr=hr(),Ji=ht(),ug=(t,e,n={})=>{if(t===e)return!0;t=new _c(t,n),e=new _c(e,n);let r=!1;e:for(let i of t.set){for(let s of e.set){let c=lg(i,s,n);if(r=r||c!==null,c)continue e}if(r)return!1}return!0},lg=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Vi){if(e.length===1&&e[0].semver===Vi)return!0;n.includePrerelease?t=[new Qr(">=0.0.0-0")]:t=[new Qr(">=0.0.0")]}if(e.length===1&&e[0].semver===Vi){if(n.includePrerelease)return!0;e=[new Qr(">=0.0.0")]}let r=new Set,i,s;for(let b of t)b.operator===">"||b.operator===">="?i=wc(i,b,n):b.operator==="<"||b.operator==="<="?s=Sc(s,b,n):r.add(b.semver);if(r.size>1)return null;let c;if(i&&s){if(c=Ji(i.semver,s.semver,n),c>0)return null;if(c===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let b of r){if(i&&!pr(b,String(i),n)||s&&!pr(b,String(s),n))return null;for(let F of e)if(!pr(b,String(F),n))return!1;return!0}let f,d,p,C,R=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,S=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;R&&R.prerelease.length===1&&s.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(let b of e){if(C=C||b.operator===">"||b.operator===">=",p=p||b.operator==="<"||b.operator==="<=",i){if(S&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===S.major&&b.semver.minor===S.minor&&b.semver.patch===S.patch&&(S=!1),b.operator===">"||b.operator===">="){if(f=wc(i,b,n),f===b&&f!==i)return!1}else if(i.operator===">="&&!pr(i.semver,String(b),n))return!1}if(s){if(R&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===R.major&&b.semver.minor===R.minor&&b.semver.patch===R.patch&&(R=!1),b.operator==="<"||b.operator==="<="){if(d=Sc(s,b,n),d===b&&d!==s)return!1}else if(s.operator==="<="&&!pr(s.semver,String(b),n))return!1}if(!b.operator&&(s||i)&&c!==0)return!1}return!(i&&p&&!s&&c!==0||s&&C&&!i&&c!==0||S||R)},wc=(t,e,n)=>{if(!t)return e;let r=Ji(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},Sc=(t,e,n)=>{if(!t)return e;let r=Ji(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};Tc.exports=ug});var Dc=E((g_,Pc)=>{var Qi=vn();Pc.exports={re:Qi.re,src:Qi.src,tokens:Qi.t,SEMVER_SPEC_VERSION:ir().SEMVER_SPEC_VERSION,SemVer:He(),compareIdentifiers:jr().compareIdentifiers,rcompareIdentifiers:jr().rcompareIdentifiers,parse:yn(),valid:Bs(),clean:Xs(),inc:Qs(),diff:ra(),major:oa(),minor:aa(),patch:ua(),prerelease:da(),compare:ht(),rcompare:ha(),compareLoose:ga(),compareBuild:Kr(),sort:Ca(),rsort:_a(),gt:ar(),lt:zr(),eq:Hr(),neq:Wi(),gte:Ur(),lte:Br(),cmp:Hi(),coerce:qa(),Comparator:lr(),Range:pt(),satisfies:hr(),toComparators:Ya(),maxSatisfying:ec(),minSatisfying:nc(),minVersion:oc(),validRange:ac(),outside:Jr(),gtr:hc(),ltr:gc(),intersects:yc(),simplifyRange:Rc(),subset:bc()}});var on=E(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.asPromise=Te.thenable=Te.typedArray=Te.stringArray=Te.array=Te.func=Te.error=Te.number=Te.string=Te.boolean=void 0;function dg(t){return t===!0||t===!1}Te.boolean=dg;function Ec(t){return typeof t=="string"||t instanceof String}Te.string=Ec;function fg(t){return typeof t=="number"||t instanceof Number}Te.number=fg;function hg(t){return t instanceof Error}Te.error=hg;function qc(t){return typeof t=="function"}Te.func=qc;function Oc(t){return Array.isArray(t)}Te.array=Oc;function pg(t){return Oc(t)&&t.every(e=>Ec(e))}Te.stringArray=pg;function gg(t,e){return Array.isArray(t)&&t.every(e)}Te.typedArray=gg;function xc(t){return t&&qc(t.then)}Te.thenable=xc;function mg(t){return t instanceof Promise?t:xc(t)?new Promise((e,n)=>{t.then(r=>e(r),r=>n(r))}):Promise.resolve(t)}Te.asPromise=mg});var Wt=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});var Yi;function Zi(){if(Yi===void 0)throw new Error("No runtime abstraction layer installed");return Yi}(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Yi=n}t.install=e})(Zi||(Zi={}));eo.default=Zi});var to=E(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.Disposable=void 0;var vg;(function(t){function e(n){return{dispose:n}}t.create=e})(vg=gr.Disposable||(gr.Disposable={}))});var Fc=E(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.AbstractMessageBuffer=void 0;var yg=13,Cg=10,Rg=`\r
`,kc=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,n=0,r=0,i=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];r=0;t:for(;r<d.length;){switch(d[r]){case yg:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case Cg:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=d.byteLength,n++}if(e!==4)return;let s=this._read(i+r),c=new Map,f=this.toString(s,"ascii").split(Rg);if(f.length<2)return c;for(let d=0;d<f.length-2;d++){let p=f[d],C=p.indexOf(":");if(C===-1)throw new Error("Message header must separate key and value using :");let R=p.substr(0,C),S=p.substr(C+1).trim();c.set(R,S)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],c=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,c}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let c=s.slice(0,e);n.set(c,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else n.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return n}};Yr.AbstractMessageBuffer=kc});var Mc=E(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var _g=Wt(),Nc=require("util"),wn=to(),wg=Fc(),mr=class extends wg.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return mr.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Nc.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};mr.emptyBuffer=Buffer.allocUnsafe(0);var Ic=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),wn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),wn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),wn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),wn.Disposable.create(()=>this.stream.off("data",e))}},Lc=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),wn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),wn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),wn.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let s=c=>{c==null?r():i(c)};typeof e=="string"?this.stream.write(e,n,s):this.stream.write(e,s)})}end(){this.stream.end()}},Ac=Object.freeze({messageBuffer:Object.freeze({create:t=>new mr(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Nc.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:t=>new Ic(t),asWritableStream:t=>new Lc(t)}),console,timer:Object.freeze({setTimeout(t,e,...n){return setTimeout(t,e,...n)},clearTimeout(t){clearTimeout(t)},setImmediate(t,...e){return setImmediate(t,...e)},clearImmediate(t){clearImmediate(t)}})});function no(){return Ac}(function(t){function e(){_g.default.install(Ac)}t.install=e})(no||(no={}));ro.default=no});var jn=E(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.stringArray=Ke.array=Ke.func=Ke.error=Ke.number=Ke.string=Ke.boolean=void 0;function Sg(t){return t===!0||t===!1}Ke.boolean=Sg;function jc(t){return typeof t=="string"||t instanceof String}Ke.string=jc;function Tg(t){return typeof t=="number"||t instanceof Number}Ke.number=Tg;function bg(t){return t instanceof Error}Ke.error=bg;function Pg(t){return typeof t=="function"}Ke.func=Pg;function $c(t){return Array.isArray(t)}Ke.array=$c;function Dg(t){return $c(t)&&t.every(e=>jc(e))}Ke.stringArray=Dg});var io=E(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.isResponseMessage=W.isNotificationMessage=W.isRequestMessage=W.NotificationType9=W.NotificationType8=W.NotificationType7=W.NotificationType6=W.NotificationType5=W.NotificationType4=W.NotificationType3=W.NotificationType2=W.NotificationType1=W.NotificationType0=W.NotificationType=W.RequestType9=W.RequestType8=W.RequestType7=W.RequestType6=W.RequestType5=W.RequestType4=W.RequestType3=W.RequestType2=W.RequestType1=W.RequestType=W.RequestType0=W.AbstractMessageSignature=W.ParameterStructures=W.ResponseError=W.ErrorCodes=void 0;var Sn=jn(),Wc;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=t.jsonrpcReservedErrorRangeStart,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=t.jsonrpcReservedErrorRangeEnd})(Wc=W.ErrorCodes||(W.ErrorCodes={}));var Zr=class extends Error{constructor(e,n,r){super(n);this.code=Sn.number(e)?e:Wc.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,Zr.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};W.ResponseError=Zr;var je=class{constructor(e){this.kind=e}static is(e){return e===je.auto||e===je.byName||e===je.byPosition}toString(){return this.kind}};W.ParameterStructures=je;je.auto=new je("auto");je.byPosition=new je("byPosition");je.byName=new je("byName");var ye=class{constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return je.auto}};W.AbstractMessageSignature=ye;var Hc=class extends ye{constructor(e){super(e,0)}};W.RequestType0=Hc;var Kc=class extends ye{constructor(e,n=je.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};W.RequestType=Kc;var zc=class extends ye{constructor(e,n=je.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};W.RequestType1=zc;var Uc=class extends ye{constructor(e){super(e,2)}};W.RequestType2=Uc;var Bc=class extends ye{constructor(e){super(e,3)}};W.RequestType3=Bc;var Gc=class extends ye{constructor(e){super(e,4)}};W.RequestType4=Gc;var Xc=class extends ye{constructor(e){super(e,5)}};W.RequestType5=Xc;var Vc=class extends ye{constructor(e){super(e,6)}};W.RequestType6=Vc;var Jc=class extends ye{constructor(e){super(e,7)}};W.RequestType7=Jc;var Qc=class extends ye{constructor(e){super(e,8)}};W.RequestType8=Qc;var Yc=class extends ye{constructor(e){super(e,9)}};W.RequestType9=Yc;var Zc=class extends ye{constructor(e,n=je.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};W.NotificationType=Zc;var eu=class extends ye{constructor(e){super(e,0)}};W.NotificationType0=eu;var tu=class extends ye{constructor(e,n=je.auto){super(e,1);this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};W.NotificationType1=tu;var nu=class extends ye{constructor(e){super(e,2)}};W.NotificationType2=nu;var ru=class extends ye{constructor(e){super(e,3)}};W.NotificationType3=ru;var iu=class extends ye{constructor(e){super(e,4)}};W.NotificationType4=iu;var ou=class extends ye{constructor(e){super(e,5)}};W.NotificationType5=ou;var su=class extends ye{constructor(e){super(e,6)}};W.NotificationType6=su;var au=class extends ye{constructor(e){super(e,7)}};W.NotificationType7=au;var cu=class extends ye{constructor(e){super(e,8)}};W.NotificationType8=cu;var uu=class extends ye{constructor(e){super(e,9)}};W.NotificationType9=uu;function Eg(t){let e=t;return e&&Sn.string(e.method)&&(Sn.string(e.id)||Sn.number(e.id))}W.isRequestMessage=Eg;function qg(t){let e=t;return e&&Sn.string(e.method)&&t.id===void 0}W.isNotificationMessage=qg;function Og(t){let e=t;return e&&(e.result!==void 0||!!e.error)&&(Sn.string(e.id)||Sn.number(e.id)||e.id===null)}W.isResponseMessage=Og});var $n=E(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.Emitter=Tn.Event=void 0;var xg=Wt(),kg;(function(t){let e={dispose(){}};t.None=function(){return e}})(kg=Tn.Event||(Tn.Event={}));var lu=class{add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,n)})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,c=r.length;s<c;s++)try{n.push(r[s].apply(i[s],e))}catch(f){xg.default().console.error(f)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},vr=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new lu),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,n),i.dispose=vr._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Tn.Emitter=vr;vr._noop=function(){}});var co=E(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.CancellationTokenSource=bn.CancellationToken=void 0;var du=Wt(),Fg=jn(),oo=$n(),so;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:oo.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:oo.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||Fg.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.is=e})(so=bn.CancellationToken||(bn.CancellationToken={}));var Ng=Object.freeze(function(t,e){let n=du.default().timer.setTimeout(t.bind(e),0);return{dispose(){du.default().timer.clearTimeout(n)}}}),ao=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ng:(this._emitter||(this._emitter=new oo.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},fu=class{get token(){return this._token||(this._token=new ao),this._token}cancel(){this._token?this._token.cancel():this._token=so.Cancelled}dispose(){this._token?this._token instanceof ao&&this._token.dispose():this._token=so.None}};bn.CancellationTokenSource=fu});var pu=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.ReadableStreamMessageReader=Ht.AbstractMessageReader=Ht.MessageReader=void 0;var ei=Wt(),Wn=jn(),uo=$n(),Ig;(function(t){function e(n){let r=n;return r&&Wn.func(r.listen)&&Wn.func(r.dispose)&&Wn.func(r.onError)&&Wn.func(r.onClose)&&Wn.func(r.onPartialMessage)}t.is=e})(Ig=Ht.MessageReader||(Ht.MessageReader={}));var lo=class{constructor(){this.errorEmitter=new uo.Emitter,this.closeEmitter=new uo.Emitter,this.partialMessageEmitter=new uo.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Wn.string(e.message)?e.message:"unknown"}`)}};Ht.AbstractMessageReader=lo;var fo;(function(t){function e(n){var r;let i,s,c,f=new Map,d,p=new Map;if(n===void 0||typeof n=="string")i=n??"utf-8";else{if(i=(r=n.charset)!==null&&r!==void 0?r:"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,f.set(c.name,c)),n.contentDecoders!==void 0)for(let C of n.contentDecoders)f.set(C.name,C);if(n.contentTypeDecoder!==void 0&&(d=n.contentTypeDecoder,p.set(d.name,d)),n.contentTypeDecoders!==void 0)for(let C of n.contentTypeDecoders)p.set(C.name,C)}return d===void 0&&(d=ei.default().applicationJson.decoder,p.set(d.name,d)),{charset:i,contentDecoder:c,contentDecoders:f,contentTypeDecoder:d,contentTypeDecoders:p}}t.fromOptions=e})(fo||(fo={}));var hu=class extends lo{constructor(e,n){super();this.readable=e,this.options=fo.fromOptions(n),this.buffer=ei.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let c=parseInt(s);if(isNaN(c))throw new Error("Content-Length value must be a number.");this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(n):r=Promise.resolve(n),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(ei.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=ei.default().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Ht.ReadableStreamMessageReader=hu});var mu=E(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.Semaphore=void 0;var Lg=Wt(),gu=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||Lg.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};ti.Semaphore=gu});var _u=E(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.WriteableStreamMessageWriter=Kt.AbstractMessageWriter=Kt.MessageWriter=void 0;var vu=Wt(),yr=jn(),Ag=mu(),yu=$n(),Mg="Content-Length: ",Cu=`\r
`,jg;(function(t){function e(n){let r=n;return r&&yr.func(r.dispose)&&yr.func(r.onClose)&&yr.func(r.onError)&&yr.func(r.write)}t.is=e})(jg=Kt.MessageWriter||(Kt.MessageWriter={}));var ho=class{constructor(){this.errorEmitter=new yu.Emitter,this.closeEmitter=new yu.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${yr.string(e.message)?e.message:"unknown"}`)}};Kt.AbstractMessageWriter=ho;var po;(function(t){function e(n){var r,i;return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:vu.default().applicationJson.encoder}:{charset:(r=n.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:(i=n.contentTypeEncoder)!==null&&i!==void 0?i:vu.default().applicationJson.encoder}}t.fromOptions=e})(po||(po={}));var Ru=class extends ho{constructor(e,n){super();this.writable=e,this.options=po.fromOptions(n),this.errorCount=0,this.writeSemaphore=new Ag.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Mg,r.byteLength.toString(),Cu),i.push(Cu),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Kt.WriteableStreamMessageWriter=Ru});var Su=E(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.LRUCache=zt.LinkedMap=zt.Touch=void 0;var Ve;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ve=zt.Touch||(zt.Touch={}));var go=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Ve.None){let r=this._map.get(e);if(!!r)return n!==Ve.None&&this.touch(r,n),r.value}set(e,n,r=Ve.None){let i=this._map.get(e);if(i)i.value=n,r!==Ve.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ve.None:this.addItemLast(i);break;case Ve.First:this.addItemFirst(i);break;case Ve.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ve.First&&n!==Ve.Last)){if(n===Ve.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ve.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};zt.LinkedMap=go;var wu=class extends go{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ve.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ve.None)}set(e,n){return super.set(e,n,Ve.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};zt.LRUCache=wu});var qu=E(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.createMessageConnection=V.ConnectionOptions=V.CancellationStrategy=V.CancellationSenderStrategy=V.CancellationReceiverStrategy=V.ConnectionStrategy=V.ConnectionError=V.ConnectionErrors=V.LogTraceNotification=V.SetTraceNotification=V.TraceFormat=V.Trace=V.NullLogger=V.ProgressType=void 0;var Tu=Wt(),Le=jn(),X=io(),bu=Su(),Cr=$n(),mo=co(),Rr;(function(t){t.type=new X.NotificationType("$/cancelRequest")})(Rr||(Rr={}));var ni;(function(t){t.type=new X.NotificationType("$/progress")})(ni||(ni={}));var Pu=class{constructor(){}};V.ProgressType=Pu;var vo;(function(t){function e(n){return Le.func(n)}t.is=e})(vo||(vo={}));V.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var qe;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Verbose=2]="Verbose"})(qe=V.Trace||(V.Trace={}));(function(t){function e(r){if(!Le.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Verbose:return"verbose";default:return"off"}}t.toString=n})(qe=V.Trace||(V.Trace={}));var wt;(function(t){t.Text="text",t.JSON="json"})(wt=V.TraceFormat||(V.TraceFormat={}));(function(t){function e(n){return n=n.toLowerCase(),n==="json"?t.JSON:t.Text}t.fromString=e})(wt=V.TraceFormat||(V.TraceFormat={}));var Du;(function(t){t.type=new X.NotificationType("$/setTrace")})(Du=V.SetTraceNotification||(V.SetTraceNotification={}));var yo;(function(t){t.type=new X.NotificationType("$/logTrace")})(yo=V.LogTraceNotification||(V.LogTraceNotification={}));var ri;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(ri=V.ConnectionErrors||(V.ConnectionErrors={}));var Pn=class extends Error{constructor(e,n){super(n);this.code=e,Object.setPrototypeOf(this,Pn.prototype)}};V.ConnectionError=Pn;var Eu;(function(t){function e(n){let r=n;return r&&Le.func(r.cancelUndispatched)}t.is=e})(Eu=V.ConnectionStrategy||(V.ConnectionStrategy={}));var Co;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new mo.CancellationTokenSource}});function e(n){let r=n;return r&&Le.func(r.createCancellationTokenSource)}t.is=e})(Co=V.CancellationReceiverStrategy||(V.CancellationReceiverStrategy={}));var Ro;(function(t){t.Message=Object.freeze({sendCancellation(n,r){n.sendNotification(Rr.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Le.func(r.sendCancellation)&&Le.func(r.cleanup)}t.is=e})(Ro=V.CancellationSenderStrategy||(V.CancellationSenderStrategy={}));var _o;(function(t){t.Message=Object.freeze({receiver:Co.Message,sender:Ro.Message});function e(n){let r=n;return r&&Co.is(r.receiver)&&Ro.is(r.sender)}t.is=e})(_o=V.CancellationStrategy||(V.CancellationStrategy={}));var $g;(function(t){function e(n){let r=n;return r&&(_o.is(r.cancellationStrategy)||Eu.is(r.connectionStrategy))}t.is=e})($g=V.ConnectionOptions||(V.ConnectionOptions={}));var St;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(St||(St={}));function Wg(t,e,n,r){let i=n!==void 0?n:V.NullLogger,s=0,c=0,f=0,d="2.0",p,C=Object.create(null),R,S=Object.create(null),b=new Map,F,I=new bu.LinkedMap,A=Object.create(null),k=Object.create(null),O=qe.Off,x=wt.Text,D,z=St.New,oe=new Cr.Emitter,G=new Cr.Emitter,re=new Cr.Emitter,se=new Cr.Emitter,ae=new Cr.Emitter,Se=r&&r.cancellationStrategy?r.cancellationStrategy:_o.Message;function Ne(_){if(_===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+_.toString()}function Ue(_){return _===null?"res-unknown-"+(++f).toString():"res-"+_.toString()}function Ye(){return"not-"+(++c).toString()}function Be(_,g){X.isRequestMessage(g)?_.set(Ne(g.id),g):X.isResponseMessage(g)?_.set(Ue(g.id),g):_.set(Ye(),g)}function yt(_){}function me(){return z===St.Listening}function Ct(){return z===St.Closed}function Fe(){return z===St.Disposed}function rt(){(z===St.New||z===St.Listening)&&(z=St.Closed,G.fire(void 0))}function st(_){oe.fire([_,void 0,void 0])}function Rt(_){oe.fire(_)}t.onClose(rt),t.onError(st),e.onClose(rt),e.onError(Rt);function Vt(){F||I.size===0||(F=Tu.default().timer.setImmediate(()=>{F=void 0,Jt()}))}function Jt(){if(I.size===0)return;let _=I.shift();try{X.isRequestMessage(_)?It(_):X.isNotificationMessage(_)?qt(_):X.isResponseMessage(_)?Et(_):Lt(_)}finally{Vt()}}let Nt=_=>{try{if(X.isNotificationMessage(_)&&_.method===Rr.type.method){let g=Ne(_.params.id),l=I.get(g);if(X.isRequestMessage(l)){let m=r==null?void 0:r.connectionStrategy,w=m&&m.cancelUndispatched?m.cancelUndispatched(l,yt):void 0;if(w&&(w.error!==void 0||w.result!==void 0)){I.delete(g),w.id=l.id,at(w,_.method,Date.now()),e.write(w);return}}}Be(I,_)}finally{Vt()}};function It(_){if(Fe())return;function g(T,N,K){let J={jsonrpc:d,id:_.id};T instanceof X.ResponseError?J.error=T.toJson():J.result=T===void 0?null:T,at(J,N,K),e.write(J)}function l(T,N,K){let J={jsonrpc:d,id:_.id,error:T.toJson()};at(J,N,K),e.write(J)}function m(T,N,K){T===void 0&&(T=null);let J={jsonrpc:d,id:_.id,result:T};at(J,N,K),e.write(J)}Yt(_);let w=C[_.method],o,a;w&&(o=w.type,a=w.handler);let y=Date.now();if(a||p){let T=String(_.id),N=Se.receiver.createCancellationTokenSource(T);k[T]=N;try{let K;if(a)if(_.params===void 0){if(o!==void 0&&o.numberOfParams!==0){l(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${_.method} defines ${o.numberOfParams} params but recevied none.`),_.method,y);return}K=a(N.token)}else if(Array.isArray(_.params)){if(o!==void 0&&o.parameterStructures===X.ParameterStructures.byName){l(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by name but received parameters by position`),_.method,y);return}K=a(..._.params,N.token)}else{if(o!==void 0&&o.parameterStructures===X.ParameterStructures.byPosition){l(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by position but received parameters by name`),_.method,y);return}K=a(_.params,N.token)}else p&&(K=p(_.method,_.params,N.token));let J=K;K?J.then?J.then(de=>{delete k[T],g(de,_.method,y)},de=>{delete k[T],de instanceof X.ResponseError?l(de,_.method,y):de&&Le.string(de.message)?l(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${de.message}`),_.method,y):l(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,y)}):(delete k[T],g(K,_.method,y)):(delete k[T],m(K,_.method,y))}catch(K){delete k[T],K instanceof X.ResponseError?g(K,_.method,y):K&&Le.string(K.message)?l(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${K.message}`),_.method,y):l(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,y)}}else l(new X.ResponseError(X.ErrorCodes.MethodNotFound,`Unhandled method ${_.method}`),_.method,y)}function Et(_){if(!Fe())if(_.id===null)_.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(_.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let g=String(_.id),l=A[g];if(hn(_,l),l){delete A[g];try{if(_.error){let m=_.error;l.reject(new X.ResponseError(m.code,m.message,m.data))}else if(_.result!==void 0)l.resolve(_.result);else throw new Error("Should never happen.")}catch(m){m.message?i.error(`Response handler '${l.method}' failed with message: ${m.message}`):i.error(`Response handler '${l.method}' failed unexpectedly.`)}}}}function qt(_){if(Fe())return;let g,l;if(_.method===Rr.type.method)l=m=>{let w=m.id,o=k[String(w)];o&&o.cancel()};else{let m=S[_.method];m&&(l=m.handler,g=m.type)}if(l||R)try{ct(_),l?_.params===void 0?(g!==void 0&&g.numberOfParams!==0&&g.parameterStructures!==X.ParameterStructures.byName&&i.error(`Notification ${_.method} defines ${g.numberOfParams} params but recevied none.`),l()):Array.isArray(_.params)?(g!==void 0&&(g.parameterStructures===X.ParameterStructures.byName&&i.error(`Notification ${_.method} defines parameters by name but received parameters by position`),g.numberOfParams!==_.params.length&&i.error(`Notification ${_.method} defines ${g.numberOfParams} params but received ${_.params.length} argumennts`)),l(..._.params)):(g!==void 0&&g.parameterStructures===X.ParameterStructures.byPosition&&i.error(`Notification ${_.method} defines parameters by position but received parameters by name`),l(_.params)):R&&R(_.method,_.params)}catch(m){m.message?i.error(`Notification handler '${_.method}' failed with message: ${m.message}`):i.error(`Notification handler '${_.method}' failed unexpectedly.`)}else re.fire(_)}function Lt(_){if(!_){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(_,null,4)}`);let g=_;if(Le.string(g.id)||Le.number(g.id)){let l=String(g.id),m=A[l];m&&m.reject(new Error("The received response has neither a result nor an error property."))}}function Qt(_){if(!(O===qe.Off||!D))if(x===wt.Text){let g;O===qe.Verbose&&_.params&&(g=`Params: ${JSON.stringify(_.params,null,4)}

`),D.log(`Sending request '${_.method} - (${_.id})'.`,g)}else be("send-request",_)}function fn(_){if(!(O===qe.Off||!D))if(x===wt.Text){let g;O===qe.Verbose&&(_.params?g=`Params: ${JSON.stringify(_.params,null,4)}

`:g=`No parameters provided.

`),D.log(`Sending notification '${_.method}'.`,g)}else be("send-notification",_)}function at(_,g,l){if(!(O===qe.Off||!D))if(x===wt.Text){let m;O===qe.Verbose&&(_.error&&_.error.data?m=`Error data: ${JSON.stringify(_.error.data,null,4)}

`:_.result?m=`Result: ${JSON.stringify(_.result,null,4)}

`:_.error===void 0&&(m=`No result returned.

`)),D.log(`Sending response '${g} - (${_.id})'. Processing request took ${Date.now()-l}ms`,m)}else be("send-response",_)}function Yt(_){if(!(O===qe.Off||!D))if(x===wt.Text){let g;O===qe.Verbose&&_.params&&(g=`Params: ${JSON.stringify(_.params,null,4)}

`),D.log(`Received request '${_.method} - (${_.id})'.`,g)}else be("receive-request",_)}function ct(_){if(!(O===qe.Off||!D||_.method===yo.type.method))if(x===wt.Text){let g;O===qe.Verbose&&(_.params?g=`Params: ${JSON.stringify(_.params,null,4)}

`:g=`No parameters provided.

`),D.log(`Received notification '${_.method}'.`,g)}else be("receive-notification",_)}function hn(_,g){if(!(O===qe.Off||!D))if(x===wt.Text){let l;if(O===qe.Verbose&&(_.error&&_.error.data?l=`Error data: ${JSON.stringify(_.error.data,null,4)}

`:_.result?l=`Result: ${JSON.stringify(_.result,null,4)}

`:_.error===void 0&&(l=`No result returned.

`)),g){let m=_.error?` Request failed: ${_.error.message} (${_.error.code}).`:"";D.log(`Received response '${g.method} - (${_.id})' in ${Date.now()-g.timerStart}ms.${m}`,l)}else D.log(`Received response ${_.id} without active response promise.`,l)}else be("receive-response",_)}function be(_,g){if(!D||O===qe.Off)return;let l={isLSPMessage:!0,type:_,message:g,timestamp:Date.now()};D.log(l)}function Ze(){if(Ct())throw new Pn(ri.Closed,"Connection is closed.");if(Fe())throw new Pn(ri.Disposed,"Connection is disposed.")}function Zt(){if(me())throw new Pn(ri.AlreadyListening,"Connection is already listening")}function pn(){if(!me())throw new Error("Call listen() first.")}function ut(_){return _===void 0?null:_}function en(_){if(_!==null)return _}function At(_){return _!=null&&!Array.isArray(_)&&typeof _=="object"}function lt(_,g){switch(_){case X.ParameterStructures.auto:return At(g)?en(g):[ut(g)];case X.ParameterStructures.byName:if(!At(g))throw new Error("Recevied parameters by name but param is not an object literal.");return en(g);case X.ParameterStructures.byPosition:return[ut(g)];default:throw new Error(`Unknown parameter structure ${_.toString()}`)}}function Mt(_,g){let l,m=_.numberOfParams;switch(m){case 0:l=void 0;break;case 1:l=lt(_.parameterStructures,g[0]);break;default:l=[];for(let w=0;w<g.length&&w<m;w++)l.push(ut(g[w]));if(g.length<m)for(let w=g.length;w<m;w++)l.push(null);break}return l}let dt={sendNotification:(_,...g)=>{Ze();let l,m;if(Le.string(_)){l=_;let o=g[0],a=0,y=X.ParameterStructures.auto;X.ParameterStructures.is(o)&&(a=1,y=o);let T=g.length,N=T-a;switch(N){case 0:m=void 0;break;case 1:m=lt(y,g[a]);break;default:if(y===X.ParameterStructures.byName)throw new Error(`Recevied ${N} parameters for 'by Name' notification parameter structure.`);m=g.slice(a,T).map(K=>ut(K));break}}else{let o=g;l=_.method,m=Mt(_,o)}let w={jsonrpc:d,method:l,params:m};fn(w),e.write(w)},onNotification:(_,g)=>{Ze();let l;return Le.func(_)?R=_:g&&(Le.string(_)?(l=_,S[_]={type:void 0,handler:g}):(l=_.method,S[_.method]={type:_,handler:g})),{dispose:()=>{l!==void 0?delete S[l]:R=void 0}}},onProgress:(_,g,l)=>{if(b.has(g))throw new Error(`Progress handler for token ${g} already registered`);return b.set(g,l),{dispose:()=>{b.delete(g)}}},sendProgress:(_,g,l)=>{dt.sendNotification(ni.type,{token:g,value:l})},onUnhandledProgress:se.event,sendRequest:(_,...g)=>{Ze(),pn();let l,m,w;if(Le.string(_)){l=_;let T=g[0],N=g[g.length-1],K=0,J=X.ParameterStructures.auto;X.ParameterStructures.is(T)&&(K=1,J=T);let de=g.length;mo.CancellationToken.is(N)&&(de=de-1,w=N);let Pe=de-K;switch(Pe){case 0:m=void 0;break;case 1:m=lt(J,g[K]);break;default:if(J===X.ParameterStructures.byName)throw new Error(`Recevied ${Pe} parameters for 'by Name' request parameter structure.`);m=g.slice(K,de).map(De=>ut(De));break}}else{let T=g;l=_.method,m=Mt(_,T);let N=_.numberOfParams;w=mo.CancellationToken.is(T[N])?T[N]:void 0}let o=s++,a;return w&&(a=w.onCancellationRequested(()=>{Se.sender.sendCancellation(dt,o)})),new Promise((T,N)=>{let K={jsonrpc:d,id:o,method:l,params:m},J=De=>{T(De),Se.sender.cleanup(o),a==null||a.dispose()},de=De=>{N(De),Se.sender.cleanup(o),a==null||a.dispose()},Pe={method:l,timerStart:Date.now(),resolve:J,reject:de};Qt(K);try{e.write(K)}catch(De){Pe.reject(new X.ResponseError(X.ErrorCodes.MessageWriteError,De.message?De.message:"Unknown reason")),Pe=null}Pe&&(A[String(o)]=Pe)})},onRequest:(_,g)=>{Ze();let l=null;return vo.is(_)?(l=void 0,p=_):Le.string(_)?(l=null,g!==void 0&&(l=_,C[_]={handler:g,type:void 0})):g!==void 0&&(l=_.method,C[_.method]={type:_,handler:g}),{dispose:()=>{l!==null&&(l!==void 0?delete C[l]:p=void 0)}}},trace:(_,g,l)=>{let m=!1,w=wt.Text;l!==void 0&&(Le.boolean(l)?m=l:(m=l.sendNotification||!1,w=l.traceFormat||wt.Text)),O=_,x=w,O===qe.Off?D=void 0:D=g,m&&!Ct()&&!Fe()&&dt.sendNotification(Du.type,{value:qe.toString(_)})},onError:oe.event,onClose:G.event,onUnhandledNotification:re.event,onDispose:ae.event,end:()=>{e.end()},dispose:()=>{if(Fe())return;z=St.Disposed,ae.fire(void 0);let _=new Error("Connection got disposed.");Object.keys(A).forEach(g=>{A[g].reject(_)}),A=Object.create(null),k=Object.create(null),I=new bu.LinkedMap,Le.func(e.dispose)&&e.dispose(),Le.func(t.dispose)&&t.dispose()},listen:()=>{Ze(),Zt(),z=St.Listening,t.listen(Nt)},inspect:()=>{Tu.default().console.log("inspect")}};return dt.onNotification(yo.type,_=>{O===qe.Off||!D||D.log(_.message,O===qe.Verbose?_.verbose:void 0)}),dt.onNotification(ni.type,_=>{let g=b.get(_.token);g?g(_.value):se.fire(_)}),dt}V.createMessageConnection=Wg});var To=E(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.CancellationSenderStrategy=q.CancellationReceiverStrategy=q.ConnectionError=q.ConnectionErrors=q.LogTraceNotification=q.SetTraceNotification=q.TraceFormat=q.Trace=q.ProgressType=q.createMessageConnection=q.NullLogger=q.ConnectionOptions=q.ConnectionStrategy=q.WriteableStreamMessageWriter=q.AbstractMessageWriter=q.MessageWriter=q.ReadableStreamMessageReader=q.AbstractMessageReader=q.MessageReader=q.CancellationToken=q.CancellationTokenSource=q.Emitter=q.Event=q.Disposable=q.ParameterStructures=q.NotificationType9=q.NotificationType8=q.NotificationType7=q.NotificationType6=q.NotificationType5=q.NotificationType4=q.NotificationType3=q.NotificationType2=q.NotificationType1=q.NotificationType0=q.NotificationType=q.ErrorCodes=q.ResponseError=q.RequestType9=q.RequestType8=q.RequestType7=q.RequestType6=q.RequestType5=q.RequestType4=q.RequestType3=q.RequestType2=q.RequestType1=q.RequestType0=q.RequestType=q.RAL=void 0;q.CancellationStrategy=void 0;var ve=io();Object.defineProperty(q,"RequestType",{enumerable:!0,get:function(){return ve.RequestType}});Object.defineProperty(q,"RequestType0",{enumerable:!0,get:function(){return ve.RequestType0}});Object.defineProperty(q,"RequestType1",{enumerable:!0,get:function(){return ve.RequestType1}});Object.defineProperty(q,"RequestType2",{enumerable:!0,get:function(){return ve.RequestType2}});Object.defineProperty(q,"RequestType3",{enumerable:!0,get:function(){return ve.RequestType3}});Object.defineProperty(q,"RequestType4",{enumerable:!0,get:function(){return ve.RequestType4}});Object.defineProperty(q,"RequestType5",{enumerable:!0,get:function(){return ve.RequestType5}});Object.defineProperty(q,"RequestType6",{enumerable:!0,get:function(){return ve.RequestType6}});Object.defineProperty(q,"RequestType7",{enumerable:!0,get:function(){return ve.RequestType7}});Object.defineProperty(q,"RequestType8",{enumerable:!0,get:function(){return ve.RequestType8}});Object.defineProperty(q,"RequestType9",{enumerable:!0,get:function(){return ve.RequestType9}});Object.defineProperty(q,"ResponseError",{enumerable:!0,get:function(){return ve.ResponseError}});Object.defineProperty(q,"ErrorCodes",{enumerable:!0,get:function(){return ve.ErrorCodes}});Object.defineProperty(q,"NotificationType",{enumerable:!0,get:function(){return ve.NotificationType}});Object.defineProperty(q,"NotificationType0",{enumerable:!0,get:function(){return ve.NotificationType0}});Object.defineProperty(q,"NotificationType1",{enumerable:!0,get:function(){return ve.NotificationType1}});Object.defineProperty(q,"NotificationType2",{enumerable:!0,get:function(){return ve.NotificationType2}});Object.defineProperty(q,"NotificationType3",{enumerable:!0,get:function(){return ve.NotificationType3}});Object.defineProperty(q,"NotificationType4",{enumerable:!0,get:function(){return ve.NotificationType4}});Object.defineProperty(q,"NotificationType5",{enumerable:!0,get:function(){return ve.NotificationType5}});Object.defineProperty(q,"NotificationType6",{enumerable:!0,get:function(){return ve.NotificationType6}});Object.defineProperty(q,"NotificationType7",{enumerable:!0,get:function(){return ve.NotificationType7}});Object.defineProperty(q,"NotificationType8",{enumerable:!0,get:function(){return ve.NotificationType8}});Object.defineProperty(q,"NotificationType9",{enumerable:!0,get:function(){return ve.NotificationType9}});Object.defineProperty(q,"ParameterStructures",{enumerable:!0,get:function(){return ve.ParameterStructures}});var Hg=to();Object.defineProperty(q,"Disposable",{enumerable:!0,get:function(){return Hg.Disposable}});var Ou=$n();Object.defineProperty(q,"Event",{enumerable:!0,get:function(){return Ou.Event}});Object.defineProperty(q,"Emitter",{enumerable:!0,get:function(){return Ou.Emitter}});var xu=co();Object.defineProperty(q,"CancellationTokenSource",{enumerable:!0,get:function(){return xu.CancellationTokenSource}});Object.defineProperty(q,"CancellationToken",{enumerable:!0,get:function(){return xu.CancellationToken}});var wo=pu();Object.defineProperty(q,"MessageReader",{enumerable:!0,get:function(){return wo.MessageReader}});Object.defineProperty(q,"AbstractMessageReader",{enumerable:!0,get:function(){return wo.AbstractMessageReader}});Object.defineProperty(q,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return wo.ReadableStreamMessageReader}});var So=_u();Object.defineProperty(q,"MessageWriter",{enumerable:!0,get:function(){return So.MessageWriter}});Object.defineProperty(q,"AbstractMessageWriter",{enumerable:!0,get:function(){return So.AbstractMessageWriter}});Object.defineProperty(q,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return So.WriteableStreamMessageWriter}});var tt=qu();Object.defineProperty(q,"ConnectionStrategy",{enumerable:!0,get:function(){return tt.ConnectionStrategy}});Object.defineProperty(q,"ConnectionOptions",{enumerable:!0,get:function(){return tt.ConnectionOptions}});Object.defineProperty(q,"NullLogger",{enumerable:!0,get:function(){return tt.NullLogger}});Object.defineProperty(q,"createMessageConnection",{enumerable:!0,get:function(){return tt.createMessageConnection}});Object.defineProperty(q,"ProgressType",{enumerable:!0,get:function(){return tt.ProgressType}});Object.defineProperty(q,"Trace",{enumerable:!0,get:function(){return tt.Trace}});Object.defineProperty(q,"TraceFormat",{enumerable:!0,get:function(){return tt.TraceFormat}});Object.defineProperty(q,"SetTraceNotification",{enumerable:!0,get:function(){return tt.SetTraceNotification}});Object.defineProperty(q,"LogTraceNotification",{enumerable:!0,get:function(){return tt.LogTraceNotification}});Object.defineProperty(q,"ConnectionErrors",{enumerable:!0,get:function(){return tt.ConnectionErrors}});Object.defineProperty(q,"ConnectionError",{enumerable:!0,get:function(){return tt.ConnectionError}});Object.defineProperty(q,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return tt.CancellationReceiverStrategy}});Object.defineProperty(q,"CancellationSenderStrategy",{enumerable:!0,get:function(){return tt.CancellationSenderStrategy}});Object.defineProperty(q,"CancellationStrategy",{enumerable:!0,get:function(){return tt.CancellationStrategy}});var Kg=Wt();q.RAL=Kg.default});var Un=E(ue=>{"use strict";var zg=ue&&ue.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ug=ue&&ue.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&zg(e,t,n)};Object.defineProperty(ue,"__esModule",{value:!0});ue.createMessageConnection=ue.createServerSocketTransport=ue.createClientSocketTransport=ue.createServerPipeTransport=ue.createClientPipeTransport=ue.generateRandomPipeName=ue.StreamMessageWriter=ue.StreamMessageReader=ue.SocketMessageWriter=ue.SocketMessageReader=ue.IPCMessageWriter=ue.IPCMessageReader=void 0;var Hn=Mc();Hn.default.install();var Ot=To(),ku=require("path"),Bg=require("os"),Gg=require("crypto"),ii=require("net");Ug(To(),ue);var Fu=class extends Ot.AbstractMessageReader{constructor(e){super();this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Ot.Disposable.create(()=>this.process.off("message",e))}};ue.IPCMessageReader=Fu;var Nu=class extends Ot.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};ue.IPCMessageWriter=Nu;var Kn=class extends Ot.ReadableStreamMessageReader{constructor(e,n="utf-8"){super(Hn.default().stream.asReadableStream(e),n)}};ue.SocketMessageReader=Kn;var zn=class extends Ot.WriteableStreamMessageWriter{constructor(e,n){super(Hn.default().stream.asWritableStream(e),n);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ue.SocketMessageWriter=zn;var bo=class extends Ot.ReadableStreamMessageReader{constructor(e,n){super(Hn.default().stream.asReadableStream(e),n)}};ue.StreamMessageReader=bo;var Po=class extends Ot.WriteableStreamMessageWriter{constructor(e,n){super(Hn.default().stream.asWritableStream(e),n)}};ue.StreamMessageWriter=Po;var Iu=process.env.XDG_RUNTIME_DIR,Xg=new Map([["linux",107],["darwin",103]]);function Vg(){let t=Gg.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;Iu?e=ku.join(Iu,`vscode-ipc-${t}.sock`):e=ku.join(Bg.tmpdir(),`vscode-${t}.sock`);let n=Xg.get(process.platform);return n!==void 0&&e.length>=n&&Hn.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}ue.generateRandomPipeName=Vg;function Jg(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let c=ii.createServer(f=>{c.close(),n([new Kn(f,e),new zn(f,e)])});c.on("error",s),c.listen(t,()=>{c.removeListener("error",s),i({onConnected:()=>r})})})}ue.createClientPipeTransport=Jg;function Qg(t,e="utf-8"){let n=ii.createConnection(t);return[new Kn(n,e),new zn(n,e)]}ue.createServerPipeTransport=Qg;function Yg(t,e="utf-8"){let n,r=new Promise((i,s)=>{n=i});return new Promise((i,s)=>{let c=ii.createServer(f=>{c.close(),n([new Kn(f,e),new zn(f,e)])});c.on("error",s),c.listen(t,"127.0.0.1",()=>{c.removeListener("error",s),i({onConnected:()=>r})})})}ue.createClientSocketTransport=Yg;function Zg(t,e="utf-8"){let n=ii.createConnection(t,"127.0.0.1");return[new Kn(n,e),new zn(n,e)]}ue.createServerSocketTransport=Zg;function em(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function tm(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function nm(t,e,n,r){n||(n=Ot.NullLogger);let i=em(t)?new bo(t):t,s=tm(e)?new Po(e):e;return Ot.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ot.createMessageConnection(i,s,n,r)}ue.createMessageConnection=nm});var Do=E((k_,Lu)=>{"use strict";Lu.exports=Un()});var Mu=E((Au,oi)=>{(function(t){if(typeof oi=="object"&&typeof oi.exports=="object"){var e=t(require,Au);e!==void 0&&(oi.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var n;(function(l){l.MIN_VALUE=-2147483648,l.MAX_VALUE=2147483647})(n=e.integer||(e.integer={}));var r;(function(l){l.MIN_VALUE=0,l.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(l){function m(o,a){return o===Number.MAX_VALUE&&(o=r.MAX_VALUE),a===Number.MAX_VALUE&&(a=r.MAX_VALUE),{line:o,character:a}}l.create=m;function w(o){var a=o;return g.objectLiteral(a)&&g.uinteger(a.line)&&g.uinteger(a.character)}l.is=w})(i=e.Position||(e.Position={}));var s;(function(l){function m(o,a,y,T){if(g.uinteger(o)&&g.uinteger(a)&&g.uinteger(y)&&g.uinteger(T))return{start:i.create(o,a),end:i.create(y,T)};if(i.is(o)&&i.is(a))return{start:o,end:a};throw new Error("Range#create called with invalid arguments["+o+", "+a+", "+y+", "+T+"]")}l.create=m;function w(o){var a=o;return g.objectLiteral(a)&&i.is(a.start)&&i.is(a.end)}l.is=w})(s=e.Range||(e.Range={}));var c;(function(l){function m(o,a){return{uri:o,range:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&s.is(a.range)&&(g.string(a.uri)||g.undefined(a.uri))}l.is=w})(c=e.Location||(e.Location={}));var f;(function(l){function m(o,a,y,T){return{targetUri:o,targetRange:a,targetSelectionRange:y,originSelectionRange:T}}l.create=m;function w(o){var a=o;return g.defined(a)&&s.is(a.targetRange)&&g.string(a.targetUri)&&(s.is(a.targetSelectionRange)||g.undefined(a.targetSelectionRange))&&(s.is(a.originSelectionRange)||g.undefined(a.originSelectionRange))}l.is=w})(f=e.LocationLink||(e.LocationLink={}));var d;(function(l){function m(o,a,y,T){return{red:o,green:a,blue:y,alpha:T}}l.create=m;function w(o){var a=o;return g.numberRange(a.red,0,1)&&g.numberRange(a.green,0,1)&&g.numberRange(a.blue,0,1)&&g.numberRange(a.alpha,0,1)}l.is=w})(d=e.Color||(e.Color={}));var p;(function(l){function m(o,a){return{range:o,color:a}}l.create=m;function w(o){var a=o;return s.is(a.range)&&d.is(a.color)}l.is=w})(p=e.ColorInformation||(e.ColorInformation={}));var C;(function(l){function m(o,a,y){return{label:o,textEdit:a,additionalTextEdits:y}}l.create=m;function w(o){var a=o;return g.string(a.label)&&(g.undefined(a.textEdit)||x.is(a))&&(g.undefined(a.additionalTextEdits)||g.typedArray(a.additionalTextEdits,x.is))}l.is=w})(C=e.ColorPresentation||(e.ColorPresentation={}));var R;(function(l){l.Comment="comment",l.Imports="imports",l.Region="region"})(R=e.FoldingRangeKind||(e.FoldingRangeKind={}));var S;(function(l){function m(o,a,y,T,N){var K={startLine:o,endLine:a};return g.defined(y)&&(K.startCharacter=y),g.defined(T)&&(K.endCharacter=T),g.defined(N)&&(K.kind=N),K}l.create=m;function w(o){var a=o;return g.uinteger(a.startLine)&&g.uinteger(a.startLine)&&(g.undefined(a.startCharacter)||g.uinteger(a.startCharacter))&&(g.undefined(a.endCharacter)||g.uinteger(a.endCharacter))&&(g.undefined(a.kind)||g.string(a.kind))}l.is=w})(S=e.FoldingRange||(e.FoldingRange={}));var b;(function(l){function m(o,a){return{location:o,message:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&c.is(a.location)&&g.string(a.message)}l.is=w})(b=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var F;(function(l){l.Error=1,l.Warning=2,l.Information=3,l.Hint=4})(F=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var I;(function(l){l.Unnecessary=1,l.Deprecated=2})(I=e.DiagnosticTag||(e.DiagnosticTag={}));var A;(function(l){function m(w){var o=w;return o!=null&&g.string(o.href)}l.is=m})(A=e.CodeDescription||(e.CodeDescription={}));var k;(function(l){function m(o,a,y,T,N,K){var J={range:o,message:a};return g.defined(y)&&(J.severity=y),g.defined(T)&&(J.code=T),g.defined(N)&&(J.source=N),g.defined(K)&&(J.relatedInformation=K),J}l.create=m;function w(o){var a,y=o;return g.defined(y)&&s.is(y.range)&&g.string(y.message)&&(g.number(y.severity)||g.undefined(y.severity))&&(g.integer(y.code)||g.string(y.code)||g.undefined(y.code))&&(g.undefined(y.codeDescription)||g.string((a=y.codeDescription)===null||a===void 0?void 0:a.href))&&(g.string(y.source)||g.undefined(y.source))&&(g.undefined(y.relatedInformation)||g.typedArray(y.relatedInformation,b.is))}l.is=w})(k=e.Diagnostic||(e.Diagnostic={}));var O;(function(l){function m(o,a){for(var y=[],T=2;T<arguments.length;T++)y[T-2]=arguments[T];var N={title:o,command:a};return g.defined(y)&&y.length>0&&(N.arguments=y),N}l.create=m;function w(o){var a=o;return g.defined(a)&&g.string(a.title)&&g.string(a.command)}l.is=w})(O=e.Command||(e.Command={}));var x;(function(l){function m(y,T){return{range:y,newText:T}}l.replace=m;function w(y,T){return{range:{start:y,end:y},newText:T}}l.insert=w;function o(y){return{range:y,newText:""}}l.del=o;function a(y){var T=y;return g.objectLiteral(T)&&g.string(T.newText)&&s.is(T.range)}l.is=a})(x=e.TextEdit||(e.TextEdit={}));var D;(function(l){function m(o,a,y){var T={label:o};return a!==void 0&&(T.needsConfirmation=a),y!==void 0&&(T.description=y),T}l.create=m;function w(o){var a=o;return a!==void 0&&g.objectLiteral(a)&&g.string(a.label)&&(g.boolean(a.needsConfirmation)||a.needsConfirmation===void 0)&&(g.string(a.description)||a.description===void 0)}l.is=w})(D=e.ChangeAnnotation||(e.ChangeAnnotation={}));var z;(function(l){function m(w){var o=w;return typeof o=="string"}l.is=m})(z=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var oe;(function(l){function m(y,T,N){return{range:y,newText:T,annotationId:N}}l.replace=m;function w(y,T,N){return{range:{start:y,end:y},newText:T,annotationId:N}}l.insert=w;function o(y,T){return{range:y,newText:"",annotationId:T}}l.del=o;function a(y){var T=y;return x.is(T)&&(D.is(T.annotationId)||z.is(T.annotationId))}l.is=a})(oe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var G;(function(l){function m(o,a){return{textDocument:o,edits:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&me.is(a.textDocument)&&Array.isArray(a.edits)}l.is=w})(G=e.TextDocumentEdit||(e.TextDocumentEdit={}));var re;(function(l){function m(o,a,y){var T={kind:"create",uri:o};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(T.options=a),y!==void 0&&(T.annotationId=y),T}l.create=m;function w(o){var a=o;return a&&a.kind==="create"&&g.string(a.uri)&&(a.options===void 0||(a.options.overwrite===void 0||g.boolean(a.options.overwrite))&&(a.options.ignoreIfExists===void 0||g.boolean(a.options.ignoreIfExists)))&&(a.annotationId===void 0||z.is(a.annotationId))}l.is=w})(re=e.CreateFile||(e.CreateFile={}));var se;(function(l){function m(o,a,y,T){var N={kind:"rename",oldUri:o,newUri:a};return y!==void 0&&(y.overwrite!==void 0||y.ignoreIfExists!==void 0)&&(N.options=y),T!==void 0&&(N.annotationId=T),N}l.create=m;function w(o){var a=o;return a&&a.kind==="rename"&&g.string(a.oldUri)&&g.string(a.newUri)&&(a.options===void 0||(a.options.overwrite===void 0||g.boolean(a.options.overwrite))&&(a.options.ignoreIfExists===void 0||g.boolean(a.options.ignoreIfExists)))&&(a.annotationId===void 0||z.is(a.annotationId))}l.is=w})(se=e.RenameFile||(e.RenameFile={}));var ae;(function(l){function m(o,a,y){var T={kind:"delete",uri:o};return a!==void 0&&(a.recursive!==void 0||a.ignoreIfNotExists!==void 0)&&(T.options=a),y!==void 0&&(T.annotationId=y),T}l.create=m;function w(o){var a=o;return a&&a.kind==="delete"&&g.string(a.uri)&&(a.options===void 0||(a.options.recursive===void 0||g.boolean(a.options.recursive))&&(a.options.ignoreIfNotExists===void 0||g.boolean(a.options.ignoreIfNotExists)))&&(a.annotationId===void 0||z.is(a.annotationId))}l.is=w})(ae=e.DeleteFile||(e.DeleteFile={}));var Se;(function(l){function m(w){var o=w;return o&&(o.changes!==void 0||o.documentChanges!==void 0)&&(o.documentChanges===void 0||o.documentChanges.every(function(a){return g.string(a.kind)?re.is(a)||se.is(a)||ae.is(a):G.is(a)}))}l.is=m})(Se=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Ne=function(){function l(m,w){this.edits=m,this.changeAnnotations=w}return l.prototype.insert=function(m,w,o){var a,y;if(o===void 0?a=x.insert(m,w):z.is(o)?(y=o,a=oe.insert(m,w,o)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(o),a=oe.insert(m,w,y)),this.edits.push(a),y!==void 0)return y},l.prototype.replace=function(m,w,o){var a,y;if(o===void 0?a=x.replace(m,w):z.is(o)?(y=o,a=oe.replace(m,w,o)):(this.assertChangeAnnotations(this.changeAnnotations),y=this.changeAnnotations.manage(o),a=oe.replace(m,w,y)),this.edits.push(a),y!==void 0)return y},l.prototype.delete=function(m,w){var o,a;if(w===void 0?o=x.del(m):z.is(w)?(a=w,o=oe.del(m,w)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(w),o=oe.del(m,a)),this.edits.push(o),a!==void 0)return a},l.prototype.add=function(m){this.edits.push(m)},l.prototype.all=function(){return this.edits},l.prototype.clear=function(){this.edits.splice(0,this.edits.length)},l.prototype.assertChangeAnnotations=function(m){if(m===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},l}(),Ue=function(){function l(m){this._annotations=m===void 0?Object.create(null):m,this._counter=0,this._size=0}return l.prototype.all=function(){return this._annotations},Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),l.prototype.manage=function(m,w){var o;if(z.is(m)?o=m:(o=this.nextId(),w=m),this._annotations[o]!==void 0)throw new Error("Id "+o+" is already in use.");if(w===void 0)throw new Error("No annotation provided for id "+o);return this._annotations[o]=w,this._size++,o},l.prototype.nextId=function(){return this._counter++,this._counter.toString()},l}(),Ye=function(){function l(m){var w=this;this._textEditChanges=Object.create(null),m!==void 0?(this._workspaceEdit=m,m.documentChanges?(this._changeAnnotations=new Ue(m.changeAnnotations),m.changeAnnotations=this._changeAnnotations.all(),m.documentChanges.forEach(function(o){if(G.is(o)){var a=new Ne(o.edits,w._changeAnnotations);w._textEditChanges[o.textDocument.uri]=a}})):m.changes&&Object.keys(m.changes).forEach(function(o){var a=new Ne(m.changes[o]);w._textEditChanges[o]=a})):this._workspaceEdit={}}return Object.defineProperty(l.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),l.prototype.getTextEditChange=function(m){if(me.is(m)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var w={uri:m.uri,version:m.version},o=this._textEditChanges[w.uri];if(!o){var a=[],y={textDocument:w,edits:a};this._workspaceEdit.documentChanges.push(y),o=new Ne(a,this._changeAnnotations),this._textEditChanges[w.uri]=o}return o}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var o=this._textEditChanges[m];if(!o){var a=[];this._workspaceEdit.changes[m]=a,o=new Ne(a),this._textEditChanges[m]=o}return o}},l.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ue,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},l.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},l.prototype.createFile=function(m,w,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;D.is(w)||z.is(w)?a=w:o=w;var y,T;if(a===void 0?y=re.create(m,o):(T=z.is(a)?a:this._changeAnnotations.manage(a),y=re.create(m,o,T)),this._workspaceEdit.documentChanges.push(y),T!==void 0)return T},l.prototype.renameFile=function(m,w,o,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var y;D.is(o)||z.is(o)?y=o:a=o;var T,N;if(y===void 0?T=se.create(m,w,a):(N=z.is(y)?y:this._changeAnnotations.manage(y),T=se.create(m,w,a,N)),this._workspaceEdit.documentChanges.push(T),N!==void 0)return N},l.prototype.deleteFile=function(m,w,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var a;D.is(w)||z.is(w)?a=w:o=w;var y,T;if(a===void 0?y=ae.create(m,o):(T=z.is(a)?a:this._changeAnnotations.manage(a),y=ae.create(m,o,T)),this._workspaceEdit.documentChanges.push(y),T!==void 0)return T},l}();e.WorkspaceChange=Ye;var Be;(function(l){function m(o){return{uri:o}}l.create=m;function w(o){var a=o;return g.defined(a)&&g.string(a.uri)}l.is=w})(Be=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var yt;(function(l){function m(o,a){return{uri:o,version:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&g.string(a.uri)&&g.integer(a.version)}l.is=w})(yt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var me;(function(l){function m(o,a){return{uri:o,version:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&g.string(a.uri)&&(a.version===null||g.integer(a.version))}l.is=w})(me=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Ct;(function(l){function m(o,a,y,T){return{uri:o,languageId:a,version:y,text:T}}l.create=m;function w(o){var a=o;return g.defined(a)&&g.string(a.uri)&&g.string(a.languageId)&&g.integer(a.version)&&g.string(a.text)}l.is=w})(Ct=e.TextDocumentItem||(e.TextDocumentItem={}));var Fe;(function(l){l.PlainText="plaintext",l.Markdown="markdown"})(Fe=e.MarkupKind||(e.MarkupKind={})),function(l){function m(w){var o=w;return o===l.PlainText||o===l.Markdown}l.is=m}(Fe=e.MarkupKind||(e.MarkupKind={}));var rt;(function(l){function m(w){var o=w;return g.objectLiteral(w)&&Fe.is(o.kind)&&g.string(o.value)}l.is=m})(rt=e.MarkupContent||(e.MarkupContent={}));var st;(function(l){l.Text=1,l.Method=2,l.Function=3,l.Constructor=4,l.Field=5,l.Variable=6,l.Class=7,l.Interface=8,l.Module=9,l.Property=10,l.Unit=11,l.Value=12,l.Enum=13,l.Keyword=14,l.Snippet=15,l.Color=16,l.File=17,l.Reference=18,l.Folder=19,l.EnumMember=20,l.Constant=21,l.Struct=22,l.Event=23,l.Operator=24,l.TypeParameter=25})(st=e.CompletionItemKind||(e.CompletionItemKind={}));var Rt;(function(l){l.PlainText=1,l.Snippet=2})(Rt=e.InsertTextFormat||(e.InsertTextFormat={}));var Vt;(function(l){l.Deprecated=1})(Vt=e.CompletionItemTag||(e.CompletionItemTag={}));var Jt;(function(l){function m(o,a,y){return{newText:o,insert:a,replace:y}}l.create=m;function w(o){var a=o;return a&&g.string(a.newText)&&s.is(a.insert)&&s.is(a.replace)}l.is=w})(Jt=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Nt;(function(l){l.asIs=1,l.adjustIndentation=2})(Nt=e.InsertTextMode||(e.InsertTextMode={}));var It;(function(l){function m(w){return{label:w}}l.create=m})(It=e.CompletionItem||(e.CompletionItem={}));var Et;(function(l){function m(w,o){return{items:w||[],isIncomplete:!!o}}l.create=m})(Et=e.CompletionList||(e.CompletionList={}));var qt;(function(l){function m(o){return o.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}l.fromPlainText=m;function w(o){var a=o;return g.string(a)||g.objectLiteral(a)&&g.string(a.language)&&g.string(a.value)}l.is=w})(qt=e.MarkedString||(e.MarkedString={}));var Lt;(function(l){function m(w){var o=w;return!!o&&g.objectLiteral(o)&&(rt.is(o.contents)||qt.is(o.contents)||g.typedArray(o.contents,qt.is))&&(w.range===void 0||s.is(w.range))}l.is=m})(Lt=e.Hover||(e.Hover={}));var Qt;(function(l){function m(w,o){return o?{label:w,documentation:o}:{label:w}}l.create=m})(Qt=e.ParameterInformation||(e.ParameterInformation={}));var fn;(function(l){function m(w,o){for(var a=[],y=2;y<arguments.length;y++)a[y-2]=arguments[y];var T={label:w};return g.defined(o)&&(T.documentation=o),g.defined(a)?T.parameters=a:T.parameters=[],T}l.create=m})(fn=e.SignatureInformation||(e.SignatureInformation={}));var at;(function(l){l.Text=1,l.Read=2,l.Write=3})(at=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Yt;(function(l){function m(w,o){var a={range:w};return g.number(o)&&(a.kind=o),a}l.create=m})(Yt=e.DocumentHighlight||(e.DocumentHighlight={}));var ct;(function(l){l.File=1,l.Module=2,l.Namespace=3,l.Package=4,l.Class=5,l.Method=6,l.Property=7,l.Field=8,l.Constructor=9,l.Enum=10,l.Interface=11,l.Function=12,l.Variable=13,l.Constant=14,l.String=15,l.Number=16,l.Boolean=17,l.Array=18,l.Object=19,l.Key=20,l.Null=21,l.EnumMember=22,l.Struct=23,l.Event=24,l.Operator=25,l.TypeParameter=26})(ct=e.SymbolKind||(e.SymbolKind={}));var hn;(function(l){l.Deprecated=1})(hn=e.SymbolTag||(e.SymbolTag={}));var be;(function(l){function m(w,o,a,y,T){var N={name:w,kind:o,location:{uri:y,range:a}};return T&&(N.containerName=T),N}l.create=m})(be=e.SymbolInformation||(e.SymbolInformation={}));var Ze;(function(l){function m(o,a,y,T,N,K){var J={name:o,detail:a,kind:y,range:T,selectionRange:N};return K!==void 0&&(J.children=K),J}l.create=m;function w(o){var a=o;return a&&g.string(a.name)&&g.number(a.kind)&&s.is(a.range)&&s.is(a.selectionRange)&&(a.detail===void 0||g.string(a.detail))&&(a.deprecated===void 0||g.boolean(a.deprecated))&&(a.children===void 0||Array.isArray(a.children))&&(a.tags===void 0||Array.isArray(a.tags))}l.is=w})(Ze=e.DocumentSymbol||(e.DocumentSymbol={}));var Zt;(function(l){l.Empty="",l.QuickFix="quickfix",l.Refactor="refactor",l.RefactorExtract="refactor.extract",l.RefactorInline="refactor.inline",l.RefactorRewrite="refactor.rewrite",l.Source="source",l.SourceOrganizeImports="source.organizeImports",l.SourceFixAll="source.fixAll"})(Zt=e.CodeActionKind||(e.CodeActionKind={}));var pn;(function(l){function m(o,a){var y={diagnostics:o};return a!=null&&(y.only=a),y}l.create=m;function w(o){var a=o;return g.defined(a)&&g.typedArray(a.diagnostics,k.is)&&(a.only===void 0||g.typedArray(a.only,g.string))}l.is=w})(pn=e.CodeActionContext||(e.CodeActionContext={}));var ut;(function(l){function m(o,a,y){var T={title:o},N=!0;return typeof a=="string"?(N=!1,T.kind=a):O.is(a)?T.command=a:T.edit=a,N&&y!==void 0&&(T.kind=y),T}l.create=m;function w(o){var a=o;return a&&g.string(a.title)&&(a.diagnostics===void 0||g.typedArray(a.diagnostics,k.is))&&(a.kind===void 0||g.string(a.kind))&&(a.edit!==void 0||a.command!==void 0)&&(a.command===void 0||O.is(a.command))&&(a.isPreferred===void 0||g.boolean(a.isPreferred))&&(a.edit===void 0||Se.is(a.edit))}l.is=w})(ut=e.CodeAction||(e.CodeAction={}));var en;(function(l){function m(o,a){var y={range:o};return g.defined(a)&&(y.data=a),y}l.create=m;function w(o){var a=o;return g.defined(a)&&s.is(a.range)&&(g.undefined(a.command)||O.is(a.command))}l.is=w})(en=e.CodeLens||(e.CodeLens={}));var At;(function(l){function m(o,a){return{tabSize:o,insertSpaces:a}}l.create=m;function w(o){var a=o;return g.defined(a)&&g.uinteger(a.tabSize)&&g.boolean(a.insertSpaces)}l.is=w})(At=e.FormattingOptions||(e.FormattingOptions={}));var lt;(function(l){function m(o,a,y){return{range:o,target:a,data:y}}l.create=m;function w(o){var a=o;return g.defined(a)&&s.is(a.range)&&(g.undefined(a.target)||g.string(a.target))}l.is=w})(lt=e.DocumentLink||(e.DocumentLink={}));var Mt;(function(l){function m(o,a){return{range:o,parent:a}}l.create=m;function w(o){var a=o;return a!==void 0&&s.is(a.range)&&(a.parent===void 0||l.is(a.parent))}l.is=w})(Mt=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var dt;(function(l){function m(y,T,N,K){return new _(y,T,N,K)}l.create=m;function w(y){var T=y;return!!(g.defined(T)&&g.string(T.uri)&&(g.undefined(T.languageId)||g.string(T.languageId))&&g.uinteger(T.lineCount)&&g.func(T.getText)&&g.func(T.positionAt)&&g.func(T.offsetAt))}l.is=w;function o(y,T){for(var N=y.getText(),K=a(T,function(tn,gn){var Ar=tn.range.start.line-gn.range.start.line;return Ar===0?tn.range.start.character-gn.range.start.character:Ar}),J=N.length,de=K.length-1;de>=0;de--){var Pe=K[de],De=y.offsetAt(Pe.range.start),ne=y.offsetAt(Pe.range.end);if(ne<=J)N=N.substring(0,De)+Pe.newText+N.substring(ne,N.length);else throw new Error("Overlapping edit");J=De}return N}l.applyEdits=o;function a(y,T){if(y.length<=1)return y;var N=y.length/2|0,K=y.slice(0,N),J=y.slice(N);a(K,T),a(J,T);for(var de=0,Pe=0,De=0;de<K.length&&Pe<J.length;){var ne=T(K[de],J[Pe]);ne<=0?y[De++]=K[de++]:y[De++]=J[Pe++]}for(;de<K.length;)y[De++]=K[de++];for(;Pe<J.length;)y[De++]=J[Pe++];return y}})(dt=e.TextDocument||(e.TextDocument={}));var _=function(){function l(m,w,o,a){this._uri=m,this._languageId=w,this._version=o,this._content=a,this._lineOffsets=void 0}return Object.defineProperty(l.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),l.prototype.getText=function(m){if(m){var w=this.offsetAt(m.start),o=this.offsetAt(m.end);return this._content.substring(w,o)}return this._content},l.prototype.update=function(m,w){this._content=m.text,this._version=w,this._lineOffsets=void 0},l.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var m=[],w=this._content,o=!0,a=0;a<w.length;a++){o&&(m.push(a),o=!1);var y=w.charAt(a);o=y==="\r"||y===`
`,y==="\r"&&a+1<w.length&&w.charAt(a+1)===`
`&&a++}o&&w.length>0&&m.push(w.length),this._lineOffsets=m}return this._lineOffsets},l.prototype.positionAt=function(m){m=Math.max(Math.min(m,this._content.length),0);var w=this.getLineOffsets(),o=0,a=w.length;if(a===0)return i.create(0,m);for(;o<a;){var y=Math.floor((o+a)/2);w[y]>m?a=y:o=y+1}var T=o-1;return i.create(T,m-w[T])},l.prototype.offsetAt=function(m){var w=this.getLineOffsets();if(m.line>=w.length)return this._content.length;if(m.line<0)return 0;var o=w[m.line],a=m.line+1<w.length?w[m.line+1]:this._content.length;return Math.max(Math.min(o+m.character,a),o)},Object.defineProperty(l.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),l}(),g;(function(l){var m=Object.prototype.toString;function w(ne){return typeof ne!="undefined"}l.defined=w;function o(ne){return typeof ne=="undefined"}l.undefined=o;function a(ne){return ne===!0||ne===!1}l.boolean=a;function y(ne){return m.call(ne)==="[object String]"}l.string=y;function T(ne){return m.call(ne)==="[object Number]"}l.number=T;function N(ne,tn,gn){return m.call(ne)==="[object Number]"&&tn<=ne&&ne<=gn}l.numberRange=N;function K(ne){return m.call(ne)==="[object Number]"&&-2147483648<=ne&&ne<=2147483647}l.integer=K;function J(ne){return m.call(ne)==="[object Number]"&&0<=ne&&ne<=2147483647}l.uinteger=J;function de(ne){return m.call(ne)==="[object Function]"}l.func=de;function Pe(ne){return ne!==null&&typeof ne=="object"}l.objectLiteral=Pe;function De(ne,tn){return Array.isArray(ne)&&ne.every(tn)}l.typedArray=De})(g||(g={}))})});var Ae=E(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.ProtocolNotificationType=gt.ProtocolNotificationType0=gt.ProtocolRequestType=gt.ProtocolRequestType0=gt.RegistrationType=void 0;var Bn=Un(),ju=class{constructor(e){this.method=e}};gt.RegistrationType=ju;var $u=class extends Bn.RequestType0{constructor(e){super(e)}};gt.ProtocolRequestType0=$u;var Wu=class extends Bn.RequestType{constructor(e){super(e,Bn.ParameterStructures.byName)}};gt.ProtocolRequestType=Wu;var Hu=class extends Bn.NotificationType0{constructor(e){super(e)}};gt.ProtocolNotificationType0=Hu;var Ku=class extends Bn.NotificationType{constructor(e){super(e,Bn.ParameterStructures.byName)}};gt.ProtocolNotificationType=Ku});var Bu=E(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.objectLiteral=Oe.typedArray=Oe.stringArray=Oe.array=Oe.func=Oe.error=Oe.number=Oe.string=Oe.boolean=void 0;function rm(t){return t===!0||t===!1}Oe.boolean=rm;function zu(t){return typeof t=="string"||t instanceof String}Oe.string=zu;function im(t){return typeof t=="number"||t instanceof Number}Oe.number=im;function om(t){return t instanceof Error}Oe.error=om;function sm(t){return typeof t=="function"}Oe.func=sm;function Uu(t){return Array.isArray(t)}Oe.array=Uu;function am(t){return Uu(t)&&t.every(e=>zu(e))}Oe.stringArray=am;function cm(t,e){return Array.isArray(t)&&t.every(e)}Oe.typedArray=cm;function um(t){return t!==null&&typeof t=="object"}Oe.objectLiteral=um});var Gu=E(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.ImplementationRequest=void 0;var lm=Ae(),dm;(function(t){t.method="textDocument/implementation",t.type=new lm.ProtocolRequestType(t.method)})(dm=_r.ImplementationRequest||(_r.ImplementationRequest={}))});var Xu=E(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.TypeDefinitionRequest=void 0;var fm=Ae(),hm;(function(t){t.method="textDocument/typeDefinition",t.type=new fm.ProtocolRequestType(t.method)})(hm=wr.TypeDefinitionRequest||(wr.TypeDefinitionRequest={}))});var Ju=E(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.DidChangeWorkspaceFoldersNotification=sn.WorkspaceFoldersRequest=void 0;var Vu=Ae(),pm;(function(t){t.type=new Vu.ProtocolRequestType0("workspace/workspaceFolders")})(pm=sn.WorkspaceFoldersRequest||(sn.WorkspaceFoldersRequest={}));var gm;(function(t){t.type=new Vu.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(gm=sn.DidChangeWorkspaceFoldersNotification||(sn.DidChangeWorkspaceFoldersNotification={}))});var Qu=E(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.ConfigurationRequest=void 0;var mm=Ae(),vm;(function(t){t.type=new mm.ProtocolRequestType("workspace/configuration")})(vm=Sr.ConfigurationRequest||(Sr.ConfigurationRequest={}))});var Zu=E(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.ColorPresentationRequest=an.DocumentColorRequest=void 0;var Yu=Ae(),ym;(function(t){t.method="textDocument/documentColor",t.type=new Yu.ProtocolRequestType(t.method)})(ym=an.DocumentColorRequest||(an.DocumentColorRequest={}));var Cm;(function(t){t.type=new Yu.ProtocolRequestType("textDocument/colorPresentation")})(Cm=an.ColorPresentationRequest||(an.ColorPresentationRequest={}))});var el=E(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.FoldingRangeRequest=cn.FoldingRangeKind=void 0;var Rm=Ae(),_m;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(_m=cn.FoldingRangeKind||(cn.FoldingRangeKind={}));var wm;(function(t){t.method="textDocument/foldingRange",t.type=new Rm.ProtocolRequestType(t.method)})(wm=cn.FoldingRangeRequest||(cn.FoldingRangeRequest={}))});var tl=E(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.DeclarationRequest=void 0;var Sm=Ae(),Tm;(function(t){t.method="textDocument/declaration",t.type=new Sm.ProtocolRequestType(t.method)})(Tm=Tr.DeclarationRequest||(Tr.DeclarationRequest={}))});var nl=E(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.SelectionRangeRequest=void 0;var bm=Ae(),Pm;(function(t){t.method="textDocument/selectionRange",t.type=new bm.ProtocolRequestType(t.method)})(Pm=br.SelectionRangeRequest||(br.SelectionRangeRequest={}))});var il=E(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.WorkDoneProgressCancelNotification=Tt.WorkDoneProgressCreateRequest=Tt.WorkDoneProgress=void 0;var Dm=Un(),rl=Ae(),Em;(function(t){t.type=new Dm.ProgressType;function e(n){return n===t.type}t.is=e})(Em=Tt.WorkDoneProgress||(Tt.WorkDoneProgress={}));var qm;(function(t){t.type=new rl.ProtocolRequestType("window/workDoneProgress/create")})(qm=Tt.WorkDoneProgressCreateRequest||(Tt.WorkDoneProgressCreateRequest={}));var Om;(function(t){t.type=new rl.ProtocolNotificationType("window/workDoneProgress/cancel")})(Om=Tt.WorkDoneProgressCancelNotification||(Tt.WorkDoneProgressCancelNotification={}))});var ol=E(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.CallHierarchyOutgoingCallsRequest=bt.CallHierarchyIncomingCallsRequest=bt.CallHierarchyPrepareRequest=void 0;var Eo=Ae(),xm;(function(t){t.method="textDocument/prepareCallHierarchy",t.type=new Eo.ProtocolRequestType(t.method)})(xm=bt.CallHierarchyPrepareRequest||(bt.CallHierarchyPrepareRequest={}));var km;(function(t){t.method="callHierarchy/incomingCalls",t.type=new Eo.ProtocolRequestType(t.method)})(km=bt.CallHierarchyIncomingCallsRequest||(bt.CallHierarchyIncomingCallsRequest={}));var Fm;(function(t){t.method="callHierarchy/outgoingCalls",t.type=new Eo.ProtocolRequestType(t.method)})(Fm=bt.CallHierarchyOutgoingCallsRequest||(bt.CallHierarchyOutgoingCallsRequest={}))});var sl=E(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.SemanticTokensRefreshRequest=fe.SemanticTokensRangeRequest=fe.SemanticTokensDeltaRequest=fe.SemanticTokensRequest=fe.SemanticTokensRegistrationType=fe.TokenFormat=fe.SemanticTokens=fe.SemanticTokenModifiers=fe.SemanticTokenTypes=void 0;var Pr=Ae(),Nm;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator"})(Nm=fe.SemanticTokenTypes||(fe.SemanticTokenTypes={}));var Im;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(Im=fe.SemanticTokenModifiers||(fe.SemanticTokenModifiers={}));var Lm;(function(t){function e(n){let r=n;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}t.is=e})(Lm=fe.SemanticTokens||(fe.SemanticTokens={}));var Am;(function(t){t.Relative="relative"})(Am=fe.TokenFormat||(fe.TokenFormat={}));var Mm;(function(t){t.method="textDocument/semanticTokens",t.type=new Pr.RegistrationType(t.method)})(Mm=fe.SemanticTokensRegistrationType||(fe.SemanticTokensRegistrationType={}));var jm;(function(t){t.method="textDocument/semanticTokens/full",t.type=new Pr.ProtocolRequestType(t.method)})(jm=fe.SemanticTokensRequest||(fe.SemanticTokensRequest={}));var $m;(function(t){t.method="textDocument/semanticTokens/full/delta",t.type=new Pr.ProtocolRequestType(t.method)})($m=fe.SemanticTokensDeltaRequest||(fe.SemanticTokensDeltaRequest={}));var Wm;(function(t){t.method="textDocument/semanticTokens/range",t.type=new Pr.ProtocolRequestType(t.method)})(Wm=fe.SemanticTokensRangeRequest||(fe.SemanticTokensRangeRequest={}));var Hm;(function(t){t.method="workspace/semanticTokens/refresh",t.type=new Pr.ProtocolRequestType0(t.method)})(Hm=fe.SemanticTokensRefreshRequest||(fe.SemanticTokensRefreshRequest={}))});var al=E(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ShowDocumentRequest=void 0;var Km=Ae(),zm;(function(t){t.method="window/showDocument",t.type=new Km.ProtocolRequestType(t.method)})(zm=Dr.ShowDocumentRequest||(Dr.ShowDocumentRequest={}))});var cl=E(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.LinkedEditingRangeRequest=void 0;var Um=Ae(),Bm;(function(t){t.method="textDocument/linkedEditingRange",t.type=new Um.ProtocolRequestType(t.method)})(Bm=Er.LinkedEditingRangeRequest||(Er.LinkedEditingRangeRequest={}))});var ul=E(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.WillDeleteFilesRequest=_e.DidDeleteFilesNotification=_e.DidRenameFilesNotification=_e.WillRenameFilesRequest=_e.DidCreateFilesNotification=_e.WillCreateFilesRequest=_e.FileOperationPatternKind=void 0;var Gn=Ae(),Gm;(function(t){t.file="file",t.folder="folder"})(Gm=_e.FileOperationPatternKind||(_e.FileOperationPatternKind={}));var Xm;(function(t){t.method="workspace/willCreateFiles",t.type=new Gn.ProtocolRequestType(t.method)})(Xm=_e.WillCreateFilesRequest||(_e.WillCreateFilesRequest={}));var Vm;(function(t){t.method="workspace/didCreateFiles",t.type=new Gn.ProtocolNotificationType(t.method)})(Vm=_e.DidCreateFilesNotification||(_e.DidCreateFilesNotification={}));var Jm;(function(t){t.method="workspace/willRenameFiles",t.type=new Gn.ProtocolRequestType(t.method)})(Jm=_e.WillRenameFilesRequest||(_e.WillRenameFilesRequest={}));var Qm;(function(t){t.method="workspace/didRenameFiles",t.type=new Gn.ProtocolNotificationType(t.method)})(Qm=_e.DidRenameFilesNotification||(_e.DidRenameFilesNotification={}));var Ym;(function(t){t.method="workspace/didDeleteFiles",t.type=new Gn.ProtocolNotificationType(t.method)})(Ym=_e.DidDeleteFilesNotification||(_e.DidDeleteFilesNotification={}));var Zm;(function(t){t.method="workspace/willDeleteFiles",t.type=new Gn.ProtocolRequestType(t.method)})(Zm=_e.WillDeleteFilesRequest||(_e.WillDeleteFilesRequest={}))});var ll=E(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.MonikerRequest=Pt.MonikerKind=Pt.UniquenessLevel=void 0;var ev=Ae(),tv;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(tv=Pt.UniquenessLevel||(Pt.UniquenessLevel={}));var nv;(function(t){t.import="import",t.export="export",t.local="local"})(nv=Pt.MonikerKind||(Pt.MonikerKind={}));var rv;(function(t){t.method="textDocument/moniker",t.type=new ev.ProtocolRequestType(t.method)})(rv=Pt.MonikerRequest||(Pt.MonikerRequest={}))});var gl=E(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.DocumentLinkRequest=h.CodeLensRefreshRequest=h.CodeLensResolveRequest=h.CodeLensRequest=h.WorkspaceSymbolRequest=h.CodeActionResolveRequest=h.CodeActionRequest=h.DocumentSymbolRequest=h.DocumentHighlightRequest=h.ReferencesRequest=h.DefinitionRequest=h.SignatureHelpRequest=h.SignatureHelpTriggerKind=h.HoverRequest=h.CompletionResolveRequest=h.CompletionRequest=h.CompletionTriggerKind=h.PublishDiagnosticsNotification=h.WatchKind=h.FileChangeType=h.DidChangeWatchedFilesNotification=h.WillSaveTextDocumentWaitUntilRequest=h.WillSaveTextDocumentNotification=h.TextDocumentSaveReason=h.DidSaveTextDocumentNotification=h.DidCloseTextDocumentNotification=h.DidChangeTextDocumentNotification=h.TextDocumentContentChangeEvent=h.DidOpenTextDocumentNotification=h.TextDocumentSyncKind=h.TelemetryEventNotification=h.LogMessageNotification=h.ShowMessageRequest=h.ShowMessageNotification=h.MessageType=h.DidChangeConfigurationNotification=h.ExitNotification=h.ShutdownRequest=h.InitializedNotification=h.InitializeError=h.InitializeRequest=h.WorkDoneProgressOptions=h.TextDocumentRegistrationOptions=h.StaticRegistrationOptions=h.FailureHandlingKind=h.ResourceOperationKind=h.UnregistrationRequest=h.RegistrationRequest=h.DocumentSelector=h.DocumentFilter=void 0;h.MonikerRequest=h.MonikerKind=h.UniquenessLevel=h.WillDeleteFilesRequest=h.DidDeleteFilesNotification=h.WillRenameFilesRequest=h.DidRenameFilesNotification=h.WillCreateFilesRequest=h.DidCreateFilesNotification=h.FileOperationPatternKind=h.LinkedEditingRangeRequest=h.ShowDocumentRequest=h.SemanticTokensRegistrationType=h.SemanticTokensRefreshRequest=h.SemanticTokensRangeRequest=h.SemanticTokensDeltaRequest=h.SemanticTokensRequest=h.TokenFormat=h.SemanticTokens=h.SemanticTokenModifiers=h.SemanticTokenTypes=h.CallHierarchyPrepareRequest=h.CallHierarchyOutgoingCallsRequest=h.CallHierarchyIncomingCallsRequest=h.WorkDoneProgressCancelNotification=h.WorkDoneProgressCreateRequest=h.WorkDoneProgress=h.SelectionRangeRequest=h.DeclarationRequest=h.FoldingRangeRequest=h.ColorPresentationRequest=h.DocumentColorRequest=h.ConfigurationRequest=h.DidChangeWorkspaceFoldersNotification=h.WorkspaceFoldersRequest=h.TypeDefinitionRequest=h.ImplementationRequest=h.ApplyWorkspaceEditRequest=h.ExecuteCommandRequest=h.PrepareRenameRequest=h.RenameRequest=h.PrepareSupportDefaultBehavior=h.DocumentOnTypeFormattingRequest=h.DocumentRangeFormattingRequest=h.DocumentFormattingRequest=h.DocumentLinkResolveRequest=void 0;var un=Bu(),Q=Ae(),iv=Gu();Object.defineProperty(h,"ImplementationRequest",{enumerable:!0,get:function(){return iv.ImplementationRequest}});var ov=Xu();Object.defineProperty(h,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ov.TypeDefinitionRequest}});var dl=Ju();Object.defineProperty(h,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return dl.WorkspaceFoldersRequest}});Object.defineProperty(h,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return dl.DidChangeWorkspaceFoldersNotification}});var sv=Qu();Object.defineProperty(h,"ConfigurationRequest",{enumerable:!0,get:function(){return sv.ConfigurationRequest}});var fl=Zu();Object.defineProperty(h,"DocumentColorRequest",{enumerable:!0,get:function(){return fl.DocumentColorRequest}});Object.defineProperty(h,"ColorPresentationRequest",{enumerable:!0,get:function(){return fl.ColorPresentationRequest}});var av=el();Object.defineProperty(h,"FoldingRangeRequest",{enumerable:!0,get:function(){return av.FoldingRangeRequest}});var cv=tl();Object.defineProperty(h,"DeclarationRequest",{enumerable:!0,get:function(){return cv.DeclarationRequest}});var uv=nl();Object.defineProperty(h,"SelectionRangeRequest",{enumerable:!0,get:function(){return uv.SelectionRangeRequest}});var qo=il();Object.defineProperty(h,"WorkDoneProgress",{enumerable:!0,get:function(){return qo.WorkDoneProgress}});Object.defineProperty(h,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return qo.WorkDoneProgressCreateRequest}});Object.defineProperty(h,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return qo.WorkDoneProgressCancelNotification}});var Oo=ol();Object.defineProperty(h,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Oo.CallHierarchyIncomingCallsRequest}});Object.defineProperty(h,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Oo.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(h,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Oo.CallHierarchyPrepareRequest}});var Ut=sl();Object.defineProperty(h,"SemanticTokenTypes",{enumerable:!0,get:function(){return Ut.SemanticTokenTypes}});Object.defineProperty(h,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Ut.SemanticTokenModifiers}});Object.defineProperty(h,"SemanticTokens",{enumerable:!0,get:function(){return Ut.SemanticTokens}});Object.defineProperty(h,"TokenFormat",{enumerable:!0,get:function(){return Ut.TokenFormat}});Object.defineProperty(h,"SemanticTokensRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRequest}});Object.defineProperty(h,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensDeltaRequest}});Object.defineProperty(h,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRangeRequest}});Object.defineProperty(h,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Ut.SemanticTokensRefreshRequest}});Object.defineProperty(h,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Ut.SemanticTokensRegistrationType}});var lv=al();Object.defineProperty(h,"ShowDocumentRequest",{enumerable:!0,get:function(){return lv.ShowDocumentRequest}});var dv=cl();Object.defineProperty(h,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return dv.LinkedEditingRangeRequest}});var Dn=ul();Object.defineProperty(h,"FileOperationPatternKind",{enumerable:!0,get:function(){return Dn.FileOperationPatternKind}});Object.defineProperty(h,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Dn.DidCreateFilesNotification}});Object.defineProperty(h,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Dn.WillCreateFilesRequest}});Object.defineProperty(h,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Dn.DidRenameFilesNotification}});Object.defineProperty(h,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Dn.WillRenameFilesRequest}});Object.defineProperty(h,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Dn.DidDeleteFilesNotification}});Object.defineProperty(h,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Dn.WillDeleteFilesRequest}});var xo=ll();Object.defineProperty(h,"UniquenessLevel",{enumerable:!0,get:function(){return xo.UniquenessLevel}});Object.defineProperty(h,"MonikerKind",{enumerable:!0,get:function(){return xo.MonikerKind}});Object.defineProperty(h,"MonikerRequest",{enumerable:!0,get:function(){return xo.MonikerRequest}});var hl;(function(t){function e(n){let r=n;return un.string(r.language)||un.string(r.scheme)||un.string(r.pattern)}t.is=e})(hl=h.DocumentFilter||(h.DocumentFilter={}));var pl;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!un.string(r)&&!hl.is(r))return!1;return!0}t.is=e})(pl=h.DocumentSelector||(h.DocumentSelector={}));var fv;(function(t){t.type=new Q.ProtocolRequestType("client/registerCapability")})(fv=h.RegistrationRequest||(h.RegistrationRequest={}));var hv;(function(t){t.type=new Q.ProtocolRequestType("client/unregisterCapability")})(hv=h.UnregistrationRequest||(h.UnregistrationRequest={}));var pv;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(pv=h.ResourceOperationKind||(h.ResourceOperationKind={}));var gv;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(gv=h.FailureHandlingKind||(h.FailureHandlingKind={}));var mv;(function(t){function e(n){let r=n;return r&&un.string(r.id)&&r.id.length>0}t.hasId=e})(mv=h.StaticRegistrationOptions||(h.StaticRegistrationOptions={}));var vv;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||pl.is(r.documentSelector))}t.is=e})(vv=h.TextDocumentRegistrationOptions||(h.TextDocumentRegistrationOptions={}));var yv;(function(t){function e(r){let i=r;return un.objectLiteral(i)&&(i.workDoneProgress===void 0||un.boolean(i.workDoneProgress))}t.is=e;function n(r){let i=r;return i&&un.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=n})(yv=h.WorkDoneProgressOptions||(h.WorkDoneProgressOptions={}));var Cv;(function(t){t.type=new Q.ProtocolRequestType("initialize")})(Cv=h.InitializeRequest||(h.InitializeRequest={}));var Rv;(function(t){t.unknownProtocolVersion=1})(Rv=h.InitializeError||(h.InitializeError={}));var _v;(function(t){t.type=new Q.ProtocolNotificationType("initialized")})(_v=h.InitializedNotification||(h.InitializedNotification={}));var wv;(function(t){t.type=new Q.ProtocolRequestType0("shutdown")})(wv=h.ShutdownRequest||(h.ShutdownRequest={}));var Sv;(function(t){t.type=new Q.ProtocolNotificationType0("exit")})(Sv=h.ExitNotification||(h.ExitNotification={}));var Tv;(function(t){t.type=new Q.ProtocolNotificationType("workspace/didChangeConfiguration")})(Tv=h.DidChangeConfigurationNotification||(h.DidChangeConfigurationNotification={}));var bv;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4})(bv=h.MessageType||(h.MessageType={}));var Pv;(function(t){t.type=new Q.ProtocolNotificationType("window/showMessage")})(Pv=h.ShowMessageNotification||(h.ShowMessageNotification={}));var Dv;(function(t){t.type=new Q.ProtocolRequestType("window/showMessageRequest")})(Dv=h.ShowMessageRequest||(h.ShowMessageRequest={}));var Ev;(function(t){t.type=new Q.ProtocolNotificationType("window/logMessage")})(Ev=h.LogMessageNotification||(h.LogMessageNotification={}));var qv;(function(t){t.type=new Q.ProtocolNotificationType("telemetry/event")})(qv=h.TelemetryEventNotification||(h.TelemetryEventNotification={}));var Ov;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Ov=h.TextDocumentSyncKind||(h.TextDocumentSyncKind={}));var xv;(function(t){t.method="textDocument/didOpen",t.type=new Q.ProtocolNotificationType(t.method)})(xv=h.DidOpenTextDocumentNotification||(h.DidOpenTextDocumentNotification={}));var kv;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=n})(kv=h.TextDocumentContentChangeEvent||(h.TextDocumentContentChangeEvent={}));var Fv;(function(t){t.method="textDocument/didChange",t.type=new Q.ProtocolNotificationType(t.method)})(Fv=h.DidChangeTextDocumentNotification||(h.DidChangeTextDocumentNotification={}));var Nv;(function(t){t.method="textDocument/didClose",t.type=new Q.ProtocolNotificationType(t.method)})(Nv=h.DidCloseTextDocumentNotification||(h.DidCloseTextDocumentNotification={}));var Iv;(function(t){t.method="textDocument/didSave",t.type=new Q.ProtocolNotificationType(t.method)})(Iv=h.DidSaveTextDocumentNotification||(h.DidSaveTextDocumentNotification={}));var Lv;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(Lv=h.TextDocumentSaveReason||(h.TextDocumentSaveReason={}));var Av;(function(t){t.method="textDocument/willSave",t.type=new Q.ProtocolNotificationType(t.method)})(Av=h.WillSaveTextDocumentNotification||(h.WillSaveTextDocumentNotification={}));var Mv;(function(t){t.method="textDocument/willSaveWaitUntil",t.type=new Q.ProtocolRequestType(t.method)})(Mv=h.WillSaveTextDocumentWaitUntilRequest||(h.WillSaveTextDocumentWaitUntilRequest={}));var jv;(function(t){t.type=new Q.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(jv=h.DidChangeWatchedFilesNotification||(h.DidChangeWatchedFilesNotification={}));var $v;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})($v=h.FileChangeType||(h.FileChangeType={}));var Wv;(function(t){t.Create=1,t.Change=2,t.Delete=4})(Wv=h.WatchKind||(h.WatchKind={}));var Hv;(function(t){t.type=new Q.ProtocolNotificationType("textDocument/publishDiagnostics")})(Hv=h.PublishDiagnosticsNotification||(h.PublishDiagnosticsNotification={}));var Kv;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(Kv=h.CompletionTriggerKind||(h.CompletionTriggerKind={}));var zv;(function(t){t.method="textDocument/completion",t.type=new Q.ProtocolRequestType(t.method)})(zv=h.CompletionRequest||(h.CompletionRequest={}));var Uv;(function(t){t.method="completionItem/resolve",t.type=new Q.ProtocolRequestType(t.method)})(Uv=h.CompletionResolveRequest||(h.CompletionResolveRequest={}));var Bv;(function(t){t.method="textDocument/hover",t.type=new Q.ProtocolRequestType(t.method)})(Bv=h.HoverRequest||(h.HoverRequest={}));var Gv;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Gv=h.SignatureHelpTriggerKind||(h.SignatureHelpTriggerKind={}));var Xv;(function(t){t.method="textDocument/signatureHelp",t.type=new Q.ProtocolRequestType(t.method)})(Xv=h.SignatureHelpRequest||(h.SignatureHelpRequest={}));var Vv;(function(t){t.method="textDocument/definition",t.type=new Q.ProtocolRequestType(t.method)})(Vv=h.DefinitionRequest||(h.DefinitionRequest={}));var Jv;(function(t){t.method="textDocument/references",t.type=new Q.ProtocolRequestType(t.method)})(Jv=h.ReferencesRequest||(h.ReferencesRequest={}));var Qv;(function(t){t.method="textDocument/documentHighlight",t.type=new Q.ProtocolRequestType(t.method)})(Qv=h.DocumentHighlightRequest||(h.DocumentHighlightRequest={}));var Yv;(function(t){t.method="textDocument/documentSymbol",t.type=new Q.ProtocolRequestType(t.method)})(Yv=h.DocumentSymbolRequest||(h.DocumentSymbolRequest={}));var Zv;(function(t){t.method="textDocument/codeAction",t.type=new Q.ProtocolRequestType(t.method)})(Zv=h.CodeActionRequest||(h.CodeActionRequest={}));var ey;(function(t){t.method="codeAction/resolve",t.type=new Q.ProtocolRequestType(t.method)})(ey=h.CodeActionResolveRequest||(h.CodeActionResolveRequest={}));var ty;(function(t){t.method="workspace/symbol",t.type=new Q.ProtocolRequestType(t.method)})(ty=h.WorkspaceSymbolRequest||(h.WorkspaceSymbolRequest={}));var ny;(function(t){t.method="textDocument/codeLens",t.type=new Q.ProtocolRequestType(t.method)})(ny=h.CodeLensRequest||(h.CodeLensRequest={}));var ry;(function(t){t.method="codeLens/resolve",t.type=new Q.ProtocolRequestType(t.method)})(ry=h.CodeLensResolveRequest||(h.CodeLensResolveRequest={}));var iy;(function(t){t.method="workspace/codeLens/refresh",t.type=new Q.ProtocolRequestType0(t.method)})(iy=h.CodeLensRefreshRequest||(h.CodeLensRefreshRequest={}));var oy;(function(t){t.method="textDocument/documentLink",t.type=new Q.ProtocolRequestType(t.method)})(oy=h.DocumentLinkRequest||(h.DocumentLinkRequest={}));var sy;(function(t){t.method="documentLink/resolve",t.type=new Q.ProtocolRequestType(t.method)})(sy=h.DocumentLinkResolveRequest||(h.DocumentLinkResolveRequest={}));var ay;(function(t){t.method="textDocument/formatting",t.type=new Q.ProtocolRequestType(t.method)})(ay=h.DocumentFormattingRequest||(h.DocumentFormattingRequest={}));var cy;(function(t){t.method="textDocument/rangeFormatting",t.type=new Q.ProtocolRequestType(t.method)})(cy=h.DocumentRangeFormattingRequest||(h.DocumentRangeFormattingRequest={}));var uy;(function(t){t.method="textDocument/onTypeFormatting",t.type=new Q.ProtocolRequestType(t.method)})(uy=h.DocumentOnTypeFormattingRequest||(h.DocumentOnTypeFormattingRequest={}));var ly;(function(t){t.Identifier=1})(ly=h.PrepareSupportDefaultBehavior||(h.PrepareSupportDefaultBehavior={}));var dy;(function(t){t.method="textDocument/rename",t.type=new Q.ProtocolRequestType(t.method)})(dy=h.RenameRequest||(h.RenameRequest={}));var fy;(function(t){t.method="textDocument/prepareRename",t.type=new Q.ProtocolRequestType(t.method)})(fy=h.PrepareRenameRequest||(h.PrepareRenameRequest={}));var hy;(function(t){t.type=new Q.ProtocolRequestType("workspace/executeCommand")})(hy=h.ExecuteCommandRequest||(h.ExecuteCommandRequest={}));var py;(function(t){t.type=new Q.ProtocolRequestType("workspace/applyEdit")})(py=h.ApplyWorkspaceEditRequest||(h.ApplyWorkspaceEditRequest={}))});var vl=E(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.createProtocolConnection=void 0;var ml=Un();function gy(t,e,n,r){return ml.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),ml.createMessageConnection(t,e,n,r)}si.createProtocolConnection=gy});var yl=E(Je=>{"use strict";var my=Je&&Je.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ai=Je&&Je.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&my(e,t,n)};Object.defineProperty(Je,"__esModule",{value:!0});Je.LSPErrorCodes=Je.createProtocolConnection=void 0;ai(Un(),Je);ai(Mu(),Je);ai(Ae(),Je);ai(gl(),Je);var vy=vl();Object.defineProperty(Je,"createProtocolConnection",{enumerable:!0,get:function(){return vy.createProtocolConnection}});var yy;(function(t){t.lspReservedErrorRangeStart=-32899,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(yy=Je.LSPErrorCodes||(Je.LSPErrorCodes={}))});var we=E(xt=>{"use strict";var Cy=xt&&xt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Cl=xt&&xt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Cy(e,t,n)};Object.defineProperty(xt,"__esModule",{value:!0});xt.createProtocolConnection=void 0;var Ry=Do();Cl(Do(),xt);Cl(yl(),xt);function _y(t,e,n,r){return Ry.createMessageConnection(t,e,n,r)}xt.createProtocolConnection=_y});var Fo=E(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.toJSONObject=Vn.ConfigurationFeature=void 0;var ko=require("vscode"),wy=we(),Rl=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(wy.ConfigurationRequest.type,(n,r)=>{let i=c=>{let f=[];for(let d of c.items){let p=d.scopeUri!==void 0&&d.scopeUri!==null?this._client.protocol2CodeConverter.asUri(d.scopeUri):void 0;f.push(this.getConfiguration(p,d.section!==null?d.section:void 0))}return f},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(n,r,i):i(n,r)})}getConfiguration(e,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=Xn(ko.workspace.getConfiguration(void 0,e).get(n));else{let s=ko.workspace.getConfiguration(n.substr(0,i),e);s&&(r=Xn(s.get(n.substr(i+1))))}}else{let i=ko.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=Xn(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};Vn.ConfigurationFeature=Rl;function Xn(t){if(t){if(Array.isArray(t))return t.map(Xn);if(typeof t=="object"){let e=Object.create(null);for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Xn(t[n]));return e}}return t}Vn.toJSONObject=Xn});var Io=E(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var Sy=require("vscode"),_l=class extends Sy.CompletionItem{constructor(e){super(e)}};No.default=_l});var Ao=E(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Ty=require("vscode"),wl=class extends Ty.CodeLens{constructor(e){super(e)}};Lo.default=wl});var jo=E(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var by=require("vscode"),Sl=class extends by.DocumentLink{constructor(e,n){super(e,n)}};Mo.default=Sl});var Wo=E($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});var Py=require("vscode"),Tl=class extends Py.CodeAction{constructor(e,n){super(e);this.data=n}};$o.default=Tl});var Ko=E(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ProtocolDiagnostic=En.DiagnosticCode=void 0;var Dy=require("vscode"),Ho=on(),Ey;(function(t){function e(n){let r=n;return r!=null&&(Ho.number(r.value)||Ho.string(r.value))&&Ho.string(r.target)}t.is=e})(Ey=En.DiagnosticCode||(En.DiagnosticCode={}));var bl=class extends Dy.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}};En.ProtocolDiagnostic=bl});var Uo=E(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var qy=require("vscode"),Pl=class extends qy.CallHierarchyItem{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s,c);f!==void 0&&(this.data=f)}};zo.default=Pl});var El=E(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.createConverter=void 0;var Me=require("vscode"),le=we(),qr=on(),Oy=Io(),xy=Ao(),ky=jo(),Fy=Wo(),Dl=Ko(),Ny=Uo(),Iy=we(),Bo;(function(t){function e(n){let r=n;return r&&!!r.inserting&&!!r.replacing}t.is=e})(Bo||(Bo={}));function Ly(t){let n=t||(o=>o.toString());function r(o){return n(o)}function i(o){return{uri:n(o.uri)}}function s(o){return{uri:n(o.uri),version:o.version}}function c(o){return{textDocument:{uri:n(o.uri),languageId:o.languageId,version:o.version,text:o.getText()}}}function f(o){let a=o;return!!a.document&&!!a.contentChanges}function d(o){let a=o;return!!a.uri&&!!a.version}function p(o){if(d(o))return{textDocument:{uri:n(o.uri),version:o.version},contentChanges:[{text:o.getText()}]};if(f(o)){let a=o.document;return{textDocument:{uri:n(a.uri),version:a.version},contentChanges:o.contentChanges.map(T=>{let N=T.range;return{range:{start:{line:N.start.line,character:N.start.character},end:{line:N.end.line,character:N.end.character}},rangeLength:T.rangeLength,text:T.text}})}}else throw Error("Unsupported text document change parameter")}function C(o){return{textDocument:i(o)}}function R(o,a=!1){let y={textDocument:i(o)};return a&&(y.text=o.getText()),y}function S(o){switch(o){case Me.TextDocumentSaveReason.Manual:return le.TextDocumentSaveReason.Manual;case Me.TextDocumentSaveReason.AfterDelay:return le.TextDocumentSaveReason.AfterDelay;case Me.TextDocumentSaveReason.FocusOut:return le.TextDocumentSaveReason.FocusOut}return le.TextDocumentSaveReason.Manual}function b(o){return{textDocument:i(o.document),reason:S(o.reason)}}function F(o){return{files:o.files.map(a=>({uri:n(a)}))}}function I(o){return{files:o.files.map(a=>({oldUri:n(a.oldUri),newUri:n(a.newUri)}))}}function A(o){return{files:o.files.map(a=>({uri:n(a)}))}}function k(o){return{files:o.files.map(a=>({uri:n(a)}))}}function O(o){return{files:o.files.map(a=>({oldUri:n(a.oldUri),newUri:n(a.newUri)}))}}function x(o){return{files:o.files.map(a=>({uri:n(a)}))}}function D(o,a){return{textDocument:i(o),position:Ye(a)}}function z(o){switch(o){case Me.CompletionTriggerKind.TriggerCharacter:return le.CompletionTriggerKind.TriggerCharacter;case Me.CompletionTriggerKind.TriggerForIncompleteCompletions:return le.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return le.CompletionTriggerKind.Invoked}}function oe(o,a,y){return{textDocument:i(o),position:Ye(a),context:{triggerKind:z(y.triggerKind),triggerCharacter:y.triggerCharacter}}}function G(o){switch(o){case Me.SignatureHelpTriggerKind.Invoke:return le.SignatureHelpTriggerKind.Invoked;case Me.SignatureHelpTriggerKind.TriggerCharacter:return le.SignatureHelpTriggerKind.TriggerCharacter;case Me.SignatureHelpTriggerKind.ContentChange:return le.SignatureHelpTriggerKind.ContentChange}}function re(o){return{label:o.label}}function se(o){return o.map(re)}function ae(o){return{label:o.label,parameters:se(o.parameters)}}function Se(o){return o.map(ae)}function Ne(o){return o===void 0?o:{signatures:Se(o.signatures),activeSignature:o.activeSignature,activeParameter:o.activeParameter}}function Ue(o,a,y){return{textDocument:i(o),position:Ye(a),context:{isRetrigger:y.isRetrigger,triggerCharacter:y.triggerCharacter,triggerKind:G(y.triggerKind),activeSignatureHelp:Ne(y.activeSignatureHelp)}}}function Ye(o){return{line:o.line,character:o.character}}function Be(o){return o==null?o:{line:o.line,character:o.character}}function yt(o){let a=[];for(let y of o)a.push(Be(y));return a}function me(o){return o==null?o:{start:Be(o.start),end:Be(o.end)}}function Ct(o){return o==null?o:le.Location.create(r(o.uri),me(o.range))}function Fe(o){switch(o){case Me.DiagnosticSeverity.Error:return le.DiagnosticSeverity.Error;case Me.DiagnosticSeverity.Warning:return le.DiagnosticSeverity.Warning;case Me.DiagnosticSeverity.Information:return le.DiagnosticSeverity.Information;case Me.DiagnosticSeverity.Hint:return le.DiagnosticSeverity.Hint}}function rt(o){if(!o)return;let a=[];for(let y of o){let T=st(y);T!==void 0&&a.push(T)}return a.length>0?a:void 0}function st(o){switch(o){case Me.DiagnosticTag.Unnecessary:return le.DiagnosticTag.Unnecessary;case Me.DiagnosticTag.Deprecated:return le.DiagnosticTag.Deprecated;default:return}}function Rt(o){return{message:o.message,location:Ct(o.location)}}function Vt(o){return o.map(Rt)}function Jt(o){if(o!=null)return qr.number(o)||qr.string(o)?o:{value:o.value,target:r(o.target)}}function Nt(o){let a=le.Diagnostic.create(me(o.range),o.message),y=o instanceof Dl.ProtocolDiagnostic?o:void 0;y!==void 0&&y.data!==void 0&&(a.data=y.data);let T=Jt(o.code);return Dl.DiagnosticCode.is(T)?y!==void 0&&y.hasDiagnosticCode?a.code=T:(a.code=T.value,a.codeDescription={href:T.target}):a.code=T,qr.number(o.severity)&&(a.severity=Fe(o.severity)),Array.isArray(o.tags)&&(a.tags=rt(o.tags)),o.relatedInformation&&(a.relatedInformation=Vt(o.relatedInformation)),o.source&&(a.source=o.source),a}function It(o){return o==null?o:o.map(Nt)}function Et(o,a){switch(o){case"$string":return a;case le.MarkupKind.PlainText:return{kind:o,value:a};case le.MarkupKind.Markdown:return{kind:o,value:a.value};default:return`Unsupported Markup content received. Kind is: ${o}`}}function qt(o){switch(o){case Me.CompletionItemTag.Deprecated:return le.CompletionItemTag.Deprecated}}function Lt(o){if(o===void 0)return o;let a=[];for(let y of o){let T=qt(y);T!==void 0&&a.push(T)}return a}function Qt(o,a){return a!==void 0?a:o+1}function fn(o){let a={label:o.label},y=o instanceof Oy.default?o:void 0;o.detail&&(a.detail=o.detail),o.documentation&&(!y||y.documentationFormat==="$string"?a.documentation=o.documentation:a.documentation=Et(y.documentationFormat,o.documentation)),o.filterText&&(a.filterText=o.filterText),at(a,o),qr.number(o.kind)&&(a.kind=Qt(o.kind,y&&y.originalItemKind)),o.sortText&&(a.sortText=o.sortText),o.additionalTextEdits&&(a.additionalTextEdits=hn(o.additionalTextEdits)),o.commitCharacters&&(a.commitCharacters=o.commitCharacters.slice()),o.command&&(a.command=lt(o.command)),(o.preselect===!0||o.preselect===!1)&&(a.preselect=o.preselect);let T=Lt(o.tags);if(y){if(y.data!==void 0&&(a.data=y.data),y.deprecated===!0||y.deprecated===!1){if(y.deprecated===!0&&T!==void 0&&T.length>0){let N=T.indexOf(Me.CompletionItemTag.Deprecated);N!==-1&&T.splice(N,1)}a.deprecated=y.deprecated}y.insertTextMode!==void 0&&(a.insertTextMode=y.insertTextMode)}return T!==void 0&&T.length>0&&(a.tags=T),a.insertTextMode===void 0&&o.keepWhitespace===!0&&(a.insertTextMode=Iy.InsertTextMode.adjustIndentation),a}function at(o,a){let y=le.InsertTextFormat.PlainText,T,N;a.textEdit?(T=a.textEdit.newText,N=a.textEdit.range):a.insertText instanceof Me.SnippetString?(y=le.InsertTextFormat.Snippet,T=a.insertText.value):T=a.insertText,a.range&&(N=a.range),o.insertTextFormat=y,a.fromEdit&&T!==void 0&&N!==void 0?o.textEdit=Yt(T,N):o.insertText=T}function Yt(o,a){return Bo.is(a)?le.InsertReplaceEdit.create(o,me(a.inserting),me(a.replacing)):{newText:o,range:me(a)}}function ct(o){return{range:me(o.range),newText:o.newText}}function hn(o){return o==null?o:o.map(ct)}function be(o){return o<=Me.SymbolKind.TypeParameter?o+1:le.SymbolKind.Property}function Ze(o){return o}function Zt(o){return o.map(Ze)}function pn(o,a,y){return{textDocument:i(o),position:Ye(a),context:{includeDeclaration:y.includeDeclaration}}}function ut(o){let a=le.CodeAction.create(o.title);if(o instanceof Fy.default&&o.data!==void 0&&(a.data=o.data),o.kind!==void 0&&(a.kind=At(o.kind)),o.diagnostics!==void 0&&(a.diagnostics=It(o.diagnostics)),o.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return o.command!==void 0&&(a.command=lt(o.command)),o.isPreferred!==void 0&&(a.isPreferred=o.isPreferred),o.disabled!==void 0&&(a.disabled={reason:o.disabled.reason}),a}function en(o){if(o==null)return o;let a;return o.only&&qr.string(o.only.value)&&(a=[o.only.value]),le.CodeActionContext.create(It(o.diagnostics),a)}function At(o){if(o!=null)return o.value}function lt(o){let a=le.Command.create(o.title,o.command);return o.arguments&&(a.arguments=o.arguments),a}function Mt(o){let a=le.CodeLens.create(me(o.range));return o.command&&(a.command=lt(o.command)),o instanceof xy.default&&o.data&&(a.data=o.data),a}function dt(o,a){let y={tabSize:o.tabSize,insertSpaces:o.insertSpaces};return a.trimTrailingWhitespace&&(y.trimTrailingWhitespace=!0),a.trimFinalNewlines&&(y.trimFinalNewlines=!0),a.insertFinalNewline&&(y.insertFinalNewline=!0),y}function _(o){return{textDocument:i(o)}}function g(o){return{textDocument:i(o)}}function l(o){let a=le.DocumentLink.create(me(o.range));o.target&&(a.target=r(o.target)),o.tooltip!==void 0&&(a.tooltip=o.tooltip);let y=o instanceof ky.default?o:void 0;return y&&y.data&&(a.data=y.data),a}function m(o){return{textDocument:i(o)}}function w(o){let a={name:o.name,kind:be(o.kind),uri:r(o.uri),range:me(o.range),selectionRange:me(o.selectionRange)};return o.detail!==void 0&&o.detail.length>0&&(a.detail=o.detail),o.tags!==void 0&&(a.tags=Zt(o.tags)),o instanceof Ny.default&&o.data!==void 0&&(a.data=o.data),a}return{asUri:r,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:c,asChangeTextDocumentParams:p,asCloseTextDocumentParams:C,asSaveTextDocumentParams:R,asWillSaveTextDocumentParams:b,asDidCreateFilesParams:F,asDidRenameFilesParams:I,asDidDeleteFilesParams:A,asWillCreateFilesParams:k,asWillRenameFilesParams:O,asWillDeleteFilesParams:x,asTextDocumentPositionParams:D,asCompletionParams:oe,asSignatureHelpParams:Ue,asWorkerPosition:Ye,asRange:me,asPosition:Be,asPositions:yt,asLocation:Ct,asDiagnosticSeverity:Fe,asDiagnosticTag:st,asDiagnostic:Nt,asDiagnostics:It,asCompletionItem:fn,asTextEdit:ct,asSymbolKind:be,asSymbolTag:Ze,asSymbolTags:Zt,asReferenceParams:pn,asCodeAction:ut,asCodeActionContext:en,asCommand:lt,asCodeLens:Mt,asFormattingOptions:dt,asDocumentSymbolParams:_,asCodeLensParams:g,asDocumentLink:l,asDocumentLinkParams:m,asCallHierarchyItem:w}}ci.createConverter=Ly});var xl=E(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.createConverter=void 0;var H=require("vscode"),ee=we(),Dt=on(),Ay=Io(),My=Ao(),jy=jo(),$y=Wo(),ql=Ko(),Wy=Uo(),Ol=we(),ui;(function(t){function e(n){let r=n;return r&&Dt.string(r.language)&&Dt.string(r.value)}t.is=e})(ui||(ui={}));function Hy(t,e){let r=t||(u=>H.Uri.parse(u));function i(u){return r(u)}function s(u){return u.map(c)}function c(u){let P=new ql.ProtocolDiagnostic(S(u.range),u.message,F(u.severity),u.data);return u.code!==void 0&&(ee.CodeDescription.is(u.codeDescription)?P.code={value:u.code,target:i(u.codeDescription.href)}:ql.DiagnosticCode.is(u.code)?(P.hasDiagnosticCode=!0,P.code={value:u.code.value,target:i(u.code.target)}):P.code=u.code),u.source&&(P.source=u.source),u.relatedInformation&&(P.relatedInformation=f(u.relatedInformation)),Array.isArray(u.tags)&&(P.tags=p(u.tags)),P}function f(u){return u.map(d)}function d(u){return new H.DiagnosticRelatedInformation(me(u.location),u.message)}function p(u){if(!u)return;let P=[];for(let B of u){let ie=C(B);ie!==void 0&&P.push(ie)}return P.length>0?P:void 0}function C(u){switch(u){case ee.DiagnosticTag.Unnecessary:return H.DiagnosticTag.Unnecessary;case ee.DiagnosticTag.Deprecated:return H.DiagnosticTag.Deprecated;default:return}}function R(u){if(!!u)return new H.Position(u.line,u.character)}function S(u){if(!!u)return new H.Range(R(u.start),R(u.end))}function b(u){return u.map(P=>S(P))}function F(u){if(u==null)return H.DiagnosticSeverity.Error;switch(u){case ee.DiagnosticSeverity.Error:return H.DiagnosticSeverity.Error;case ee.DiagnosticSeverity.Warning:return H.DiagnosticSeverity.Warning;case ee.DiagnosticSeverity.Information:return H.DiagnosticSeverity.Information;case ee.DiagnosticSeverity.Hint:return H.DiagnosticSeverity.Hint}return H.DiagnosticSeverity.Error}function I(u){if(Dt.string(u))return k(u);if(ui.is(u))return k().appendCodeblock(u.value,u.language);if(Array.isArray(u)){let P=[];for(let B of u){let ie=k();ui.is(B)?ie.appendCodeblock(B.value,B.language):ie.appendMarkdown(B),P.push(ie)}return P}else{let P;switch(u.kind){case ee.MarkupKind.Markdown:return k(u.value);case ee.MarkupKind.PlainText:return P=k(),P.appendText(u.value),P;default:return P=k(),P.appendText(`Unsupported Markup content received. Kind is: ${u.kind}`),P}}}function A(u){if(Dt.string(u))return u;switch(u.kind){case ee.MarkupKind.Markdown:return k(u.value);case ee.MarkupKind.PlainText:return u.value;default:return`Unsupported Markup content received. Kind is: ${u.kind}`}}function k(u){let P=new H.MarkdownString(u);return e===!0&&(P.isTrusted=e),P}function O(u){if(!!u)return new H.Hover(I(u.contents),S(u.range))}function x(u){if(!u)return;if(Array.isArray(u))return u.map(G);let P=u;return new H.CompletionList(P.items.map(G),P.isIncomplete)}function D(u){return ee.CompletionItemKind.Text<=u&&u<=ee.CompletionItemKind.TypeParameter?[u-1,void 0]:[H.CompletionItemKind.Text,u]}function z(u){switch(u){case ee.CompletionItemTag.Deprecated:return H.CompletionItemTag.Deprecated}}function oe(u){if(u==null)return[];let P=[];for(let B of u){let ie=z(B);ie!==void 0&&P.push(ie)}return P}function G(u){let P=oe(u.tags),B=new Ay.default(u.label);u.detail&&(B.detail=u.detail),u.documentation&&(B.documentation=A(u.documentation),B.documentationFormat=Dt.string(u.documentation)?"$string":u.documentation.kind),u.filterText&&(B.filterText=u.filterText);let ie=re(u);if(ie&&(B.insertText=ie.text,B.range=ie.range,B.fromEdit=ie.fromEdit),Dt.number(u.kind)){let[he,mn]=D(u.kind);B.kind=he,mn&&(B.originalItemKind=mn)}return u.sortText&&(B.sortText=u.sortText),u.additionalTextEdits&&(B.additionalTextEdits=Se(u.additionalTextEdits)),Dt.stringArray(u.commitCharacters)&&(B.commitCharacters=u.commitCharacters.slice()),u.command&&(B.command=ct(u.command)),(u.deprecated===!0||u.deprecated===!1)&&(B.deprecated=u.deprecated,u.deprecated===!0&&P.push(H.CompletionItemTag.Deprecated)),(u.preselect===!0||u.preselect===!1)&&(B.preselect=u.preselect),u.data!==void 0&&(B.data=u.data),P.length>0&&(B.tags=P),u.insertTextMode!==void 0&&(B.insertTextMode=u.insertTextMode,u.insertTextMode===Ol.InsertTextMode.asIs&&(B.keepWhitespace=!0)),B}function re(u){return u.textEdit?u.insertTextFormat===ee.InsertTextFormat.Snippet?{text:new H.SnippetString(u.textEdit.newText),range:se(u.textEdit),fromEdit:!0}:{text:u.textEdit.newText,range:se(u.textEdit),fromEdit:!0}:u.insertText?u.insertTextFormat===ee.InsertTextFormat.Snippet?{text:new H.SnippetString(u.insertText),fromEdit:!1}:{text:u.insertText,fromEdit:!1}:void 0}function se(u){return ee.InsertReplaceEdit.is(u)?{inserting:S(u.insert),replacing:S(u.replace)}:S(u.range)}function ae(u){if(!!u)return new H.TextEdit(S(u.range),u.newText)}function Se(u){if(!!u)return u.map(ae)}function Ne(u){if(!u)return;let P=new H.SignatureHelp;return Dt.number(u.activeSignature)?P.activeSignature=u.activeSignature:P.activeSignature=0,Dt.number(u.activeParameter)?P.activeParameter=u.activeParameter:P.activeParameter=0,u.signatures&&(P.signatures=Ue(u.signatures)),P}function Ue(u){return u.map(Ye)}function Ye(u){let P=new H.SignatureInformation(u.label);return u.documentation!==void 0&&(P.documentation=A(u.documentation)),u.parameters!==void 0&&(P.parameters=Be(u.parameters)),u.activeParameter!==void 0&&(P.activeParameter=u.activeParameter),P}function Be(u){return u.map(yt)}function yt(u){let P=new H.ParameterInformation(u.label);return u.documentation&&(P.documentation=A(u.documentation)),P}function me(u){if(!!u)return new H.Location(r(u.uri),S(u.range))}function Ct(u){if(!!u)return st(u)}function Fe(u){if(!!u)return st(u)}function rt(u){if(!u)return;let P={targetUri:r(u.targetUri),targetRange:S(u.targetRange),originSelectionRange:S(u.originSelectionRange),targetSelectionRange:S(u.targetSelectionRange)};if(!P.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return P}function st(u){if(!!u)return Dt.array(u)?u.length===0?[]:ee.LocationLink.is(u[0])?u.map(B=>rt(B)):u.map(B=>me(B)):ee.LocationLink.is(u)?[rt(u)]:me(u)}function Rt(u){if(!!u)return u.map(P=>me(P))}function Vt(u){if(!!u)return u.map(Jt)}function Jt(u){let P=new H.DocumentHighlight(S(u.range));return Dt.number(u.kind)&&(P.kind=Nt(u.kind)),P}function Nt(u){switch(u){case ee.DocumentHighlightKind.Text:return H.DocumentHighlightKind.Text;case ee.DocumentHighlightKind.Read:return H.DocumentHighlightKind.Read;case ee.DocumentHighlightKind.Write:return H.DocumentHighlightKind.Write}return H.DocumentHighlightKind.Text}function It(u,P){if(!!u)return u.map(B=>Qt(B,P))}function Et(u){return u<=ee.SymbolKind.TypeParameter?u-1:H.SymbolKind.Property}function qt(u){switch(u){case ee.SymbolTag.Deprecated:return H.SymbolTag.Deprecated;default:return}}function Lt(u){if(u==null)return;let P=[];for(let B of u){let ie=qt(B);ie!==void 0&&P.push(ie)}return P.length===0?void 0:P}function Qt(u,P){let B=new H.SymbolInformation(u.name,Et(u.kind),S(u.location.range),u.location.uri?r(u.location.uri):P);return Yt(B,u),u.containerName&&(B.containerName=u.containerName),B}function fn(u){if(u!=null)return u.map(at)}function at(u){let P=new H.DocumentSymbol(u.name,u.detail||"",Et(u.kind),S(u.range),S(u.selectionRange));if(Yt(P,u),u.children!==void 0&&u.children.length>0){let B=[];for(let ie of u.children)B.push(at(ie));P.children=B}return P}function Yt(u,P){u.tags=Lt(P.tags),P.deprecated&&(u.tags?u.tags.includes(H.SymbolTag.Deprecated)||(u.tags=u.tags.concat(H.SymbolTag.Deprecated)):u.tags=[H.SymbolTag.Deprecated])}function ct(u){let P={title:u.title,command:u.command};return u.arguments&&(P.arguments=u.arguments),P}function hn(u){if(!!u)return u.map(ct)}let be=new Map;be.set(ee.CodeActionKind.Empty,H.CodeActionKind.Empty),be.set(ee.CodeActionKind.QuickFix,H.CodeActionKind.QuickFix),be.set(ee.CodeActionKind.Refactor,H.CodeActionKind.Refactor),be.set(ee.CodeActionKind.RefactorExtract,H.CodeActionKind.RefactorExtract),be.set(ee.CodeActionKind.RefactorInline,H.CodeActionKind.RefactorInline),be.set(ee.CodeActionKind.RefactorRewrite,H.CodeActionKind.RefactorRewrite),be.set(ee.CodeActionKind.Source,H.CodeActionKind.Source),be.set(ee.CodeActionKind.SourceOrganizeImports,H.CodeActionKind.SourceOrganizeImports);function Ze(u){if(u==null)return;let P=be.get(u);if(P)return P;let B=u.split(".");P=H.CodeActionKind.Empty;for(let ie of B)P=P.append(ie);return P}function Zt(u){if(u!=null)return u.map(P=>Ze(P))}function pn(u){if(u==null)return;let P=new $y.default(u.title,u.data);return u.kind!==void 0&&(P.kind=Ze(u.kind)),u.diagnostics!==void 0&&(P.diagnostics=s(u.diagnostics)),u.edit!==void 0&&(P.edit=At(u.edit)),u.command!==void 0&&(P.command=ct(u.command)),u.isPreferred!==void 0&&(P.isPreferred=u.isPreferred),u.disabled!==void 0&&(P.disabled={reason:u.disabled.reason}),P}function ut(u){if(!u)return;let P=new My.default(S(u.range));return u.command&&(P.command=ct(u.command)),u.data!==void 0&&u.data!==null&&(P.data=u.data),P}function en(u){if(!!u)return u.map(P=>ut(P))}function At(u){if(!u)return;let P=new Map;if(u.changeAnnotations!==void 0)for(let he of Object.keys(u.changeAnnotations)){let mn=lt(u.changeAnnotations[he]);P.set(he,mn)}let B=he=>{if(he!==void 0)return P.get(he)},ie=new H.WorkspaceEdit;if(u.documentChanges)for(let he of u.documentChanges)if(ee.CreateFile.is(he))ie.createFile(r(he.uri),he.options,B(he.annotationId));else if(ee.RenameFile.is(he))ie.renameFile(r(he.oldUri),r(he.newUri),he.options,B(he.annotationId));else if(ee.DeleteFile.is(he))ie.deleteFile(r(he.uri),he.options,B(he.annotationId));else if(ee.TextDocumentEdit.is(he)){let mn=r(he.textDocument.uri);for(let Nn of he.edits)Ol.AnnotatedTextEdit.is(Nn)?ie.replace(mn,S(Nn.range),Nn.newText,B(Nn.annotationId)):ie.replace(mn,S(Nn.range),Nn.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(he,void 0,4)}`);else u.changes&&Object.keys(u.changes).forEach(he=>{ie.set(r(he),Se(u.changes[he]))});return ie}function lt(u){if(u!==void 0)return{label:u.label,needsConfirmation:!!u.needsConfirmation,description:u.description}}function Mt(u){let P=S(u.range),B=u.target?i(u.target):void 0,ie=new jy.default(P,B);return u.tooltip!==void 0&&(ie.tooltip=u.tooltip),u.data!==void 0&&u.data!==null&&(ie.data=u.data),ie}function dt(u){if(!!u)return u.map(Mt)}function _(u){return new H.Color(u.red,u.green,u.blue,u.alpha)}function g(u){return new H.ColorInformation(S(u.range),_(u.color))}function l(u){if(Array.isArray(u))return u.map(g)}function m(u){let P=new H.ColorPresentation(u.label);return P.additionalTextEdits=Se(u.additionalTextEdits),u.textEdit&&(P.textEdit=ae(u.textEdit)),P}function w(u){if(Array.isArray(u))return u.map(m)}function o(u){if(u)switch(u){case ee.FoldingRangeKind.Comment:return H.FoldingRangeKind.Comment;case ee.FoldingRangeKind.Imports:return H.FoldingRangeKind.Imports;case ee.FoldingRangeKind.Region:return H.FoldingRangeKind.Region}}function a(u){return new H.FoldingRange(u.startLine,u.endLine,o(u.kind))}function y(u){if(Array.isArray(u))return u.map(a)}function T(u){return new H.SelectionRange(S(u.range),u.parent?T(u.parent):void 0)}function N(u){if(!Array.isArray(u))return[];let P=[];for(let B of u)P.push(T(B));return P}function K(u){if(u===null)return;let P=new Wy.default(Et(u.kind),u.name,u.detail||"",i(u.uri),S(u.range),S(u.selectionRange),u.data);return u.tags!==void 0&&(P.tags=Lt(u.tags)),P}function J(u){if(u!==null)return u.map(P=>K(P))}function de(u){return new H.CallHierarchyIncomingCall(K(u.from),b(u.fromRanges))}function Pe(u){if(u!==null)return u.map(P=>de(P))}function De(u){return new H.CallHierarchyOutgoingCall(K(u.to),b(u.fromRanges))}function ne(u){if(u!==null)return u.map(P=>De(P))}function tn(u){if(u!=null)return new H.SemanticTokens(new Uint32Array(u.data),u.resultId)}function gn(u){return new H.SemanticTokensEdit(u.start,u.deleteCount,u.data!==void 0?new Uint32Array(u.data):void 0)}function Ar(u){if(u!=null)return new H.SemanticTokensEdits(u.edits.map(gn),u.resultId)}function Bf(u){return u}function Gf(u){if(u!=null)return new H.LinkedEditingRanges(b(u.ranges),Xf(u.wordPattern))}function Xf(u){if(u!=null)return new RegExp(u)}return{asUri:i,asDiagnostics:s,asDiagnostic:c,asRange:S,asRanges:b,asPosition:R,asDiagnosticSeverity:F,asDiagnosticTag:C,asHover:O,asCompletionResult:x,asCompletionItem:G,asTextEdit:ae,asTextEdits:Se,asSignatureHelp:Ne,asSignatureInformations:Ue,asSignatureInformation:Ye,asParameterInformations:Be,asParameterInformation:yt,asDeclarationResult:Ct,asDefinitionResult:Fe,asLocation:me,asReferences:Rt,asDocumentHighlights:Vt,asDocumentHighlight:Jt,asDocumentHighlightKind:Nt,asSymbolKind:Et,asSymbolTag:qt,asSymbolTags:Lt,asSymbolInformations:It,asSymbolInformation:Qt,asDocumentSymbols:fn,asDocumentSymbol:at,asCommand:ct,asCommands:hn,asCodeAction:pn,asCodeActionKind:Ze,asCodeActionKinds:Zt,asCodeLens:ut,asCodeLenses:en,asWorkspaceEdit:At,asDocumentLink:Mt,asDocumentLinks:dt,asFoldingRangeKind:o,asFoldingRange:a,asFoldingRanges:y,asColor:_,asColorInformation:g,asColorInformations:l,asColorPresentation:m,asColorPresentations:w,asSelectionRange:T,asSelectionRanges:N,asSemanticTokensLegend:Bf,asSemanticTokens:tn,asSemanticTokensEdit:gn,asSemanticTokensEdits:Ar,asCallHierarchyItem:K,asCallHierarchyItems:J,asCallHierarchyIncomingCall:de,asCallHierarchyIncomingCalls:Pe,asCallHierarchyOutgoingCall:De,asCallHierarchyOutgoingCalls:ne,asLinkedEditingRanges:Gf}}li.createConverter=Hy});var Nl=E(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.Delayer=void 0;var kl=we(),Fl=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,n=this.defaultDelay){return this.task=e,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=kl.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(kl.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};di.Delayer=Fl});var hi=E(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.generateUuid=mt.parse=mt.isUUID=mt.v4=mt.empty=void 0;var fi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},te=class extends fi{constructor(){super([te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-","4",te._randomHex(),te._randomHex(),te._randomHex(),"-",te._oneOf(te._timeHighBits),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return te._oneOf(te._chars)}};te._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];te._timeHighBits=["8","9","a","b"];mt.empty=new fi("00000000-0000-0000-0000-000000000000");function Il(){return new te}mt.v4=Il;var Ky=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ll(t){return Ky.test(t)}mt.isUUID=Ll;function zy(t){if(!Ll(t))throw new Error("invalid uuid");return new fi(t)}mt.parse=zy;function Uy(){return Il().asHex()}mt.generateUuid=Uy});var Go=E(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.ProgressPart=void 0;var Al=require("vscode"),Ml=we(),jl=on(),$l=class{constructor(e,n,r){this._client=e,this._token=n,this._reported=0,this._disposable=this._client.onProgress(Ml.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){Al.window.withProgress({location:Al.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(n,r)=>(this._progress=n,this._infinite=e.percentage===void 0,this._cancellationToken=r,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Ml.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&jl.string(e.message))this._progress.report({message:e.message});else if(jl.number(e.percentage)){let n=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,n-this._reported);this._progress.report({message:e.message,increment:r}),this._reported+=r}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};pi.ProgressPart=$l});var it=E(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.BaseLanguageClient=Ee.MessageTransports=Ee.TextDocumentFeature=Ee.State=Ee.RevealOutputChannelOn=Ee.CloseAction=Ee.ErrorAction=void 0;var M=require("vscode"),v=we(),By=Fo(),Gy=El(),Xy=xl(),pe=on(),Wl=Nl(),ge=hi(),Vy=Go(),Hl=class{error(e){v.RAL().console.error(e)}warn(e){v.RAL().console.warn(e)}info(e){v.RAL().console.info(e)}log(e){v.RAL().console.log(e)}};function Jy(t,e,n,r,i){let s=new Hl,c=v.createProtocolConnection(t,e,s,i);return c.onError(d=>{n(d[0],d[1],d[2])}),c.onClose(r),{listen:()=>c.listen(),sendRequest:(d,...p)=>c.sendRequest(pe.string(d)?d:d.method,...p),onRequest:(d,p)=>c.onRequest(pe.string(d)?d:d.method,p),sendNotification:(d,p)=>c.sendNotification(pe.string(d)?d:d.method,p),onNotification:(d,p)=>c.onNotification(pe.string(d)?d:d.method,p),onProgress:c.onProgress,sendProgress:c.sendProgress,trace:(d,p,C)=>{let R={sendNotification:!1,traceFormat:v.TraceFormat.Text};C===void 0?c.trace(d,p,R):(pe.boolean(C),c.trace(d,p,C))},initialize:d=>c.sendRequest(v.InitializeRequest.type,d),shutdown:()=>c.sendRequest(v.ShutdownRequest.type,void 0),exit:()=>c.sendNotification(v.ExitNotification.type),onLogMessage:d=>c.onNotification(v.LogMessageNotification.type,d),onShowMessage:d=>c.onNotification(v.ShowMessageNotification.type,d),onTelemetry:d=>c.onNotification(v.TelemetryEventNotification.type,d),didChangeConfiguration:d=>c.sendNotification(v.DidChangeConfigurationNotification.type,d),didChangeWatchedFiles:d=>c.sendNotification(v.DidChangeWatchedFilesNotification.type,d),didOpenTextDocument:d=>c.sendNotification(v.DidOpenTextDocumentNotification.type,d),didChangeTextDocument:d=>c.sendNotification(v.DidChangeTextDocumentNotification.type,d),didCloseTextDocument:d=>c.sendNotification(v.DidCloseTextDocumentNotification.type,d),didSaveTextDocument:d=>c.sendNotification(v.DidSaveTextDocumentNotification.type,d),onDiagnostics:d=>c.onNotification(v.PublishDiagnosticsNotification.type,d),end:()=>c.end(),dispose:()=>c.dispose()}}var gi;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(gi=Ee.ErrorAction||(Ee.ErrorAction={}));var qn;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(qn=Ee.CloseAction||(Ee.CloseAction={}));var Kl=class{constructor(e,n){this.name=e,this.maxRestartCount=n,this.restarts=[]}error(e,n,r){return r&&r<=3?gi.Continue:gi.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?qn.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(M.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),qn.DoNotRestart):(this.restarts.shift(),qn.Restart)}},Or;(function(t){t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(Or=Ee.RevealOutputChannelOn||(Ee.RevealOutputChannelOn={}));var mi;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(mi=Ee.State||(Ee.State={}));var Ce;(function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.StartFailed=2]="StartFailed",t[t.Running=3]="Running",t[t.Stopping=4]="Stopping",t[t.Stopped=5]="Stopped"})(Ce||(Ce={}));var zl=[v.SymbolKind.File,v.SymbolKind.Module,v.SymbolKind.Namespace,v.SymbolKind.Package,v.SymbolKind.Class,v.SymbolKind.Method,v.SymbolKind.Property,v.SymbolKind.Field,v.SymbolKind.Constructor,v.SymbolKind.Enum,v.SymbolKind.Interface,v.SymbolKind.Function,v.SymbolKind.Variable,v.SymbolKind.Constant,v.SymbolKind.String,v.SymbolKind.Number,v.SymbolKind.Boolean,v.SymbolKind.Array,v.SymbolKind.Object,v.SymbolKind.Key,v.SymbolKind.Null,v.SymbolKind.EnumMember,v.SymbolKind.Struct,v.SymbolKind.Event,v.SymbolKind.Operator,v.SymbolKind.TypeParameter],Qy=[v.CompletionItemKind.Text,v.CompletionItemKind.Method,v.CompletionItemKind.Function,v.CompletionItemKind.Constructor,v.CompletionItemKind.Field,v.CompletionItemKind.Variable,v.CompletionItemKind.Class,v.CompletionItemKind.Interface,v.CompletionItemKind.Module,v.CompletionItemKind.Property,v.CompletionItemKind.Unit,v.CompletionItemKind.Value,v.CompletionItemKind.Enum,v.CompletionItemKind.Keyword,v.CompletionItemKind.Snippet,v.CompletionItemKind.Color,v.CompletionItemKind.File,v.CompletionItemKind.Reference,v.CompletionItemKind.Folder,v.CompletionItemKind.EnumMember,v.CompletionItemKind.Constant,v.CompletionItemKind.Struct,v.CompletionItemKind.Event,v.CompletionItemKind.Operator,v.CompletionItemKind.TypeParameter],Ul=[v.SymbolTag.Deprecated];function U(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var xr;(function(t){function e(n){let r=M.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}t.fromConfiguration=e})(xr||(xr={}));var Xo;(function(t){function e(n){let r=n;return r&&pe.func(r.register)&&pe.func(r.unregister)&&pe.func(r.dispose)&&r.registrationType!==void 0}t.is=e})(Xo||(Xo={}));var kt=class{constructor(e,n,r,i,s,c){this._client=e,this._event=n,this._type=r,this._middleware=i,this._createParams=s,this._selectorFilter=c,this._selectors=new Map}static textDocumentFilter(e,n){for(let r of e)if(M.languages.match(r,n))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,n=>this._client.sendNotification(this._type,this._createParams(n))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let n of this._selectors.values())if(M.languages.match(n,e))return{send:r=>{this.callback(r)}}}},Bl=class extends kt{constructor(e,n){super(e,M.workspace.onDidOpenTextDocument,v.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),kt.textDocumentFilter);this._syncedDocuments=n}fillClientCapabilities(e){U(U(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:ge.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return v.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let n=e.registerOptions.documentSelector;M.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&M.languages.match(n,r)){let s=this._client.clientOptions.middleware,c=f=>{this._client.sendNotification(this._type,this._createParams(f))};s.didOpen?s.didOpen(r,c):c(r),this._syncedDocuments.set(i,r)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},Gl=class extends kt{constructor(e,n){super(e,M.workspace.onDidCloseTextDocument,v.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),kt.textDocumentFilter);this._syncedDocuments=n}get registrationType(){return v.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){U(U(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:ge.generateUuid(),registerOptions:{documentSelector:n}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let n=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(M.languages.match(n,i)&&!this._selectorFilter(r,i)){let s=this._client.clientOptions.middleware,c=f=>{this._client.sendNotification(this._type,this._createParams(f))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,c):c(i)}})}},Xl=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return v.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){U(U(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==v.TextDocumentSyncKind.None&&this.register({id:ge.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=M.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let n of this._changeData.values())if(M.languages.match(n.documentSelector,e.document)){let r=this._client.clientOptions.middleware;if(n.syncKind===v.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);r.didChange?r.didChange(e,()=>this._client.sendNotification(v.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(v.DidChangeTextDocumentNotification.type,i)}else if(n.syncKind===v.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(v.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new Wl.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(v.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};r.didChange?r.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let n of this._changeData.values())if(M.languages.match(n.documentSelector,e))return{send:r=>{this.callback(r)}}}},Vl=class extends kt{constructor(e){super(e,M.workspace.onWillSaveTextDocument,v.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,n=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(n),(n,r)=>kt.textDocumentFilter(n,r.document))}get registrationType(){return v.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"synchronization");n.willSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:ge.generateUuid(),registerOptions:{documentSelector:n}})}},Jl=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return v.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:ge.generateUuid(),registerOptions:{documentSelector:n}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=M.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(kt.textDocumentFilter(this._selectors.values(),e.document)){let n=this._client.clientOptions.middleware,r=i=>this._client.sendRequest(v.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let c=this._client.protocol2CodeConverter.asTextEdits(s);return c===void 0?[]:c});e.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Ql=class extends kt{constructor(e){super(e,M.workspace.onDidSaveTextDocument,v.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,n=>e.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),kt.textDocumentFilter);this._includeText=!1}get registrationType(){return v.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){U(U(e,"textDocument"),"synchronization").didSave=!0}initialize(e,n){let r=e.resolvedTextDocumentSync;if(n&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:ge.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Yl=class{constructor(e,n){this._client=e,this._notifyFileEvent=n,this._watchers=new Map}get registrationType(){return v.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){U(U(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,n){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let n=[];for(let r of e.registerOptions.watchers){if(!pe.string(r.globPattern))continue;let i=!0,s=!0,c=!0;r.kind!==void 0&&r.kind!==null&&(i=(r.kind&v.WatchKind.Create)!==0,s=(r.kind&v.WatchKind.Change)!==0,c=(r.kind&v.WatchKind.Delete)!==0);let f=M.workspace.createFileSystemWatcher(r.globPattern,!i,!s,!c);this.hookListeners(f,i,s,c),n.push(f)}this._watchers.set(e.id,n)}registerRaw(e,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,n,r,i,s){n&&e.onDidCreate(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:v.FileChangeType.Created}),null,s),r&&e.onDidChange(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:v.FileChangeType.Changed}),null,s),i&&e.onDidDelete(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:v.FileChangeType.Deleted}),null,s)}unregister(e){let n=this._watchers.get(e);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let n of e)n.dispose()}),this._watchers.clear()}},ze=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],data:e,provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,n){if(n){if(v.TextDocumentRegistrationOptions.is(n)){let r=v.StaticRegistrationOptions.hasId(n)?n.id:ge.generateUuid(),i=n.documentSelector||e;if(i)return[r,Object.assign({},n,{documentSelector:i})]}else if(pe.boolean(n)&&n===!0||v.WorkDoneProgressOptions.is(n)){if(!e)return[void 0,void 0];let r=pe.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e});return[ge.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,n){if(!(!e||!n))return pe.boolean(n)&&n===!0?{documentSelector:e}:Object.assign({},n,{documentSelector:e})}getProvider(e){for(let n of this._registrations.values()){let r=n.data.registerOptions.documentSelector;if(r!==null&&M.languages.match(r,e))return n.provider}}getAllProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}};Ee.TextDocumentFeature=ze;var Zl=class{constructor(e,n){this._client=e,this._registrationType=n,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let n=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:n[0],provider:n[1]})}unregister(e){let n=this._registrations.get(e);n!==void 0&&n.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let n of this._registrations.values())e.push(n.provider);return e}},ed=class extends ze{constructor(e){super(e,v.CompletionRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[v.MarkupKind.Markdown,v.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[v.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[v.InsertTextMode.asIs,v.InsertTextMode.adjustIndentation]}},n.completionItemKind={valueSet:Qy}}initialize(e,n){let r=this.getRegistrationOptions(n,e.completionProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n=e.triggerCharacters||[],r={provideCompletionItems:(i,s,c,f)=>{let d=this._client,p=this._client.clientOptions.middleware,C=(R,S,b,F)=>d.sendRequest(v.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(R,S,b),F).then(d.protocol2CodeConverter.asCompletionResult,I=>d.handleFailedRequest(v.CompletionRequest.type,I,null));return p.provideCompletionItem?p.provideCompletionItem(i,s,f,c,C):C(i,s,f,c)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let c=this._client,f=this._client.clientOptions.middleware,d=(p,C)=>c.sendRequest(v.CompletionResolveRequest.type,c.code2ProtocolConverter.asCompletionItem(p),C).then(c.protocol2CodeConverter.asCompletionItem,R=>c.handleFailedRequest(v.CompletionResolveRequest.type,R,p));return f.resolveCompletionItem?f.resolveCompletionItem(i,s,d):d(i,s)}:void 0};return[M.languages.registerCompletionItemProvider(e.documentSelector,r,...n),r]}},td=class extends ze{constructor(e){super(e,v.HoverRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[v.MarkupKind.Markdown,v.MarkupKind.PlainText]}initialize(e,n){let r=this.getRegistrationOptions(n,e.hoverProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideHover:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(v.HoverRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asHover,S=>c.handleFailedRequest(v.HoverRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideHover?d.provideHover(r,i,s,f):f(r,i,s)}};return[M.languages.registerHoverProvider(e.documentSelector,n),n]}},nd=class extends ze{constructor(e){super(e,v.SignatureHelpRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[v.MarkupKind.Markdown,v.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.signatureHelpProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideSignatureHelp:(i,s,c,f)=>{let d=this._client,p=(R,S,b,F)=>d.sendRequest(v.SignatureHelpRequest.type,d.code2ProtocolConverter.asSignatureHelpParams(R,S,b),F).then(d.protocol2CodeConverter.asSignatureHelp,I=>d.handleFailedRequest(v.SignatureHelpRequest.type,I,null)),C=d.clientOptions.middleware;return C.provideSignatureHelp?C.provideSignatureHelp(i,s,f,c,p):p(i,s,f,c)}},r;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];r=M.languages.registerSignatureHelpProvider(e.documentSelector,n,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};r=M.languages.registerSignatureHelpProvider(e.documentSelector,n,i)}return[r,n]}},rd=class extends ze{constructor(e){super(e,v.DefinitionRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.definitionProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDefinition:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(v.DefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asDefinitionResult,S=>c.handleFailedRequest(v.DefinitionRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideDefinition?d.provideDefinition(r,i,s,f):f(r,i,s)}};return[M.languages.registerDefinitionProvider(e.documentSelector,n),n]}},id=class extends ze{constructor(e){super(e,v.ReferencesRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.referencesProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideReferences:(r,i,s,c)=>{let f=this._client,d=(C,R,S,b)=>f.sendRequest(v.ReferencesRequest.type,f.code2ProtocolConverter.asReferenceParams(C,R,S),b).then(f.protocol2CodeConverter.asReferences,F=>f.handleFailedRequest(v.ReferencesRequest.type,F,null)),p=f.clientOptions.middleware;return p.provideReferences?p.provideReferences(r,i,s,c,d):d(r,i,s,c)}};return[M.languages.registerReferenceProvider(e.documentSelector,n),n]}},od=class extends ze{constructor(e){super(e,v.DocumentHighlightRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentHighlightProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentHighlights:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(v.DocumentHighlightRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asDocumentHighlights,S=>c.handleFailedRequest(v.DocumentHighlightRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideDocumentHighlights?d.provideDocumentHighlights(r,i,s,f):f(r,i,s)}};return[M.languages.registerDocumentHighlightProvider(e.documentSelector,n),n]}},sd=class extends ze{constructor(e){super(e,v.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"documentSymbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:zl},n.hierarchicalDocumentSymbolSupport=!0,n.tagSupport={valueSet:Ul},n.labelSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentSymbolProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentSymbols:(i,s)=>{let c=this._client,f=(p,C)=>c.sendRequest(v.DocumentSymbolRequest.type,c.code2ProtocolConverter.asDocumentSymbolParams(p),C).then(R=>{if(R!==null){if(R.length===0)return[];{let S=R[0];return v.DocumentSymbol.is(S)?c.protocol2CodeConverter.asDocumentSymbols(R):c.protocol2CodeConverter.asSymbolInformations(R)}}},R=>c.handleFailedRequest(v.DocumentSymbolRequest.type,R,null)),d=c.clientOptions.middleware;return d.provideDocumentSymbols?d.provideDocumentSymbols(i,s,f):f(i,s)}},r=e.label!==void 0?{label:e.label}:void 0;return[M.languages.registerDocumentSymbolProvider(e.documentSelector,n,r),n]}},ad=class extends Zl{constructor(e){super(e,v.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let n=U(U(e,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:zl},n.tagSupport={valueSet:Ul}}initialize(e){!e.workspaceSymbolProvider||this.register({id:ge.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let n={provideWorkspaceSymbols:(r,i)=>{let s=this._client,c=(d,p)=>s.sendRequest(v.WorkspaceSymbolRequest.type,{query:d},p).then(s.protocol2CodeConverter.asSymbolInformations,C=>s.handleFailedRequest(v.WorkspaceSymbolRequest.type,C,null)),f=s.clientOptions.middleware;return f.provideWorkspaceSymbols?f.provideWorkspaceSymbols(r,i,c):c(r,i)}};return[M.languages.registerWorkspaceSymbolProvider(n),n]}},cd=class extends ze{constructor(e){super(e,v.CodeActionRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[v.CodeActionKind.Empty,v.CodeActionKind.QuickFix,v.CodeActionKind.Refactor,v.CodeActionKind.RefactorExtract,v.CodeActionKind.RefactorInline,v.CodeActionKind.RefactorRewrite,v.CodeActionKind.Source,v.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(e,n){let r=this.getRegistrationOptions(n,e.codeActionProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideCodeActions:(r,i,s,c)=>{let f=this._client,d=(C,R,S,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),range:f.code2ProtocolConverter.asRange(R),context:f.code2ProtocolConverter.asCodeActionContext(S)};return f.sendRequest(v.CodeActionRequest.type,F,b).then(I=>{if(I===null)return;let A=[];for(let k of I)v.Command.is(k)?A.push(f.protocol2CodeConverter.asCommand(k)):A.push(f.protocol2CodeConverter.asCodeAction(k));return A},I=>f.handleFailedRequest(v.CodeActionRequest.type,I,null))},p=f.clientOptions.middleware;return p.provideCodeActions?p.provideCodeActions(r,i,s,c,d):d(r,i,s,c)},resolveCodeAction:e.resolveProvider?(r,i)=>{let s=this._client,c=this._client.clientOptions.middleware,f=(d,p)=>s.sendRequest(v.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(d),p).then(s.protocol2CodeConverter.asCodeAction,C=>s.handleFailedRequest(v.CodeActionResolveRequest.type,C,d));return c.resolveCodeAction?c.resolveCodeAction(r,i,f):f(r,i)}:void 0};return[M.languages.registerCodeActionsProvider(e.documentSelector,n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}},ud=class extends ze{constructor(e){super(e,v.CodeLensRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"codeLens").dynamicRegistration=!0,U(U(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,n){this._client.onRequest(v.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(n,e.codeLensProvider);!i||this.register({id:ge.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let n=new M.EventEmitter,r={onDidChangeCodeLenses:n.event,provideCodeLenses:(i,s)=>{let c=this._client,f=(p,C)=>c.sendRequest(v.CodeLensRequest.type,c.code2ProtocolConverter.asCodeLensParams(p),C).then(c.protocol2CodeConverter.asCodeLenses,R=>c.handleFailedRequest(v.CodeLensRequest.type,R,null)),d=c.clientOptions.middleware;return d.provideCodeLenses?d.provideCodeLenses(i,s,f):f(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let c=this._client,f=(p,C)=>c.sendRequest(v.CodeLensResolveRequest.type,c.code2ProtocolConverter.asCodeLens(p),C).then(c.protocol2CodeConverter.asCodeLens,R=>c.handleFailedRequest(v.CodeLensResolveRequest.type,R,p)),d=c.clientOptions.middleware;return d.resolveCodeLens?d.resolveCodeLens(i,s,f):f(i,s)}:void 0};return[M.languages.registerCodeLensProvider(e.documentSelector,r),{provider:r,onDidChangeCodeLensEmitter:n}]}},ld=class extends ze{constructor(e){super(e,v.DocumentFormattingRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentFormattingProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentFormattingEdits:(r,i,s)=>{let c=this._client,f=(p,C,R)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),options:c.code2ProtocolConverter.asFormattingOptions(C,xr.fromConfiguration(p))};return c.sendRequest(v.DocumentFormattingRequest.type,S,R).then(c.protocol2CodeConverter.asTextEdits,b=>c.handleFailedRequest(v.DocumentFormattingRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideDocumentFormattingEdits?d.provideDocumentFormattingEdits(r,i,s,f):f(r,i,s)}};return[M.languages.registerDocumentFormattingEditProvider(e.documentSelector,n),n]}},dd=class extends ze{constructor(e){super(e,v.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentRangeFormattingProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentRangeFormattingEdits:(r,i,s,c)=>{let f=this._client,d=(C,R,S,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),range:f.code2ProtocolConverter.asRange(R),options:f.code2ProtocolConverter.asFormattingOptions(S,xr.fromConfiguration(C))};return f.sendRequest(v.DocumentRangeFormattingRequest.type,F,b).then(f.protocol2CodeConverter.asTextEdits,I=>f.handleFailedRequest(v.DocumentRangeFormattingRequest.type,I,null))},p=f.clientOptions.middleware;return p.provideDocumentRangeFormattingEdits?p.provideDocumentRangeFormattingEdits(r,i,s,c,d):d(r,i,s,c)}};return[M.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,n),n]}},fd=class extends ze{constructor(e){super(e,v.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){U(U(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentOnTypeFormattingProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideOnTypeFormattingEdits:(i,s,c,f,d)=>{let p=this._client,C=(S,b,F,I,A)=>{let k={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(S),position:p.code2ProtocolConverter.asPosition(b),ch:F,options:p.code2ProtocolConverter.asFormattingOptions(I,xr.fromConfiguration(S))};return p.sendRequest(v.DocumentOnTypeFormattingRequest.type,k,A).then(p.protocol2CodeConverter.asTextEdits,O=>p.handleFailedRequest(v.DocumentOnTypeFormattingRequest.type,O,null))},R=p.clientOptions.middleware;return R.provideOnTypeFormattingEdits?R.provideOnTypeFormattingEdits(i,s,c,f,d,C):C(i,s,c,f,d)}},r=e.moreTriggerCharacter||[];return[M.languages.registerOnTypeFormattingEditProvider(e.documentSelector,n,e.firstTriggerCharacter,...r),n]}},hd=class extends ze{constructor(e){super(e,v.RenameRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=v.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.renameProvider);!r||(pe.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:ge.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let n={provideRenameEdits:(r,i,s,c)=>{let f=this._client,d=(C,R,S,b)=>{let F={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(C),position:f.code2ProtocolConverter.asPosition(R),newName:S};return f.sendRequest(v.RenameRequest.type,F,b).then(f.protocol2CodeConverter.asWorkspaceEdit,I=>f.handleFailedRequest(v.RenameRequest.type,I,null))},p=f.clientOptions.middleware;return p.provideRenameEdits?p.provideRenameEdits(r,i,s,c,d):d(r,i,s,c)},prepareRename:e.prepareProvider?(r,i,s)=>{let c=this._client,f=(p,C,R)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),position:c.code2ProtocolConverter.asPosition(C)};return c.sendRequest(v.PrepareRenameRequest.type,S,R).then(b=>v.Range.is(b)?c.protocol2CodeConverter.asRange(b):this.isDefaultBehavior(b)?b.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):b&&v.Range.is(b.range)?{range:c.protocol2CodeConverter.asRange(b.range),placeholder:b.placeholder}:Promise.reject(new Error("The element can't be renamed.")),b=>c.handleFailedRequest(v.PrepareRenameRequest.type,b,void 0))},d=c.clientOptions.middleware;return d.prepareRename?d.prepareRename(r,i,s,f):f(r,i,s)}:void 0};return[M.languages.registerRenameProvider(e.documentSelector,n),n]}isDefaultBehavior(e){let n=e;return n&&pe.boolean(n.defaultBehavior)}},pd=class extends ze{constructor(e){super(e,v.DocumentLinkRequest.type)}fillClientCapabilities(e){let n=U(U(e,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(e,n){let r=this.getRegistrationOptions(n,e.documentLinkProvider);!r||this.register({id:ge.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let n={provideDocumentLinks:(r,i)=>{let s=this._client,c=(d,p)=>s.sendRequest(v.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(d),p).then(s.protocol2CodeConverter.asDocumentLinks,C=>s.handleFailedRequest(v.DocumentLinkRequest.type,C,null)),f=s.clientOptions.middleware;return f.provideDocumentLinks?f.provideDocumentLinks(r,i,c):c(r,i)},resolveDocumentLink:e.resolveProvider?(r,i)=>{let s=this._client,c=(d,p)=>s.sendRequest(v.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(d),p).then(s.protocol2CodeConverter.asDocumentLink,C=>s.handleFailedRequest(v.DocumentLinkResolveRequest.type,C,d)),f=s.clientOptions.middleware;return f.resolveDocumentLink?f.resolveDocumentLink(r,i,c):c(r,i)}:void 0};return[M.languages.registerDocumentLinkProvider(e.documentSelector,n),n]}},gd=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return v.DidChangeConfigurationNotification.type}fillClientCapabilities(e){U(U(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:ge.generateUuid(),registerOptions:{section:e}})}register(e){let n=M.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,n),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let n=this._listeners.get(e);n&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,n){let r;if(pe.string(e)?r=[e]:r=e,r!==void 0&&n!==void 0&&!r.some(f=>n.affectsConfiguration(f)))return;let i=c=>{if(c===void 0){this._client.sendNotification(v.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(v.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(c)})},s=this.getMiddleware();s?s(r,i):i(r)}extractSettingsInformation(e){function n(s,c){let f=s;for(let d=0;d<c.length-1;d++){let p=f[c[d]];p||(p=Object.create(null),f[c[d]]=p),f=p}return f}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let c=e[s],f=c.indexOf("."),d=null;if(f>=0?d=M.workspace.getConfiguration(c.substr(0,f),r).get(c.substr(f+1)):d=M.workspace.getConfiguration(void 0,r).get(c),d){let p=e[s].split(".");n(i,p)[p[p.length-1]]=By.toJSONObject(d)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},md=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return v.ExecuteCommandRequest.type}fillClientCapabilities(e){U(U(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:ge.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let n=this._client,r=n.clientOptions.middleware,i=(s,c)=>{let f={command:s,arguments:c};return n.sendRequest(v.ExecuteCommandRequest.type,f).then(void 0,d=>n.handleFailedRequest(v.ExecuteCommandRequest.type,d,void 0))};if(e.registerOptions.commands){let s=[];for(let c of e.registerOptions.commands)s.push(M.commands.registerCommand(c,(...f)=>r.executeCommand?r.executeCommand(c,f,i):i(c,f)));this._commands.set(e.id,s)}}unregister(e){let n=this._commands.get(e);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(n=>n.dispose())}),this._commands.clear()}},Yy;(function(t){function e(n){return n&&v.MessageReader.is(n.reader)&&v.MessageWriter.is(n.writer)}t.is=e})(Yy=Ee.MessageTransports||(Ee.MessageTransports={}));var Vo=class{constructor(e,n){this._resolve=e,this._reject=n,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},Jn=class{constructor(e,n,r){var i;this._traceFormat=v.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=n,r=r||{};let s={isTrusted:!1};r.markdown!==void 0&&r.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:r.documentSelector||[],synchronize:r.synchronize||{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName||this._name,revealOutputChannelOn:r.revealOutputChannelOn||Or.Error,stdioEncoding:r.stdioEncoding||"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler||this.createDefaultErrorHandler((i=r.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:r.middleware||{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Ce.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Wl.Delayer(250),this._onReady=new Promise((c,f)=>{this._onReadyCallbacks=new Vo(c,f)}),this._onStop=void 0,this._telemetryEmitter=new v.Emitter,this._stateChangeEmitter=new v.Emitter,this._trace=v.Trace.Off,this._tracer={log:(c,f)=>{pe.string(c)?this.logTrace(c,f):this.logObjectTrace(c)}},this._c2p=Gy.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=Xy.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let n=this.getPublicState();this._state=e;let r=this.getPublicState();r!==n&&this._stateChangeEmitter.fire({oldState:n,newState:r})}getPublicState(){return this.state===Ce.Running?mi.Running:this.state===Ce.Starting?mi.Starting:mi.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...n)}catch(r){throw this.error(`Sending request ${pe.string(e)?e:e.method} failed.`,r),r}}onRequest(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,n)}catch(r){throw this.error(`Registering request handler ${pe.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,n)}catch(r){throw this.error(`Sending notification ${pe.string(e)?e:e.method} failed.`,r),r}}onNotification(e,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,n)}catch(r){throw this.error(`Registering notification handler ${pe.string(e)?e:e.method} failed.`,r),r}}onProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(v.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,n,s=>{i(n,s,()=>r(s))})}return this._resolvedConnection.onProgress(e,n,r)}catch(i){throw this.error(`Registering progress handler for token ${n} failed.`,i),i}}sendProgress(e,n,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,n,r)}catch(i){throw this.error(`Sending progress for token ${n} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=M.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Kl(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(n=>{n.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof v.ResponseError){let n=e;return`  Message: ${n.message}
  Code: ${n.code} ${n.data?`
`+n.data.toString():""}`}return e instanceof Error?pe.string(e.stack)?e.stack:e.message:pe.string(e)?e:e.toString()}info(e,n,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Or.Info&&this.showNotificationMessage()}warn(e,n,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Or.Warn&&this.showNotificationMessage()}error(e,n,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.outputChannel.appendLine(this.data2String(n)),r&&this._clientOptions.revealOutputChannelOn<=Or.Error&&this.showNotificationMessage()}showNotificationMessage(){M.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,n){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),n&&this.traceOutputChannel.appendLine(this.data2String(n))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Ce.Initial||this.state===Ce.Stopping||this.state===Ce.Stopped}needsStop(){return this.state===Ce.Starting||this.state===Ce.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Ce.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,n)=>{this._onReadyCallbacks=new Vo(e,n)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?M.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):M.languages.createDiagnosticCollection()),this.state=Ce.Starting,this.resolveConnection().then(e=>(e.onLogMessage(n=>{switch(n.type){case v.MessageType.Error:this.error(n.message,void 0,!1);break;case v.MessageType.Warning:this.warn(n.message,void 0,!1);break;case v.MessageType.Info:this.info(n.message,void 0,!1);break;default:this.outputChannel.appendLine(n.message)}}),e.onShowMessage(n=>{switch(n.type){case v.MessageType.Error:M.window.showErrorMessage(n.message);break;case v.MessageType.Warning:M.window.showWarningMessage(n.message);break;case v.MessageType.Info:M.window.showInformationMessage(n.message);break;default:M.window.showInformationMessage(n.message)}}),e.onRequest(v.ShowMessageRequest.type,n=>{let r;switch(n.type){case v.MessageType.Error:r=M.window.showErrorMessage;break;case v.MessageType.Warning:r=M.window.showWarningMessage;break;case v.MessageType.Info:r=M.window.showInformationMessage;break;default:r=M.window.showInformationMessage}let i=n.actions||[];return r(n.message,...i)}),e.onTelemetry(n=>{this._telemetryEmitter.fire(n)}),e.onRequest(v.ShowDocumentRequest.type,async n=>{var r;let i=async c=>{let f=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await M.env.openExternal(f)};{let d={};return c.selection!==void 0&&(d.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?d.preserveFocus=!0:c.takeFocus===!0&&(d.preserveFocus=!1),await M.window.showTextDocument(f,d),{success:!0}}}catch{return{success:!0}}},s=(r=this._clientOptions.middleware.window)===null||r===void 0?void 0:r.showDocument;return s!==void 0?s(n,i):i(n)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=Ce.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),M.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new M.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let n=this._clientOptions.initializationOptions,r=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:M.env.appName,version:M.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(M.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:pe.func(n)?n():n,trace:v.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=ge.generateUuid(),c=new Vy.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(f=>(c.done(),f),f=>{throw c.cancel(),f})}else return this.doInitialize(e,i)}doInitialize(e,n){return e.initialize(n).then(r=>{this._resolvedConnection=e,this._initializeResult=r,this.state=Ce.Running;let i;return pe.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===v.TextDocumentSyncKind.None?i={openClose:!1,change:v.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(v.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(v.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(v.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(v.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r}).then(void 0,r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof v.ResponseError&&r.data&&r.data.retry?M.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&&r.message&&M.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=M.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Ce.Stopping&&this._onStop?this._onStop:(this.state=Ce.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=Ce.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Ce.Stopped,Promise.resolve())}cleanUp(e=!0,n=!0){this._listeners&&(this._listeners.forEach(r=>r.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(r=>r.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let r of this._features.values())r.dispose();e&&this.cleanUpChannel(),n&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var n;let r=this;function i(c){r._fileEvents.push(c),r._fileEventDelayer.trigger(()=>{r.onReady().then(()=>{r.resolveConnection().then(f=>{r.isConnectionActive()&&(r.forceDocumentSync(),f.didChangeWatchedFiles({changes:r._fileEvents})),r._fileEvents=[]})},f=>{r.error("Notify file events failed.",f)})})}let s=(n=this.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;(s==null?void 0:s.didChangeWatchedFile)?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(v.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let n=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(n,r,(s,c)=>this.setDiagnostics(s,c)):this.setDiagnostics(n,r)}setDiagnostics(e,n){!this._diagnostics||this._diagnostics.set(e,n)}createConnection(){let e=(r,i,s)=>{this.handleConnectionError(r,i,s)},n=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>Jy(r.reader,r.writer,e,n,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Ce.Stopping||this.state===Ce.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=qn.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===qn.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Ce.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Ce.StartFailed):this.state=Ce.Stopped,this.cleanUp(!1,!0)):e===qn.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Ce.Initial,this.start())}handleConnectionError(e,n,r){this._clientOptions.errorHandler.error(e,n,r)===gi.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){M.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,n=!1){let r=M.workspace.getConfiguration(this._id),i=v.Trace.Off,s=v.TraceFormat.Text;if(r){let c=r.get("trace.server","off");typeof c=="string"?i=v.Trace.fromString(c):(i=v.Trace.fromString(r.get("trace.server.verbosity","off")),s=v.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:n,traceFormat:this._traceFormat})}hookFileEvents(e){let n=this._clientOptions.synchronize.fileEvents;if(!n)return;let r;pe.array(n)?r=n:r=[n],!!r&&this._dynamicFeatures.get(v.DidChangeWatchedFilesNotification.type.method).registerRaw(ge.generateUuid(),r)}registerFeatures(e){for(let n of e)this.registerFeature(n)}registerFeature(e){if(this._features.push(e),Xo.is(e)){let n=e.registrationType;this._dynamicFeatures.set(n.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new gd(this)),this.registerFeature(new Bl(this,this._syncedDocuments)),this.registerFeature(new Xl(this)),this.registerFeature(new Vl(this)),this.registerFeature(new Jl(this)),this.registerFeature(new Ql(this)),this.registerFeature(new Gl(this,this._syncedDocuments)),this.registerFeature(new Yl(this,e=>this.notifyFileEvent(e))),this.registerFeature(new ed(this)),this.registerFeature(new td(this)),this.registerFeature(new nd(this)),this.registerFeature(new rd(this)),this.registerFeature(new id(this)),this.registerFeature(new od(this)),this.registerFeature(new sd(this)),this.registerFeature(new ad(this)),this.registerFeature(new cd(this)),this.registerFeature(new ud(this)),this.registerFeature(new ld(this)),this.registerFeature(new dd(this)),this.registerFeature(new fd(this)),this.registerFeature(new hd(this)),this.registerFeature(new pd(this)),this.registerFeature(new md(this))}fillInitializeParams(e){for(let n of this._features)pe.func(n.fillInitializeParams)&&n.fillInitializeParams(e)}computeClientCapabilities(){let e={};U(e,"workspace").applyEdit=!0;let n=U(U(e,"workspace"),"workspaceEdit");n.documentChanges=!0,n.resourceOperations=[v.ResourceOperationKind.Create,v.ResourceOperationKind.Rename,v.ResourceOperationKind.Delete],n.failureHandling=v.FailureHandlingKind.TextOnlyTransactional,n.normalizesLineEndings=!0,n.changeAnnotationSupport={groupsOnLabel:!0};let r=U(U(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[v.DiagnosticTag.Unnecessary,v.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=U(e,"window"),s=U(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let c=U(i,"showDocument");c.support=!0;let f=U(e,"general");f.regularExpressions={engine:"ECMAScript",version:"ES2020"},f.markdown={parser:"marked",version:"1.1.0"};for(let d of this._features)d.fillClientCapabilities(e);return e}initializeFeatures(e){let n=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,n)}handleRegistrationRequest(e){return new Promise((n,r)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let c=i.registerOptions||{};c.documentSelector=c.documentSelector||this._clientOptions.documentSelector;let f={id:i.id,registerOptions:c};try{s.register(f)}catch(d){r(d);return}}n()})}handleUnregistrationRequest(e){return new Promise((n,r)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}n()})}handleApplyWorkspaceEdit(e){let n=e.edit,r=new Map;M.workspace.textDocuments.forEach(s=>r.set(s.uri.toString(),s));let i=!1;if(n.documentChanges){for(let s of n.documentChanges)if(v.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let c=r.get(s.textDocument.uri);if(c&&c.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):pe.asPromise(M.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,n,r){if(n instanceof v.ResponseError){if(n.code===v.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(n.code===v.LSPErrorCodes.ContentModified)return r}throw this.error(`Request ${e.method} failed.`,n),n}makeCancelError(){let e=new Error(Jn.Canceled);return e.name=Jn.Canceled,e}};Ee.BaseLanguageClient=Jn;Jn.Canceled="Canceled"});var Cd=E(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.ColorProviderFeature=void 0;var vi=require("vscode"),kr=we(),Zy=it();function vd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var yd=class extends Zy.TextDocumentFeature{constructor(e){super(e,kr.DocumentColorRequest.type)}fillClientCapabilities(e){vd(vd(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideColorPresentations:(r,i,s)=>{let c=this._client,f=(p,C,R)=>{let S={color:p,textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(C.document),range:c.code2ProtocolConverter.asRange(C.range)};return c.sendRequest(kr.ColorPresentationRequest.type,S,R).then(this.asColorPresentations.bind(this),b=>c.handleFailedRequest(kr.ColorPresentationRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideColorPresentations?d.provideColorPresentations(r,i,s,f):f(r,i,s)},provideDocumentColors:(r,i)=>{let s=this._client,c=(d,p)=>{let C={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d)};return s.sendRequest(kr.DocumentColorRequest.type,C,p).then(this.asColorInformations.bind(this),R=>s.handleFailedRequest(kr.ColorPresentationRequest.type,R,null))},f=s.clientOptions.middleware;return f.provideDocumentColors?f.provideDocumentColors(r,i,c):c(r,i)}};return[vi.languages.registerColorProvider(e.documentSelector,n),n]}asColor(e){return new vi.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(n=>new vi.ColorInformation(this._client.protocol2CodeConverter.asRange(n.range),this.asColor(n.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(n=>{let r=new vi.ColorPresentation(n.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(n.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(n.textEdit),r}):[]}};yi.ColorProviderFeature=yd});var wd=E(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.ImplementationFeature=void 0;var eC=require("vscode"),Jo=we(),tC=it();function Rd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var _d=class extends tC.TextDocumentFeature{constructor(e){super(e,Jo.ImplementationRequest.type)}fillClientCapabilities(e){let n=Rd(Rd(e,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideImplementation:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(Jo.ImplementationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asDefinitionResult,S=>c.handleFailedRequest(Jo.ImplementationRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideImplementation?d.provideImplementation(r,i,s,f):f(r,i,s)}};return[eC.languages.registerImplementationProvider(e.documentSelector,n),n]}};Ci.ImplementationFeature=_d});var Td=E(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.TypeDefinitionFeature=void 0;var nC=require("vscode"),Qo=we(),rC=it();function Ri(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Sd=class extends rC.TextDocumentFeature{constructor(e){super(e,Qo.TypeDefinitionRequest.type)}fillClientCapabilities(e){Ri(Ri(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=Ri(Ri(e,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideTypeDefinition:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(Qo.TypeDefinitionRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asDefinitionResult,S=>c.handleFailedRequest(Qo.TypeDefinitionRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideTypeDefinition?d.provideTypeDefinition(r,i,s,f):f(r,i,s)}};return[nC.languages.registerTypeDefinitionProvider(e.documentSelector,n),n]}};_i.TypeDefinitionFeature=Sd});var Pd=E(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.WorkspaceFoldersFeature=Qn.arrayDiff=void 0;var iC=hi(),wi=require("vscode"),Yo=we();function Zo(t,e){if(t!==void 0)return t[e]}function es(t,e){return t.filter(n=>e.indexOf(n)<0)}Qn.arrayDiff=es;var bd=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Yo.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let n=wi.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?e.workspaceFolders=null:e.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let n=this._client;n.onRequest(Yo.WorkspaceFoldersRequest.type,s=>{let c=()=>{let d=wi.workspace.workspaceFolders;return d===void 0?null:d.map(C=>this.asProtocol(C))},f=n.clientOptions.middleware.workspace;return f&&f.workspaceFolders?f.workspaceFolders(s,c):c(s)});let r=Zo(Zo(Zo(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=iC.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let n=es(this._initialFolders,e),r=es(e,this._initialFolders);(r.length>0||n.length>0)&&this.doSendEvent(r,n)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,n){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};this._client.sendNotification(Yo.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let n=e.id,r=this._client,i=wi.workspace.onDidChangeWorkspaceFolders(s=>{let c=d=>{this.doSendEvent(d.added,d.removed)},f=r.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(s,c):c(s)});this._listeners.set(n,i),this.sendInitialEvent(wi.workspace.workspaceFolders)}unregister(e){let n=this._listeners.get(e);n!==void 0&&(this._listeners.delete(e),n.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Qn.WorkspaceFoldersFeature=bd});var Ed=E(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.FoldingRangeFeature=void 0;var Fr=require("vscode"),Yn=we(),oC=it();function Dd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Nr=class extends oC.TextDocumentFeature{constructor(e){super(e,Yn.FoldingRangeRequest.type)}fillClientCapabilities(e){let n=Dd(Dd(e,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideFoldingRanges:(r,i,s)=>{let c=this._client,f=(p,C,R)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p)};return c.sendRequest(Yn.FoldingRangeRequest.type,S,R).then(Nr.asFoldingRanges,b=>c.handleFailedRequest(Yn.FoldingRangeRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideFoldingRanges?d.provideFoldingRanges(r,i,s,f):f(r,i,s)}};return[Fr.languages.registerFoldingRangeProvider(e.documentSelector,n),n]}static asFoldingRangeKind(e){if(e)switch(e){case Yn.FoldingRangeKind.Comment:return Fr.FoldingRangeKind.Comment;case Yn.FoldingRangeKind.Imports:return Fr.FoldingRangeKind.Imports;case Yn.FoldingRangeKind.Region:return Fr.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(n=>new Fr.FoldingRange(n.startLine,n.endLine,Nr.asFoldingRangeKind(n.kind))):[]}};Si.FoldingRangeFeature=Nr});var xd=E(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DeclarationFeature=void 0;var sC=require("vscode"),ts=we(),aC=it();function qd(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Od=class extends aC.TextDocumentFeature{constructor(e){super(e,ts.DeclarationRequest.type)}fillClientCapabilities(e){let n=qd(qd(e,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideDeclaration:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(ts.DeclarationRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asDeclarationResult,S=>c.handleFailedRequest(ts.DeclarationRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideDeclaration?d.provideDeclaration(r,i,s,f):f(r,i,s)}};return[sC.languages.registerDeclarationProvider(e.documentSelector,n),n]}};Ti.DeclarationFeature=Od});var Nd=E(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.SelectionRangeFeature=void 0;var cC=require("vscode"),ns=we(),uC=it();function kd(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Fd=class extends uC.TextDocumentFeature{constructor(e){super(e,ns.SelectionRangeRequest.type)}fillClientCapabilities(e){let n=kd(kd(e,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideSelectionRanges:(r,i,s)=>{let c=this._client,f=(p,C,R)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(p),positions:c.code2ProtocolConverter.asPositions(C)};return c.sendRequest(ns.SelectionRangeRequest.type,S,R).then(b=>c.protocol2CodeConverter.asSelectionRanges(b),b=>c.handleFailedRequest(ns.SelectionRangeRequest.type,b,null))},d=c.clientOptions.middleware;return d.provideSelectionRanges?d.provideSelectionRanges(r,i,s,f):f(r,i,s)}};return[cC.languages.registerSelectionRangeProvider(e.documentSelector,n),n]}};bi.SelectionRangeFeature=Fd});var Ld=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.ProgressFeature=void 0;var lC=we(),dC=Go();function fC(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var Id=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){fC(e,"window").workDoneProgress=!0}initialize(){let e=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new dC.ProgressPart(this._client,i.token,n))};e.onRequest(lC.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Pi.ProgressFeature=Id});var $d=E(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.CallHierarchyFeature=void 0;var hC=require("vscode"),On=we(),pC=it();function Ad(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Md=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,n,r){let i=this.client,s=this.middleware,c=(f,d,p)=>{let C=i.code2ProtocolConverter.asTextDocumentPositionParams(f,d);return i.sendRequest(On.CallHierarchyPrepareRequest.type,C,p).then(R=>i.protocol2CodeConverter.asCallHierarchyItems(R),R=>i.handleFailedRequest(On.CallHierarchyPrepareRequest.type,R,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,n,r,c):c(e,n,r)}provideCallHierarchyIncomingCalls(e,n){let r=this.client,i=this.middleware,s=(c,f)=>{let d={item:r.code2ProtocolConverter.asCallHierarchyItem(c)};return r.sendRequest(On.CallHierarchyIncomingCallsRequest.type,d,f).then(p=>r.protocol2CodeConverter.asCallHierarchyIncomingCalls(p),p=>r.handleFailedRequest(On.CallHierarchyIncomingCallsRequest.type,p,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,n,s):s(e,n)}provideCallHierarchyOutgoingCalls(e,n){let r=this.client,i=this.middleware,s=(c,f)=>{let d={item:r.code2ProtocolConverter.asCallHierarchyItem(c)};return r.sendRequest(On.CallHierarchyOutgoingCallsRequest.type,d,f).then(p=>r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(p),p=>r.handleFailedRequest(On.CallHierarchyOutgoingCallsRequest.type,p,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,n,s):s(e,n)}},jd=class extends pC.TextDocumentFeature{constructor(e){super(e,On.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Ad(Ad(e,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n=this._client,r=new Md(n);return[hC.languages.registerCallHierarchyProvider(e.documentSelector,r),r]}};Di.CallHierarchyFeature=jd});var Hd=E(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.SemanticTokensFeature=void 0;var Ei=require("vscode"),gC=it(),Y=we(),mC=on();function qi(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Wd=class extends gC.TextDocumentFeature{constructor(e){super(e,Y.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let n=qi(qi(e,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[Y.SemanticTokenTypes.namespace,Y.SemanticTokenTypes.type,Y.SemanticTokenTypes.class,Y.SemanticTokenTypes.enum,Y.SemanticTokenTypes.interface,Y.SemanticTokenTypes.struct,Y.SemanticTokenTypes.typeParameter,Y.SemanticTokenTypes.parameter,Y.SemanticTokenTypes.variable,Y.SemanticTokenTypes.property,Y.SemanticTokenTypes.enumMember,Y.SemanticTokenTypes.event,Y.SemanticTokenTypes.function,Y.SemanticTokenTypes.method,Y.SemanticTokenTypes.macro,Y.SemanticTokenTypes.keyword,Y.SemanticTokenTypes.modifier,Y.SemanticTokenTypes.comment,Y.SemanticTokenTypes.string,Y.SemanticTokenTypes.number,Y.SemanticTokenTypes.regexp,Y.SemanticTokenTypes.operator],n.tokenModifiers=[Y.SemanticTokenModifiers.declaration,Y.SemanticTokenModifiers.definition,Y.SemanticTokenModifiers.readonly,Y.SemanticTokenModifiers.static,Y.SemanticTokenModifiers.deprecated,Y.SemanticTokenModifiers.abstract,Y.SemanticTokenModifiers.async,Y.SemanticTokenModifiers.modification,Y.SemanticTokenModifiers.documentation,Y.SemanticTokenModifiers.defaultLibrary],n.formats=[Y.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,qi(qi(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,n){this._client.onRequest(Y.SemanticTokensRefreshRequest.type,async()=>{for(let c of this.getAllProviders())c.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(n,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let n=mC.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Ei.EventEmitter,s=n?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(R,S)=>{let b=this._client,F=b.clientOptions.middleware,I=(A,k)=>{let O={textDocument:b.code2ProtocolConverter.asTextDocumentIdentifier(A)};return b.sendRequest(Y.SemanticTokensRequest.type,O,k).then(x=>b.protocol2CodeConverter.asSemanticTokens(x),x=>b.handleFailedRequest(Y.SemanticTokensRequest.type,x,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,S,I):I(R,S)},provideDocumentSemanticTokensEdits:r?(R,S,b)=>{let F=this._client,I=F.clientOptions.middleware,A=(k,O,x)=>{let D={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(k),previousResultId:O};return F.sendRequest(Y.SemanticTokensDeltaRequest.type,D,x).then(z=>Y.SemanticTokens.is(z)?F.protocol2CodeConverter.asSemanticTokens(z):F.protocol2CodeConverter.asSemanticTokensEdits(z),z=>F.handleFailedRequest(Y.SemanticTokensDeltaRequest.type,z,null))};return I.provideDocumentSemanticTokensEdits?I.provideDocumentSemanticTokensEdits(R,S,b,A):A(R,S,b)}:void 0}:void 0,f=e.range===!0?{provideDocumentRangeSemanticTokens:(R,S,b)=>{let F=this._client,I=F.clientOptions.middleware,A=(k,O,x)=>{let D={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(k),range:F.code2ProtocolConverter.asRange(O)};return F.sendRequest(Y.SemanticTokensRangeRequest.type,D,x).then(z=>F.protocol2CodeConverter.asSemanticTokens(z),z=>F.handleFailedRequest(Y.SemanticTokensRangeRequest.type,z,null))};return I.provideDocumentRangeSemanticTokens?I.provideDocumentRangeSemanticTokens(R,S,b,A):A(R,S,b)}}:void 0,d=[],C=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&d.push(Ei.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,C)),f!==void 0&&d.push(Ei.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,f,C)),[new Ei.Disposable(()=>d.forEach(R=>R.dispose())),{range:f,full:s,onDidChangeSemanticTokensEmitter:i}]}};Oi.SemanticTokensFeature=Wd});var zd=E((Sw,Kd)=>{Kd.exports=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=e(t[r],r);vC(i)?n.push.apply(n,i):n.push(i)}return n};var vC=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Vd=E((Tw,Xd)=>{"use strict";Xd.exports=Ud;function Ud(t,e,n){t instanceof RegExp&&(t=Bd(t,n)),e instanceof RegExp&&(e=Bd(e,n));var r=Gd(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function Bd(t,e){var n=e.match(t);return n?n[0]:null}Ud.range=Gd;function Gd(t,e,n){var r,i,s,c,f,d=n.indexOf(t),p=n.indexOf(e,d+1),C=d;if(d>=0&&p>0){if(t===e)return[d,p];for(r=[],s=n.length;C>=0&&!f;)C==d?(r.push(C),d=n.indexOf(t,C+1)):r.length==1?f=[r.pop(),p]:(i=r.pop(),i<s&&(s=i,c=p),p=n.indexOf(e,C+1)),C=d<p&&d>=0?d:p;r.length&&(f=[s,c])}return f}});var rf=E((bw,nf)=>{var yC=zd(),Jd=Vd();nf.exports=_C;var Qd="\0SLASH"+Math.random()+"\0",Yd="\0OPEN"+Math.random()+"\0",rs="\0CLOSE"+Math.random()+"\0",Zd="\0COMMA"+Math.random()+"\0",ef="\0PERIOD"+Math.random()+"\0";function is(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function CC(t){return t.split("\\\\").join(Qd).split("\\{").join(Yd).split("\\}").join(rs).split("\\,").join(Zd).split("\\.").join(ef)}function RC(t){return t.split(Qd).join("\\").split(Yd).join("{").split(rs).join("}").split(Zd).join(",").split(ef).join(".")}function tf(t){if(!t)return[""];var e=[],n=Jd("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,c=r.split(",");c[c.length-1]+="{"+i+"}";var f=tf(s);return s.length&&(c[c.length-1]+=f.shift(),c.push.apply(c,f)),e.push.apply(e,c),e}function _C(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Zn(CC(t),!0).map(RC)):[]}function wC(t){return"{"+t+"}"}function SC(t){return/^-?0\d/.test(t)}function TC(t,e){return t<=e}function bC(t,e){return t>=e}function Zn(t,e){var n=[],r=Jd("{","}",t);if(!r||/\$$/.test(r.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=i||s,f=r.body.indexOf(",")>=0;if(!c&&!f)return r.post.match(/,.*\}/)?(t=r.pre+"{"+r.body+rs+r.post,Zn(t)):[t];var d;if(c)d=r.body.split(/\.\./);else if(d=tf(r.body),d.length===1&&(d=Zn(d[0],!1).map(wC),d.length===1)){var C=r.post.length?Zn(r.post,!1):[""];return C.map(function(Se){return r.pre+d[0]+Se})}var p=r.pre,C=r.post.length?Zn(r.post,!1):[""],R;if(c){var S=is(d[0]),b=is(d[1]),F=Math.max(d[0].length,d[1].length),I=d.length==3?Math.abs(is(d[2])):1,A=TC,k=b<S;k&&(I*=-1,A=bC);var O=d.some(SC);R=[];for(var x=S;A(x,b);x+=I){var D;if(s)D=String.fromCharCode(x),D==="\\"&&(D="");else if(D=String(x),O){var z=F-D.length;if(z>0){var oe=new Array(z+1).join("0");x<0?D="-"+oe+D.slice(1):D=oe+D}}R.push(D)}}else R=yC(d,function(ae){return Zn(ae,!1)});for(var G=0;G<R.length;G++)for(var re=0;re<C.length;re++){var se=p+R[G]+C[re];(!e||c||se)&&n.push(se)}return n}});var cs=E((Pw,uf)=>{uf.exports=ot;ot.Minimatch=$e;var Ir=function(){try{return require("path")}catch{}}()||{sep:"/"};ot.sep=Ir.sep;var os=ot.GLOBSTAR=$e.GLOBSTAR={},PC=rf(),of={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ss="[^/]",as=ss+"*?",DC="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",EC="(?:(?!(?:\\/|^)\\.).)*?",sf=qC("().*{}+?[]^$\\!");function qC(t){return t.split("").reduce(function(e,n){return e[n]=!0,e},{})}var af=/\/+/;ot.filter=OC;function OC(t,e){return e=e||{},function(n,r,i){return ot(n,t,e)}}function ln(t,e){e=e||{};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]}),Object.keys(e).forEach(function(r){n[r]=e[r]}),n}ot.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return ot;var e=ot,n=function(i,s,c){return e(i,s,ln(t,c))};return n.Minimatch=function(i,s){return new e.Minimatch(i,ln(t,s))},n.Minimatch.defaults=function(i){return e.defaults(ln(t,i)).Minimatch},n.filter=function(i,s){return e.filter(i,ln(t,s))},n.defaults=function(i){return e.defaults(ln(t,i))},n.makeRe=function(i,s){return e.makeRe(i,ln(t,s))},n.braceExpand=function(i,s){return e.braceExpand(i,ln(t,s))},n.match=function(r,i,s){return e.match(r,i,ln(t,s))},n};$e.defaults=function(t){return ot.defaults(t).Minimatch};function ot(t,e,n){return xi(e),n||(n={}),!n.nocomment&&e.charAt(0)==="#"?!1:new $e(e,n).match(t)}function $e(t,e){if(!(this instanceof $e))return new $e(t,e);xi(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&Ir.sep!=="/"&&(t=t.split(Ir.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}$e.prototype.debug=function(){};$e.prototype.make=xC;function xC(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(r){return r.split(af)}),this.debug(this.pattern,n),n=n.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}$e.prototype.parseNegate=kC;function kC(){var t=this.pattern,e=!1,n=this.options,r=0;if(!n.nonegate){for(var i=0,s=t.length;i<s&&t.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}}ot.braceExpand=function(t,e){return cf(t,e)};$e.prototype.braceExpand=cf;function cf(t,e){return e||(this instanceof $e?e=this.options:e={}),t=typeof t=="undefined"?this.pattern:t,xi(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:PC(t)}var FC=1024*64,xi=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>FC)throw new TypeError("pattern is too long")};$e.prototype.parse=NC;var ki={};function NC(t,e){xi(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return os;if(t==="")return"";var r="",i=!!n.nocase,s=!1,c=[],f=[],d,p=!1,C=-1,R=-1,S=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function F(){if(d){switch(d){case"*":r+=as,i=!0;break;case"?":r+=ss,i=!0;break;default:r+="\\"+d;break}b.debug("clearStateChar %j %j",d,r),d=!1}}for(var I=0,A=t.length,k;I<A&&(k=t.charAt(I));I++){if(this.debug("%s	%s %s %j",t,I,r,k),s&&sf[k]){r+="\\"+k,s=!1;continue}switch(k){case"/":return!1;case"\\":F(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,I,r,k),p){this.debug("  in class"),k==="!"&&I===R+1&&(k="^"),r+=k;continue}b.debug("call clearStateChar %j",d),F(),d=k,n.noext&&F();continue;case"(":if(p){r+="(";continue}if(!d){r+="\\(";continue}c.push({type:d,start:I-1,reStart:r.length,open:of[d].open,close:of[d].close}),r+=d==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",d,r),d=!1;continue;case")":if(p||!c.length){r+="\\)";continue}F(),i=!0;var O=c.pop();r+=O.close,O.type==="!"&&f.push(O),O.reEnd=r.length;continue;case"|":if(p||!c.length||s){r+="\\|",s=!1;continue}F(),r+="|";continue;case"[":if(F(),p){r+="\\"+k;continue}p=!0,R=I,C=r.length,r+=k;continue;case"]":if(I===R+1||!p){r+="\\"+k,s=!1;continue}var x=t.substring(R+1,I);try{RegExp("["+x+"]")}catch{var D=this.parse(x,ki);r=r.substr(0,C)+"\\["+D[0]+"\\]",i=i||D[1],p=!1;continue}i=!0,p=!1,r+=k;continue;default:F(),s?s=!1:sf[k]&&!(k==="^"&&p)&&(r+="\\"),r+=k}}for(p&&(x=t.substr(R+1),D=this.parse(x,ki),r=r.substr(0,C)+"\\["+D[0],i=i||D[1]),O=c.pop();O;O=c.pop()){var z=r.slice(O.reStart+O.open.length);this.debug("setting tail",r,O),z=z.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(rt,st,Rt){return Rt||(Rt="\\"),st+st+Rt+"|"}),this.debug(`tail=%j
   %s`,z,z,O,r);var oe=O.type==="*"?as:O.type==="?"?ss:"\\"+O.type;i=!0,r=r.slice(0,O.reStart)+oe+"\\("+z}F(),s&&(r+="\\\\");var G=!1;switch(r.charAt(0)){case"[":case".":case"(":G=!0}for(var re=f.length-1;re>-1;re--){var se=f[re],ae=r.slice(0,se.reStart),Se=r.slice(se.reStart,se.reEnd-8),Ne=r.slice(se.reEnd-8,se.reEnd),Ue=r.slice(se.reEnd);Ne+=Ue;var Ye=ae.split("(").length-1,Be=Ue;for(I=0;I<Ye;I++)Be=Be.replace(/\)[+*?]?/,"");Ue=Be;var yt="";Ue===""&&e!==ki&&(yt="$");var me=ae+Se+Ue+yt+Ne;r=me}if(r!==""&&i&&(r="(?=.)"+r),G&&(r=S+r),e===ki)return[r,i];if(!i)return LC(t);var Ct=n.nocase?"i":"";try{var Fe=new RegExp("^"+r+"$",Ct)}catch{return new RegExp("$.")}return Fe._glob=t,Fe._src=r,Fe}ot.makeRe=function(t,e){return new $e(t,e||{}).makeRe()};$e.prototype.makeRe=IC;function IC(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,n=e.noglobstar?as:e.dot?DC:EC,r=e.nocase?"i":"",i=t.map(function(s){return s.map(function(c){return c===os?n:typeof c=="string"?AC(c):c._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}ot.match=function(t,e,n){n=n||{};var r=new $e(e,n);return t=t.filter(function(i){return r.match(i)}),r.options.nonull&&!t.length&&t.push(e),t};$e.prototype.match=function(e,n){if(typeof n=="undefined"&&(n=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;var r=this.options;Ir.sep!=="/"&&(e=e.split(Ir.sep).join("/")),e=e.split(af),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s,c;for(c=e.length-1;c>=0&&(s=e[c],!s);c--);for(c=0;c<i.length;c++){var f=i[c],d=e;r.matchBase&&f.length===1&&(d=[s]);var p=this.matchOne(d,f,n);if(p)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};$e.prototype.matchOne=function(t,e,n){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,s=0,c=t.length,f=e.length;i<c&&s<f;i++,s++){this.debug("matchOne loop");var d=e[s],p=t[i];if(this.debug(e,d,p),d===!1)return!1;if(d===os){this.debug("GLOBSTAR",[e,d,p]);var C=i,R=s+1;if(R===f){for(this.debug("** at the end");i<c;i++)if(t[i]==="."||t[i]===".."||!r.dot&&t[i].charAt(0)===".")return!1;return!0}for(;C<c;){var S=t[C];if(this.debug(`
globstar while`,t,C,e,R,S),this.matchOne(t.slice(C),e.slice(R),n))return this.debug("globstar found match!",C,c,S),!0;if(S==="."||S===".."||!r.dot&&S.charAt(0)==="."){this.debug("dot detected!",t,C,e,R);break}this.debug("globstar swallow a segment, and continue"),C++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,C,e,R),C===c))}var b;if(typeof d=="string"?(b=p===d,this.debug("string match",d,p,b)):(b=p.match(d),this.debug("pattern match",d,p,b)),!b)return!1}if(i===c&&s===f)return!0;if(i===c)return n;if(s===f)return i===c-1&&t[i]==="";throw new Error("wtf?")};function LC(t){return t.replace(/\\(.)/g,"$1")}function AC(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var yf=E(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.WillDeleteFilesFeature=nt.WillRenameFilesFeature=nt.WillCreateFilesFeature=nt.DidDeleteFilesFeature=nt.DidRenameFilesFeature=nt.DidCreateFilesFeature=void 0;var Ft=require("vscode"),MC=cs(),Bt=we(),jC=hi();function lf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function $C(t,e){return t[e]}function df(t,e,n){t[e]=n}var xn=class{constructor(e,n,r,i,s){this._filters=new Map,this._client=e,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let n=lf(lf(e,"workspace"),"fileOperations");df(n,"dynamicRegistration",!0),df(n,this._clientCapability,!0)}initialize(e){var n;let r=(n=e.workspace)===null||n===void 0?void 0:n.fileOperations,i=r!==void 0?$C(r,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:jC.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let n=e.registerOptions.filters.map(r=>{let i=new MC.Minimatch(r.pattern.glob,xn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,n)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,n){let r=await Promise.all(e.files.map(async s=>{let c=n(s),f=c.fsPath.replace(/\\/g,"/");for(let d of this._filters.values())for(let p of d)if(!(p.scheme!==void 0&&p.scheme!==c.scheme)){if(p.matcher.match(f)){if(p.kind===void 0)return!0;let C=await xn.getFileType(c);if(C===void 0)return this._client.error(`Failed to determine file type for ${c.toString()}.`),!0;if(C===Ft.FileType.File&&p.kind===Bt.FileOperationPatternKind.file||C===Ft.FileType.Directory&&p.kind===Bt.FileOperationPatternKind.folder)return!0}else if(p.kind===Bt.FileOperationPatternKind.folder&&await xn.getFileType(c)===Ft.FileType.Directory&&p.matcher.match(`${f}/`))return!0}return!1})),i=e.files.filter((s,c)=>r[c]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await Ft.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Fi=class extends xn{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s);this._notificationType=r,this._accessUri=c,this._createParams=f}async send(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(n,r)}}},ff=class extends Fi{constructor(e){super(e,Ft.workspace.onDidCreateFiles,Bt.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,n):n(e)}};nt.DidCreateFilesFeature=ff;var hf=class extends Fi{constructor(e){super(e,Ft.workspace.onDidRenameFiles,Bt.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,n):n(e)}};nt.DidRenameFilesFeature=hf;var pf=class extends Fi{constructor(e){super(e,Ft.workspace.onDidDeleteFiles,Bt.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,n):n(e)}};nt.DidDeleteFilesFeature=pf;var Ni=class extends xn{constructor(e,n,r,i,s,c,f){super(e,n,r,i,s);this._requestType=r,this._accessUri=c,this._createParams=f}async send(e){let n=this.waitUntil(e);e.waitUntil(n)}async waitUntil(e){let n=await this.filter(e,this._accessUri);if(n.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}},gf=class extends Ni{constructor(e){super(e,Ft.workspace.onWillCreateFiles,Bt.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,n):n(e)}};nt.WillCreateFilesFeature=gf;var mf=class extends Ni{constructor(e){super(e,Ft.workspace.onWillRenameFiles,Bt.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,n):n(e)}};nt.WillRenameFilesFeature=mf;var vf=class extends Ni{constructor(e){super(e,Ft.workspace.onWillDeleteFiles,Bt.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,n){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,n):n(e)}};nt.WillDeleteFilesFeature=vf});var _f=E(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.LinkedEditingFeature=void 0;var WC=require("vscode"),us=we(),HC=it();function Cf(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Rf=class extends HC.TextDocumentFeature{constructor(e){super(e,us.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let n=Cf(Cf(e,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(e,n){let[r,i]=this.getRegistration(n,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let n={provideLinkedEditingRanges:(r,i,s)=>{let c=this._client,f=(p,C,R)=>c.sendRequest(us.LinkedEditingRangeRequest.type,c.code2ProtocolConverter.asTextDocumentPositionParams(p,C),R).then(c.protocol2CodeConverter.asLinkedEditingRanges,S=>c.handleFailedRequest(us.LinkedEditingRangeRequest.type,S,null)),d=c.clientOptions.middleware;return d.provideLinkedEditingRange?d.provideLinkedEditingRange(r,i,s,f):f(r,i,s)}};return[WC.languages.registerLinkedEditingRangeProvider(e.documentSelector,n),n]}};Ii.LinkedEditingFeature=Rf});var ls=E(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.ProposedFeatures=kn.CommonLanguageClient=void 0;var KC=it(),zC=Cd(),UC=Fo(),BC=wd(),GC=Td(),XC=Pd(),VC=Ed(),JC=xd(),QC=Nd(),YC=Ld(),ZC=$d(),eR=Hd(),er=yf(),tR=_f(),wf=class extends KC.BaseLanguageClient{constructor(e,n,r){super(e,n,r)}registerProposedFeatures(){this.registerFeatures(Sf.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new UC.ConfigurationFeature(this)),this.registerFeature(new GC.TypeDefinitionFeature(this)),this.registerFeature(new BC.ImplementationFeature(this)),this.registerFeature(new zC.ColorProviderFeature(this)),this.registerFeature(new XC.WorkspaceFoldersFeature(this)),this.registerFeature(new VC.FoldingRangeFeature(this)),this.registerFeature(new JC.DeclarationFeature(this)),this.registerFeature(new QC.SelectionRangeFeature(this)),this.registerFeature(new YC.ProgressFeature(this)),this.registerFeature(new ZC.CallHierarchyFeature(this)),this.registerFeature(new eR.SemanticTokensFeature(this)),this.registerFeature(new tR.LinkedEditingFeature(this)),this.registerFeature(new er.DidCreateFilesFeature(this)),this.registerFeature(new er.DidRenameFilesFeature(this)),this.registerFeature(new er.DidDeleteFilesFeature(this)),this.registerFeature(new er.WillCreateFilesFeature(this)),this.registerFeature(new er.WillRenameFilesFeature(this)),this.registerFeature(new er.WillDeleteFilesFeature(this))}};kn.CommonLanguageClient=wf;var Sf;(function(t){function e(n){return[]}t.createAll=e})(Sf=kn.ProposedFeatures||(kn.ProposedFeatures={}))});var bf=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.terminate=void 0;var Tf=require("child_process"),nR=require("path"),rR=process.platform==="win32",iR=process.platform==="darwin",oR=process.platform==="linux";function sR(t,e){if(rR)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Tf.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(oR||iR)try{var n=nR.join(__dirname,"terminateProcess.sh"),r=Tf.spawnSync(n,[t.pid.toString()]);return!r.error}catch{return!1}else return t.kill("SIGKILL"),!0}Li.terminate=sR});var ds=E((xw,Pf)=>{"use strict";Pf.exports=we()});var Df=E(Gt=>{"use strict";var aR=Gt&&Gt.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),fs=Gt&&Gt.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&aR(e,t,n)};Object.defineProperty(Gt,"__esModule",{value:!0});fs(we(),Gt);fs(it(),Gt);fs(ls(),Gt)});var Ff=E(Qe=>{"use strict";var cR=Qe&&Qe.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ef=Qe&&Qe.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cR(e,t,n)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.SettingMonitor=Qe.LanguageClient=Qe.TransportKind=void 0;var Fn=require("child_process"),hs=require("fs"),ps=require("path"),qf=Dc(),dn=require("vscode"),xe=on(),uR=ls(),lR=it(),dR=bf(),ke=ds();Ef(ds(),Qe);Ef(Df(),Qe);var Of="^1.52.0",gs;(function(t){function e(n){return xe.string(n.command)}t.is=e})(gs||(gs={}));var We;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(We=Qe.TransportKind||(Qe.TransportKind={}));var tr;(function(t){function e(n){let r=n;return r&&r.kind===We.socket&&xe.number(r.port)}t.isSocket=e})(tr||(tr={}));var ms;(function(t){function e(n){return xe.string(n.module)}t.is=e})(ms||(ms={}));var vs;(function(t){function e(n){let r=n;return r&&r.writer!==void 0&&r.reader!==void 0}t.is=e})(vs||(vs={}));var ys;(function(t){function e(n){let r=n;return r&&r.process!==void 0&&typeof r.detached=="boolean"}t.is=e})(ys||(ys={}));var xf=class extends uR.CommonLanguageClient{constructor(e,n,r,i,s){let c,f,d,p,C;xe.string(n)?(c=e,f=n,d=r,p=i,C=!!s):(c=e.toLowerCase(),f=e,d=n,p=r,C=i),C===void 0&&(C=!1);super(c,f,p);this._serverOptions=d,this._forceDebug=C;try{this.checkVersion()}catch(R){throw xe.string(R.message)&&this.outputChannel.appendLine(R.message),R}}checkVersion(){let e=qf.parse(dn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${dn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!qf.satisfies(e,Of))throw new Error(`The language client requires VS Code version ${Of} but received version ${dn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),dR.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function n(C,R){if(!C&&!R)return;let S=Object.create(null);return Object.keys(process.env).forEach(b=>S[b]=process.env[b]),R&&(S.ELECTRON_RUN_AS_NODE="1",S.ELECTRON_NO_ASAR="1"),C&&Object.keys(C).forEach(b=>S[b]=C[b]),S}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let C=process.execArgv;return C?C.some(R=>r.some(S=>R.startsWith(S))||i.some(S=>R===S)):!1}function c(C){if(C.stdin===null||C.stdout===null||C.stderr===null)throw new Error("Process created without stdio streams")}let f=this._serverOptions;if(xe.func(f))return f().then(C=>{if(lR.MessageTransports.is(C))return this._isDetached=!!C.detached,C;if(vs.is(C))return this._isDetached=!!C.detached,{reader:new ke.StreamMessageReader(C.reader),writer:new ke.StreamMessageWriter(C.writer)};{let R;return ys.is(C)?(R=C.process,this._isDetached=C.detached):(R=C,this._isDetached=!1),R.stderr.on("data",S=>this.outputChannel.append(xe.string(S)?S:S.toString(e))),{reader:new ke.StreamMessageReader(R.stdout),writer:new ke.StreamMessageWriter(R.stdin)}}});let d,p=f;return p.run||p.debug?this._forceDebug||s()?d=p.debug:d=p.run:d=f,this._getServerWorkingDir(d.options).then(C=>{if(ms.is(d)&&d.module){let R=d,S=R.transport||We.stdio;if(R.runtime){let b=[],F=R.options||Object.create(null);F.execArgv&&F.execArgv.forEach(O=>b.push(O)),b.push(R.module),R.args&&R.args.forEach(O=>b.push(O));let I=Object.create(null);I.cwd=C,I.env=n(F.env,!1);let A=this._getRuntimePath(R.runtime,C),k;if(S===We.ipc?(I.stdio=[null,null,null,"ipc"],b.push("--node-ipc")):S===We.stdio?b.push("--stdio"):S===We.pipe?(k=ke.generateRandomPipeName(),b.push(`--pipe=${k}`)):tr.isSocket(S)&&b.push(`--socket=${S.port}`),b.push(`--clientProcessId=${process.pid.toString()}`),S===We.ipc||S===We.stdio){let O=Fn.spawn(A,b,I);return!O||!O.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(xe.string(x)?x:x.toString(e))),S===We.ipc?(O.stdout.on("data",x=>this.outputChannel.append(xe.string(x)?x:x.toString(e))),Promise.resolve({reader:new ke.IPCMessageReader(O),writer:new ke.IPCMessageWriter(O)})):Promise.resolve({reader:new ke.StreamMessageReader(O.stdout),writer:new ke.StreamMessageWriter(O.stdin)}))}else{if(S===We.pipe)return ke.createClientPipeTransport(k).then(O=>{let x=Fn.spawn(A,b,I);return!x||!x.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=x,x.stderr.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),x.stdout.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),O.onConnected().then(D=>({reader:D[0],writer:D[1]})))});if(tr.isSocket(S))return ke.createClientSocketTransport(S.port).then(O=>{let x=Fn.spawn(A,b,I);return!x||!x.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=x,x.stderr.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),x.stdout.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),O.onConnected().then(D=>({reader:D[0],writer:D[1]})))})}}else{let b;return new Promise((F,I)=>{let A=R.args&&R.args.slice()||[];S===We.ipc?A.push("--node-ipc"):S===We.stdio?A.push("--stdio"):S===We.pipe?(b=ke.generateRandomPipeName(),A.push(`--pipe=${b}`)):tr.isSocket(S)&&A.push(`--socket=${S.port}`),A.push(`--clientProcessId=${process.pid.toString()}`);let k=R.options||Object.create(null);if(k.env=n(k.env,!0),k.execArgv=k.execArgv||[],k.cwd=C,k.silent=!0,S===We.ipc||S===We.stdio){let O=Fn.fork(R.module,A||[],k);c(O),this._serverProcess=O,O.stderr.on("data",x=>this.outputChannel.append(xe.string(x)?x:x.toString(e))),S===We.ipc?(O.stdout.on("data",x=>this.outputChannel.append(xe.string(x)?x:x.toString(e))),F({reader:new ke.IPCMessageReader(this._serverProcess),writer:new ke.IPCMessageWriter(this._serverProcess)})):F({reader:new ke.StreamMessageReader(O.stdout),writer:new ke.StreamMessageWriter(O.stdin)})}else S===We.pipe?ke.createClientPipeTransport(b).then(O=>{let x=Fn.fork(R.module,A||[],k);c(x),this._serverProcess=x,x.stderr.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),x.stdout.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),O.onConnected().then(D=>{F({reader:D[0],writer:D[1]})})}):tr.isSocket(S)&&ke.createClientSocketTransport(S.port).then(O=>{let x=Fn.fork(R.module,A||[],k);c(x),this._serverProcess=x,x.stderr.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),x.stdout.on("data",D=>this.outputChannel.append(xe.string(D)?D:D.toString(e))),O.onConnected().then(D=>{F({reader:D[0],writer:D[1]})})})})}}else if(gs.is(d)&&d.command){let R=d,S=R.args||[],b=Object.assign({},R.options);b.cwd=b.cwd||C;let F=Fn.spawn(R.command,S,b);return!F||!F.pid?Promise.reject(`Launching server using command ${R.command} failed.`):(F.stderr.on("data",I=>this.outputChannel.append(xe.string(I)?I:I.toString(e))),this._serverProcess=F,this._isDetached=!!b.detached,Promise.resolve({reader:new ke.StreamMessageReader(F.stdout),writer:new ke.StreamMessageWriter(F.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(f,null,4)))})}_getRuntimePath(e,n){if(ps.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=ps.join(r,e);if(hs.existsSync(i))return i}if(n!==void 0){let i=ps.join(n,e);if(hs.existsSync(i))return i}return e}_mainGetRootPath(){let e=dn.workspace.workspaceFolders;if(!e||e.length===0)return;let n=e[0];if(n.uri.scheme==="file")return n.uri.fsPath}_getServerWorkingDir(e){let n=e&&e.cwd;return n||(n=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),n?new Promise(r=>{hs.lstat(n,(i,s)=>{r(!i&&s.isDirectory()?n:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let n;try{n=JSON.parse(e)}catch{}return n===void 0||typeof n.locale!="string"?"en":n.locale}};Qe.LanguageClient=xf;var kf=class{constructor(e,n){this._client=e,this._setting=n,this._listeners=[]}start(){return dn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new dn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),n=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?dn.workspace.getConfiguration(n).get(r,!1):dn.workspace.getConfiguration(n);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Qe.SettingMonitor=kf});var If=E((Nw,Nf)=>{"use strict";Nf.exports=Ff()});var Mf=E((Mw,Af)=>{"use strict";Af.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var wR={};nh(wR,{activate:()=>RR,deactivate:()=>_R});var nr=Mr(require("path")),L=require("vscode"),vt=Mr(If());var fR=["aspnetcorerazor","astro","astro-markdown","blade","django-html","edge","ejs","erb","gohtml","GoHTML","gohtmltmpl","haml","handlebars","hbs","html","HTML (Eex)","HTML (EEx)","html-eex","jade","leaf","liquid","markdown","mdx","mustache","njk","nunjucks","phoenix-heex","php","razor","slim","twig"],hR=["css","less","postcss","sass","scss","stylus","sugarss","tailwindcss"],pR=["javascript","javascriptreact","reason","rescript","typescript","typescriptreact"],gR=["vue","svelte"],Cs=[...hR,...fR,...pR,...gR];function Rs(t){return Object.prototype.toString.call(t)==="[object Object]"}function _s(t){return t.filter((e,n,r)=>r.indexOf(e)===n)}function Lf(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;let n=t.concat().sort(),r=e.concat().sort();for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0}var jf=Mr(Mf()),$f=Mr(cs()),mR=Object.keys(jf.default),Wf="tailwindcss-intellisense",Hf="Tailwind CSS IntelliSense",Kf="{tailwind,tailwind.config}.{js,cjs}",Xt=new Map,Lr=new Map,ws=new Set,Ai;function vR(){return Ai===void 0&&(Ai=L.workspace.workspaceFolders?L.workspace.workspaceFolders.map(t=>{let e=t.uri.toString();return e.charAt(e.length-1)!=="/"&&(e=e+"/"),e}).sort((t,e)=>t.length-e.length):[]),Ai}function zf(t){let e=vR();for(let n of e){let r=t.uri.toString();if(r.charAt(r.length-1)!=="/"&&(r=r+"/"),r.startsWith(n))return L.workspace.getWorkspaceFolder(L.Uri.parse(n))}return t}function Ss(t){let e=L.workspace.getConfiguration("tailwindCSS",t).includeLanguages;return Rs(e)?e:{}}function yR(t){return Object.entries(L.workspace.getConfiguration("files",t).get("exclude")).filter(([,e])=>e===!0).map(([e])=>e).filter(Boolean)}function Ts(t){return[...yR(t),...L.workspace.getConfiguration("tailwindCSS",t).get("files.exclude").filter(Boolean)]}function CR(t,e){let n=Ts(e);for(let r of n)if((0,$f.default)(t,nr.join(e.uri.fsPath,r)))return!0;return!1}function Uf(t,e){return ji(Mi({},t),{files:ji(Mi({},t.files),{exclude:Ts(e)})})}function RR(t){return nn(this,null,function*(){let e=t.asAbsolutePath(nr.join("dist","server.js")),n=nr.join("dist","tailwindServer.js");try{yield L.workspace.fs.stat(L.Uri.joinPath(t.extensionUri,n)),e=t.asAbsolutePath(n)}catch(p){}let r;t.subscriptions.push(L.commands.registerCommand("tailwindCSS.showOutput",()=>{r&&r.show()}));let i=L.workspace.createFileSystemWatcher(`**/${Kf}`,!1,!0,!0);i.onDidCreate(p=>{let C=L.workspace.getWorkspaceFolder(p);!C||CR(p.fsPath,C)||(C=zf(C),f(C))}),t.subscriptions.push(i),t.subscriptions.push(L.workspace.onDidChangeConfiguration(p=>{[...Xt].forEach(([C,R])=>{let S=L.workspace.getWorkspaceFolder(L.Uri.parse(C)),b=!1;if(p.affectsConfiguration("tailwindCSS.includeLanguages",S)){let F=Ss(S);if(F){let I=Object.keys(F),A=_s([...Cs,...I]);Lf(A,Lr.get(S.uri.toString()))||(Lr.set(S.uri.toString(),A),b=!0)}}p.affectsConfiguration("tailwindCSS.experimental.configFile",S)&&(b=!0),b&&R&&(Xt.delete(S.uri.toString()),R.stop(),f(S))})}));let s=!1;function c(){return nn(this,null,function*(){if(s)return;s=!0;let p=t.asAbsolutePath(nr.join("dist","cssServer.js")),C=nr.join("dist","tailwindModeServer.js");try{yield L.workspace.fs.stat(L.Uri.joinPath(t.extensionUri,C)),p=t.asAbsolutePath(C)}catch(b){}let R=new vt.LanguageClient("tailwindcss-intellisense-css","Tailwind CSS",{run:{module:p,transport:vt.TransportKind.ipc},debug:{module:p,transport:vt.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=6051"]}}},{documentSelector:[{language:"tailwindcss"}],outputChannelName:"Tailwind CSS Language Mode",synchronize:{configurationSection:["css"]},middleware:{provideCompletionItem(b,F,I,A,k){function O(G){let re=G.range;re instanceof L.Range&&re.end.isAfter(F)&&re.start.isBeforeOrEqual(F)&&(G.range={inserting:new L.Range(re.start,F),replacing:re})}function x(G){G.kind===L.CompletionItemKind.Color&&(G.label={label:G.label,description:G.documentation})}function D(G){return G&&((Array.isArray(G)?G:G.items).forEach(O),(Array.isArray(G)?G:G.items).forEach(x)),G}let z=G=>G&&G.then,oe=k(b,F,I,A);return z(oe)?oe.then(D):D(oe)}}});R.onReady().then(()=>{t.subscriptions.push(S())}),t.subscriptions.push(R.start());function S(){let b=/^(\s*)(\/(\*\s*(#\w*)?)?)?$/;return L.languages.registerCompletionItemProvider(["tailwindcss"],{provideCompletionItems(F,I){let k=F.getText(new L.Range(new L.Position(I.line,0),I)).match(b);if(k){let O=new L.Range(new L.Position(I.line,k[1].length),I),x=new L.CompletionItem("#region",L.CompletionItemKind.Snippet);x.range=O,L.TextEdit.replace(O,"/* #region */"),x.insertText=new L.SnippetString("/* #region $1*/"),x.documentation="Folding Region Start",x.filterText=k[2],x.sortText="za";let D=new L.CompletionItem("#endregion",L.CompletionItemKind.Snippet);return D.range=O,D.insertText="/* #endregion */",D.documentation="Folding Region End",D.sortText="zb",D.filterText=k[2],[x,D]}return null}})}})}function f(p){if(Xt.has(p.uri.toString()))return;let C;function R(){C&&(C.dispose(),C=void 0)}t.subscriptions.push({dispose(){C&&C.dispose()}}),Xt.set(p.uri.toString(),null),Lr.has(p.uri.toString())||Lr.set(p.uri.toString(),_s([...Cs,...Object.keys(Ss(p))])),r||(r=L.window.createOutputChannel(Hf),t.subscriptions.push(r),L.commands.executeCommand("setContext","tailwindCSS.hasOutputChannel",!0));let b={editor:L.workspace.getConfiguration("editor",p),tailwindCSS:Uf(L.workspace.getConfiguration("tailwindCSS",p),p)}.tailwindCSS.get("inspectPort"),F={run:{module:e,transport:vt.TransportKind.ipc,options:{execArgv:b===null?[]:[`--inspect=${b}`]}},debug:{module:e,transport:vt.TransportKind.ipc,options:{execArgv:["--nolazy",`--inspect=${6011+Xt.size}`]}}},I={documentSelector:Lr.get(p.uri.toString()).map(k=>({scheme:"file",language:k,pattern:`${p.uri.fsPath.replace(/[\[\]\{\}]/g,"?")}/**/*`})),diagnosticCollectionName:Wf,workspaceFolder:p,outputChannel:r,revealOutputChannelOn:vt.RevealOutputChannelOn.Never,middleware:{resolveCompletionItem(k,O,x){return nn(this,null,function*(){var oe;let D=yield x(k,O),z=L.window.activeTextEditor.selections;if(z.length>1&&((oe=D.additionalTextEdits)==null?void 0:oe.length)>0){let G=z[0].start.character-D.additionalTextEdits[0].range.start.character,re=D.additionalTextEdits[0].range.end.character-D.additionalTextEdits[0].range.start.character,se=z.map(ae=>new L.Range(new L.Position(ae.start.line,ae.start.character-G),new L.Position(ae.start.line,ae.start.character-G+re)));se.map(ae=>L.window.activeTextEditor.document.getText(ae)).every((ae,Se,Ne)=>Ne.indexOf(ae)===0)?D.additionalTextEdits=se.map(ae=>({range:ae,newText:D.additionalTextEdits[0].newText})):(D.insertText=typeof D.label=="string"?D.label:D.label.label,D.additionalTextEdits=[])}return D})},provideDocumentColors(k,O,x){return nn(this,null,function*(){var G;let D=yield x(k,O),z=D.filter(re=>{var ae,Se;let se=(Se=(ae=L.workspace.textDocuments.find(Ne=>Ne===k))==null?void 0:ae.getText(re.range))!=null?Se:"";return new RegExp(`-\\[(${mR.join("|")}|((?:#|rgba?\\(|hsla?\\())[^\\]]+)\\]$`).test(se)}),oe=D.filter(re=>!z.includes(re));return C||(C=L.window.createTextEditorDecorationType({before:{width:"0.8em",height:"0.8em",contentText:" ",border:"0.1em solid",margin:"0.1em 0.2em 0"},dark:{before:{borderColor:"#eeeeee"}},light:{before:{borderColor:"#000000"}}})),(G=L.window.visibleTextEditors.find(re=>re.document===k))==null||G.setDecorations(C,oe.map(({range:re,color:se})=>({range:re,renderOptions:{before:{backgroundColor:`rgba(${se.red*255}, ${se.green*255}, ${se.blue*255}, ${se.alpha})`}}}))),z})},workspace:{configuration:k=>k.items.map(({section:O,scopeUri:x})=>{let D=p;if(x){let oe=L.workspace.textDocuments.find(G=>G.uri.toString()===x);oe&&(D={languageId:oe.languageId})}let z=L.workspace.getConfiguration(O,D);return O==="tailwindCSS"?Uf(z,D):z})}},initializationOptions:{userLanguages:Ss(p)},synchronize:{configurationSection:["files","editor","tailwindCSS"]}},A=new vt.LanguageClient(Wf,Hf,F,I);A.onReady().then(()=>{A.onNotification("@/tailwindCSS/error",O=>nn(this,[O],function*({message:k}){(yield L.window.showErrorMessage(k,"Go to output"))==="Go to output"&&L.commands.executeCommand("tailwindCSS.showOutput")})),A.onNotification("@/tailwindCSS/clearColors",()=>R()),A.onRequest("@/tailwindCSS/getDocumentSymbols",O=>nn(this,[O],function*({uri:k}){return L.commands.executeCommand("vscode.executeDocumentSymbolProvider",L.Uri.parse(k))}))}),A.onDidChangeState(({newState:k})=>{k===vt.State.Stopped&&R()}),A.start(),Xt.set(p.uri.toString(),A)}function d(p){return nn(this,null,function*(){if(p.languageId==="tailwindcss"&&c(),p.uri.scheme!=="file")return;let C=p.uri,R=L.workspace.getWorkspaceFolder(C);if(!R||(R=zf(R),ws.has(R.uri.toString())))return;ws.add(R.uri.toString());let[S]=yield L.workspace.findFiles(new L.RelativePattern(R,`**/${Kf}`),`{${Ts(R).join(",")}}`,1);!S||f(R)})}t.subscriptions.push(L.workspace.onDidOpenTextDocument(d)),L.workspace.textDocuments.forEach(d),t.subscriptions.push(L.workspace.onDidChangeWorkspaceFolders(p=>{Ai=void 0;for(let C of p.removed){let R=Xt.get(C.uri.toString());R&&(ws.delete(C.uri.toString()),Xt.delete(C.uri.toString()),R.stop())}}))})}function _R(){let t=[];for(let e of Xt.values())t.push(e.stop());return Promise.all(t).then(()=>{})}module.exports=rh(wR);0&&(module.exports={activate,deactivate});
