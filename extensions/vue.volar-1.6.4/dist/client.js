"use strict";var qu=Object.defineProperty;var tD=Object.getOwnPropertyDescriptor;var nD=Object.getOwnPropertyNames;var rD=Object.prototype.hasOwnProperty;var iD=(n,e)=>()=>(n&&(e=n(n=0)),e);var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),oD=(n,e)=>{for(var t in e)qu(n,t,{get:e[t],enumerable:!0})},sD=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nD(e))!rD.call(n,i)&&i!==t&&qu(n,i,{get:()=>e[i],enumerable:!(r=tD(e,i))||r.enumerable});return n};var xu=n=>sD(qu({},"__esModule",{value:!0}),n);var an=b(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.asPromise=Ge.thenable=Ge.typedArray=Ge.stringArray=Ge.array=Ge.func=Ge.error=Ge.number=Ge.string=Ge.boolean=void 0;function aD(n){return n===!0||n===!1}Ge.boolean=aD;function Zg(n){return typeof n=="string"||n instanceof String}Ge.string=Zg;function cD(n){return typeof n=="number"||n instanceof Number}Ge.number=cD;function uD(n){return n instanceof Error}Ge.error=uD;function em(n){return typeof n=="function"}Ge.func=em;function tm(n){return Array.isArray(n)}Ge.array=tm;function lD(n){return tm(n)&&n.every(e=>Zg(e))}Ge.stringArray=lD;function dD(n,e){return Array.isArray(n)&&n.every(e)}Ge.typedArray=dD;function nm(n){return n&&em(n.then)}Ge.thenable=nm;function fD(n){return n instanceof Promise?n:nm(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}Ge.asPromise=fD});var Li=b(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.stringArray=Ct.array=Ct.func=Ct.error=Ct.number=Ct.string=Ct.boolean=void 0;function hD(n){return n===!0||n===!1}Ct.boolean=hD;function rm(n){return typeof n=="string"||n instanceof String}Ct.string=rm;function pD(n){return typeof n=="number"||n instanceof Number}Ct.number=pD;function gD(n){return n instanceof Error}Ct.error=gD;function mD(n){return typeof n=="function"}Ct.func=mD;function im(n){return Array.isArray(n)}Ct.array=im;function vD(n){return im(n)&&n.every(e=>rm(e))}Ct.stringArray=vD});var Yu=b(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.Message=U.NotificationType9=U.NotificationType8=U.NotificationType7=U.NotificationType6=U.NotificationType5=U.NotificationType4=U.NotificationType3=U.NotificationType2=U.NotificationType1=U.NotificationType0=U.NotificationType=U.RequestType9=U.RequestType8=U.RequestType7=U.RequestType6=U.RequestType5=U.RequestType4=U.RequestType3=U.RequestType2=U.RequestType1=U.RequestType=U.RequestType0=U.AbstractMessageSignature=U.ParameterStructures=U.ResponseError=U.ErrorCodes=void 0;var ti=Li(),om;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(om=U.ErrorCodes||(U.ErrorCodes={}));var xo=class extends Error{constructor(e,t,r){super(t),this.code=ti.number(e)?e:om.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,xo.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};U.ResponseError=xo;var ct=class{constructor(e){this.kind=e}static is(e){return e===ct.auto||e===ct.byName||e===ct.byPosition}toString(){return this.kind}};U.ParameterStructures=ct;ct.auto=new ct("auto");ct.byPosition=new ct("byPosition");ct.byName=new ct("byName");var Ie=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return ct.auto}};U.AbstractMessageSignature=Ie;var ku=class extends Ie{constructor(e){super(e,0)}};U.RequestType0=ku;var Eu=class extends Ie{constructor(e,t=ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};U.RequestType=Eu;var Ou=class extends Ie{constructor(e,t=ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};U.RequestType1=Ou;var Fu=class extends Ie{constructor(e){super(e,2)}};U.RequestType2=Fu;var Nu=class extends Ie{constructor(e){super(e,3)}};U.RequestType3=Nu;var Iu=class extends Ie{constructor(e){super(e,4)}};U.RequestType4=Iu;var Mu=class extends Ie{constructor(e){super(e,5)}};U.RequestType5=Mu;var Lu=class extends Ie{constructor(e){super(e,6)}};U.RequestType6=Lu;var ju=class extends Ie{constructor(e){super(e,7)}};U.RequestType7=ju;var Au=class extends Ie{constructor(e){super(e,8)}};U.RequestType8=Au;var Hu=class extends Ie{constructor(e){super(e,9)}};U.RequestType9=Hu;var $u=class extends Ie{constructor(e,t=ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};U.NotificationType=$u;var Wu=class extends Ie{constructor(e){super(e,0)}};U.NotificationType0=Wu;var zu=class extends Ie{constructor(e,t=ct.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};U.NotificationType1=zu;var Ku=class extends Ie{constructor(e){super(e,2)}};U.NotificationType2=Ku;var Uu=class extends Ie{constructor(e){super(e,3)}};U.NotificationType3=Uu;var Bu=class extends Ie{constructor(e){super(e,4)}};U.NotificationType4=Bu;var Gu=class extends Ie{constructor(e){super(e,5)}};U.NotificationType5=Gu;var Vu=class extends Ie{constructor(e){super(e,6)}};U.NotificationType6=Vu;var Xu=class extends Ie{constructor(e){super(e,7)}};U.NotificationType7=Xu;var Ju=class extends Ie{constructor(e){super(e,8)}};U.NotificationType8=Ju;var Qu=class extends Ie{constructor(e){super(e,9)}};U.NotificationType9=Qu;var yD;(function(n){function e(i){let o=i;return o&&ti.string(o.method)&&(ti.string(o.id)||ti.number(o.id))}n.isRequest=e;function t(i){let o=i;return o&&ti.string(o.method)&&i.id===void 0}n.isNotification=t;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(ti.string(o.id)||ti.number(o.id)||o.id===null)}n.isResponse=r})(yD=U.Message||(U.Message={}))});var el=b(rr=>{"use strict";var sm;Object.defineProperty(rr,"__esModule",{value:!0});rr.LRUCache=rr.LinkedMap=rr.Touch=void 0;var Tt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Tt=rr.Touch||(rr.Touch={}));var Xs=class{constructor(){this[sm]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Tt.None){let r=this._map.get(e);if(!!r)return t!==Tt.None&&this.touch(r,t),r.value}set(e,t,r=Tt.None){let i=this._map.get(e);if(i)i.value=t,r!==Tt.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Tt.None:this.addItemLast(i);break;case Tt.First:this.addItemFirst(i);break;case Tt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(sm=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Tt.First&&t!==Tt.Last)){if(t===Tt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Tt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};rr.LinkedMap=Xs;var Zu=class extends Xs{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Tt.AsNew){return super.get(e,t)}peek(e){return super.get(e,Tt.None)}set(e,t){return super.set(e,t,Tt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};rr.LRUCache=Zu});var am=b(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.Disposable=void 0;var CD;(function(n){function e(t){return{dispose:t}}n.create=e})(CD=ko.Disposable||(ko.Disposable={}))});var Pr=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var tl;function nl(){if(tl===void 0)throw new Error("No runtime abstraction layer installed");return tl}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");tl=t}n.install=e})(nl||(nl={}));rl.default=nl});var Ai=b(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.Emitter=ni.Event=void 0;var _D=Pr(),wD;(function(n){let e={dispose(){}};n.None=function(){return e}})(wD=ni.Event||(ni.Event={}));var il=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=r.length;o<s;o++)try{t.push(r[o].apply(i[o],e))}catch(a){(0,_D.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ji=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new il),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=ji._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ni.Emitter=ji;ji._noop=function(){}});var Qs=b(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.CancellationTokenSource=ri.CancellationToken=void 0;var bD=Pr(),DD=Li(),ol=Ai(),sl;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ol.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ol.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||DD.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(sl=ri.CancellationToken||(ri.CancellationToken={}));var RD=Object.freeze(function(n,e){let t=(0,bD.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Js=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?RD:(this._emitter||(this._emitter=new ol.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},al=class{get token(){return this._token||(this._token=new Js),this._token}cancel(){this._token?this._token.cancel():this._token=sl.Cancelled}dispose(){this._token?this._token instanceof Js&&this._token.dispose():this._token=sl.None}};ri.CancellationTokenSource=al});var cm=b(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SharedArrayReceiverStrategy=Hi.SharedArraySenderStrategy=void 0;var SD=Qs(),Eo;(function(n){n.Continue=0,n.Cancelled=1})(Eo||(Eo={}));var cl=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=Eo.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,Eo.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Hi.SharedArraySenderStrategy=cl;var ul=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Eo.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},ll=class{constructor(e){this.token=new ul(e)}cancel(){}dispose(){}},dl=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new SD.CancellationTokenSource:new ll(t)}};Hi.SharedArrayReceiverStrategy=dl});var hl=b(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Semaphore=void 0;var TD=Pr(),fl=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,TD.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ys.Semaphore=fl});var um=b(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.ReadableStreamMessageReader=ir.AbstractMessageReader=ir.MessageReader=void 0;var gl=Pr(),$i=Li(),pl=Ai(),PD=hl(),qD;(function(n){function e(t){let r=t;return r&&$i.func(r.listen)&&$i.func(r.dispose)&&$i.func(r.onError)&&$i.func(r.onClose)&&$i.func(r.onPartialMessage)}n.is=e})(qD=ir.MessageReader||(ir.MessageReader={}));var Zs=class{constructor(){this.errorEmitter=new pl.Emitter,this.closeEmitter=new pl.Emitter,this.partialMessageEmitter=new pl.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${$i.string(e.message)?e.message:"unknown"}`)}};ir.AbstractMessageReader=Zs;var ml;(function(n){function e(t){let r,i,o,s=new Map,a,c=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(o=t.contentDecoder,s.set(o.name,o)),t.contentDecoders!==void 0)for(let l of t.contentDecoders)s.set(l.name,l);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,c.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let l of t.contentTypeDecoders)c.set(l.name,l)}return a===void 0&&(a=(0,gl.default)().applicationJson.decoder,c.set(a.name,a)),{charset:r,contentDecoder:o,contentDecoders:s,contentTypeDecoder:a,contentTypeDecoders:c}}n.fromOptions=e})(ml||(ml={}));var vl=class extends Zs{constructor(e,t){super(),this.readable=e,this.options=ml.fromOptions(t),this.buffer=(0,gl.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new PD.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error("Header must provide a Content-Length property."));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=o}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,gl.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};ir.ReadableStreamMessageReader=vl});var hm=b(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.WriteableStreamMessageWriter=or.AbstractMessageWriter=or.MessageWriter=void 0;var lm=Pr(),Oo=Li(),xD=hl(),dm=Ai(),kD="Content-Length: ",fm=`\r
`,ED;(function(n){function e(t){let r=t;return r&&Oo.func(r.dispose)&&Oo.func(r.onClose)&&Oo.func(r.onError)&&Oo.func(r.write)}n.is=e})(ED=or.MessageWriter||(or.MessageWriter={}));var ea=class{constructor(){this.errorEmitter=new dm.Emitter,this.closeEmitter=new dm.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Oo.string(e.message)?e.message:"unknown"}`)}};or.AbstractMessageWriter=ea;var yl;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,lm.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,lm.default)().applicationJson.encoder}}n.fromOptions=e})(yl||(yl={}));var Cl=class extends ea{constructor(e,t){super(),this.writable=e,this.options=yl.fromOptions(t),this.errorCount=0,this.writeSemaphore=new xD.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(kD,r.byteLength.toString(),fm),i.push(fm),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};or.WriteableStreamMessageWriter=Cl});var pm=b(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.AbstractMessageBuffer=void 0;var OD=13,FD=10,ND=`\r
`,_l=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let l=this._chunks[r];i=0;t:for(;i<l.length;){switch(l[i]){case OD:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case FD:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}o+=l.byteLength,r++}if(t!==4)return;let s=this._read(o+i),a=new Map,c=this.toString(s,"ascii").split(ND);if(c.length<2)return a;for(let l=0;l<c.length-2;l++){let d=c[l],g=d.indexOf(":");if(g===-1)throw new Error("Message header must separate key and value using :");let f=d.substr(0,g),p=d.substr(g+1).trim();a.set(e?f.toLowerCase():f,p)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],s=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,s}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let s=o.slice(0,e);t.set(s,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}};ta.AbstractMessageBuffer=_l});var wm=b(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.createMessageConnection=K.ConnectionOptions=K.MessageStrategy=K.CancellationStrategy=K.CancellationSenderStrategy=K.CancellationReceiverStrategy=K.RequestCancellationReceiverStrategy=K.IdCancellationReceiverStrategy=K.ConnectionStrategy=K.ConnectionError=K.ConnectionErrors=K.LogTraceNotification=K.SetTraceNotification=K.TraceFormat=K.TraceValues=K.Trace=K.NullLogger=K.ProgressType=K.ProgressToken=void 0;var gm=Pr(),He=Li(),G=Yu(),mm=el(),Fo=Ai(),wl=Qs(),Io;(function(n){n.type=new G.NotificationType("$/cancelRequest")})(Io||(Io={}));var vm;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(vm=K.ProgressToken||(K.ProgressToken={}));var No;(function(n){n.type=new G.NotificationType("$/progress")})(No||(No={}));var bl=class{constructor(){}};K.ProgressType=bl;var Dl;(function(n){function e(t){return He.func(t)}n.is=e})(Dl||(Dl={}));K.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Te;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Te=K.Trace||(K.Trace={}));var ID;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(ID=K.TraceValues||(K.TraceValues={}));(function(n){function e(r){if(!He.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Te=K.Trace||(K.Trace={}));var bn;(function(n){n.Text="text",n.JSON="json"})(bn=K.TraceFormat||(K.TraceFormat={}));(function(n){function e(t){return He.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(bn=K.TraceFormat||(K.TraceFormat={}));var ym;(function(n){n.type=new G.NotificationType("$/setTrace")})(ym=K.SetTraceNotification||(K.SetTraceNotification={}));var Rl;(function(n){n.type=new G.NotificationType("$/logTrace")})(Rl=K.LogTraceNotification||(K.LogTraceNotification={}));var na;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(na=K.ConnectionErrors||(K.ConnectionErrors={}));var qr=class extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,qr.prototype)}};K.ConnectionError=qr;var Cm;(function(n){function e(t){let r=t;return r&&He.func(r.cancelUndispatched)}n.is=e})(Cm=K.ConnectionStrategy||(K.ConnectionStrategy={}));var Pl;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&He.func(r.createCancellationTokenSource)&&(r.dispose===void 0||He.func(r.dispose))}n.is=e})(Pl=K.IdCancellationReceiverStrategy||(K.IdCancellationReceiverStrategy={}));var _m;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&He.func(r.createCancellationTokenSource)&&(r.dispose===void 0||He.func(r.dispose))}n.is=e})(_m=K.RequestCancellationReceiverStrategy||(K.RequestCancellationReceiverStrategy={}));var Sl;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new wl.CancellationTokenSource}});function e(t){return Pl.is(t)||_m.is(t)}n.is=e})(Sl=K.CancellationReceiverStrategy||(K.CancellationReceiverStrategy={}));var Tl;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(Io.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&He.func(r.sendCancellation)&&He.func(r.cleanup)}n.is=e})(Tl=K.CancellationSenderStrategy||(K.CancellationSenderStrategy={}));var ql;(function(n){n.Message=Object.freeze({receiver:Sl.Message,sender:Tl.Message});function e(t){let r=t;return r&&Sl.is(r.receiver)&&Tl.is(r.sender)}n.is=e})(ql=K.CancellationStrategy||(K.CancellationStrategy={}));var xl;(function(n){function e(t){let r=t;return r&&He.func(r.handleMessage)}n.is=e})(xl=K.MessageStrategy||(K.MessageStrategy={}));var MD;(function(n){function e(t){let r=t;return r&&(ql.is(r.cancellationStrategy)||Cm.is(r.connectionStrategy)||xl.is(r.messageStrategy))}n.is=e})(MD=K.ConnectionOptions||(K.ConnectionOptions={}));var Dn;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(Dn||(Dn={}));function LD(n,e,t,r){let i=t!==void 0?t:K.NullLogger,o=0,s=0,a=0,c="2.0",l,d=new Map,g,f=new Map,p=new Map,m,w=new mm.LinkedMap,D=new Map,P=new Set,C=new Map,y=Te.Off,S=bn.Text,I,X=Dn.New,$=new Fo.Emitter,Y=new Fo.Emitter,Z=new Fo.Emitter,Ae=new Fo.Emitter,pe=new Fo.Emitter,st=r&&r.cancellationStrategy?r.cancellationStrategy:ql.Message;function Rr(_){if(_===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+_.toString()}function $n(_){return _===null?"res-unknown-"+(++a).toString():"res-"+_.toString()}function Mt(){return"not-"+(++s).toString()}function Bt(_,k){G.Message.isRequest(k)?_.set(Rr(k.id),k):G.Message.isResponse(k)?_.set($n(k.id),k):_.set(Mt(),k)}function Sr(_){}function Qe(){return X===Dn.Listening}function Cn(){return X===Dn.Closed}function on(){return X===Dn.Disposed}function Vr(){(X===Dn.New||X===Dn.Listening)&&(X=Dn.Closed,Y.fire(void 0))}function _n(_){$.fire([_,void 0,void 0])}function To(_){$.fire(_)}n.onClose(Vr),n.onError(_n),e.onClose(Vr),e.onError(To);function ki(){m||w.size===0||(m=(0,gm.default)().timer.setImmediate(()=>{m=void 0,Jr()}))}function Xr(_){G.Message.isRequest(_)?Po(_):G.Message.isNotification(_)?Oi(_):G.Message.isResponse(_)?Ei(_):qo(_)}function Jr(){if(w.size===0)return;let _=w.shift();try{let k=r?.messageStrategy;xl.is(k)?k.handleMessage(_,Xr):Xr(_)}finally{ki()}}let Qr=_=>{try{if(G.Message.isNotification(_)&&_.method===Io.type.method){let k=_.params.id,N=Rr(k),A=w.get(N);if(G.Message.isRequest(A)){let ye=r?.connectionStrategy,qe=ye&&ye.cancelUndispatched?ye.cancelUndispatched(A,Sr):void 0;if(qe&&(qe.error!==void 0||qe.result!==void 0)){w.delete(N),C.delete(k),qe.id=A.id,Wn(qe,_.method,Date.now()),e.write(qe).catch(()=>i.error("Sending response for canceled message failed."));return}}let we=C.get(k);if(we!==void 0){we.cancel(),Gt(_);return}else P.add(k)}Bt(w,_)}finally{ki()}};function Po(_){if(on())return;function k(oe,Re,h){let q={jsonrpc:c,id:_.id};oe instanceof G.ResponseError?q.error=oe.toJson():q.result=oe===void 0?null:oe,Wn(q,Re,h),e.write(q).catch(()=>i.error("Sending response failed."))}function N(oe,Re,h){let q={jsonrpc:c,id:_.id,error:oe.toJson()};Wn(q,Re,h),e.write(q).catch(()=>i.error("Sending response failed."))}function A(oe,Re,h){oe===void 0&&(oe=null);let q={jsonrpc:c,id:_.id,result:oe};Wn(q,Re,h),e.write(q).catch(()=>i.error("Sending response failed."))}Ni(_);let we=d.get(_.method),ye,qe;we&&(ye=we.type,qe=we.handler);let Ne=Date.now();if(qe||l){let oe=_.id??String(Date.now()),Re=Pl.is(st.receiver)?st.receiver.createCancellationTokenSource(oe):st.receiver.createCancellationTokenSource(_);_.id!==null&&P.has(_.id)&&Re.cancel(),_.id!==null&&C.set(oe,Re);try{let h;if(qe)if(_.params===void 0){if(ye!==void 0&&ye.numberOfParams!==0){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines ${ye.numberOfParams} params but received none.`),_.method,Ne);return}h=qe(Re.token)}else if(Array.isArray(_.params)){if(ye!==void 0&&ye.parameterStructures===G.ParameterStructures.byName){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by name but received parameters by position`),_.method,Ne);return}h=qe(..._.params,Re.token)}else{if(ye!==void 0&&ye.parameterStructures===G.ParameterStructures.byPosition){N(new G.ResponseError(G.ErrorCodes.InvalidParams,`Request ${_.method} defines parameters by position but received parameters by name`),_.method,Ne);return}h=qe(_.params,Re.token)}else l&&(h=l(_.method,_.params,Re.token));let q=h;h?q.then?q.then(M=>{C.delete(oe),k(M,_.method,Ne)},M=>{C.delete(oe),M instanceof G.ResponseError?N(M,_.method,Ne):M&&He.string(M.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${M.message}`),_.method,Ne):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,Ne)}):(C.delete(oe),k(h,_.method,Ne)):(C.delete(oe),A(h,_.method,Ne))}catch(h){C.delete(oe),h instanceof G.ResponseError?k(h,_.method,Ne):h&&He.string(h.message)?N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed with message: ${h.message}`),_.method,Ne):N(new G.ResponseError(G.ErrorCodes.InternalError,`Request ${_.method} failed unexpectedly without providing any details.`),_.method,Ne)}}else N(new G.ResponseError(G.ErrorCodes.MethodNotFound,`Unhandled method ${_.method}`),_.method,Ne)}function Ei(_){if(!on())if(_.id===null)_.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(_.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let k=_.id,N=D.get(k);if(Yr(_,N),N!==void 0){D.delete(k);try{if(_.error){let A=_.error;N.reject(new G.ResponseError(A.code,A.message,A.data))}else if(_.result!==void 0)N.resolve(_.result);else throw new Error("Should never happen.")}catch(A){A.message?i.error(`Response handler '${N.method}' failed with message: ${A.message}`):i.error(`Response handler '${N.method}' failed unexpectedly.`)}}}}function Oi(_){if(on())return;let k,N;if(_.method===Io.type.method){let A=_.params.id;P.delete(A),Gt(_);return}else{let A=f.get(_.method);A&&(N=A.handler,k=A.type)}if(N||g)try{if(Gt(_),N)if(_.params===void 0)k!==void 0&&k.numberOfParams!==0&&k.parameterStructures!==G.ParameterStructures.byName&&i.error(`Notification ${_.method} defines ${k.numberOfParams} params but received none.`),N();else if(Array.isArray(_.params)){let A=_.params;_.method===No.type.method&&A.length===2&&vm.is(A[0])?N({token:A[0],value:A[1]}):(k!==void 0&&(k.parameterStructures===G.ParameterStructures.byName&&i.error(`Notification ${_.method} defines parameters by name but received parameters by position`),k.numberOfParams!==_.params.length&&i.error(`Notification ${_.method} defines ${k.numberOfParams} params but received ${A.length} arguments`)),N(...A))}else k!==void 0&&k.parameterStructures===G.ParameterStructures.byPosition&&i.error(`Notification ${_.method} defines parameters by position but received parameters by name`),N(_.params);else g&&g(_.method,_.params)}catch(A){A.message?i.error(`Notification handler '${_.method}' failed with message: ${A.message}`):i.error(`Notification handler '${_.method}' failed unexpectedly.`)}else Z.fire(_)}function qo(_){if(!_){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(_,null,4)}`);let k=_;if(He.string(k.id)||He.number(k.id)){let N=k.id,A=D.get(N);A&&A.reject(new Error("The received response has neither a result nor an error property."))}}function lt(_){if(_!=null)switch(y){case Te.Verbose:return JSON.stringify(_,null,4);case Te.Compact:return JSON.stringify(_);default:return}}function Fi(_){if(!(y===Te.Off||!I))if(S===bn.Text){let k;(y===Te.Verbose||y===Te.Compact)&&_.params&&(k=`Params: ${lt(_.params)}

`),I.log(`Sending request '${_.method} - (${_.id})'.`,k)}else rt("send-request",_)}function Tr(_){if(!(y===Te.Off||!I))if(S===bn.Text){let k;(y===Te.Verbose||y===Te.Compact)&&(_.params?k=`Params: ${lt(_.params)}

`:k=`No parameters provided.

`),I.log(`Sending notification '${_.method}'.`,k)}else rt("send-notification",_)}function Wn(_,k,N){if(!(y===Te.Off||!I))if(S===bn.Text){let A;(y===Te.Verbose||y===Te.Compact)&&(_.error&&_.error.data?A=`Error data: ${lt(_.error.data)}

`:_.result?A=`Result: ${lt(_.result)}

`:_.error===void 0&&(A=`No result returned.

`)),I.log(`Sending response '${k} - (${_.id})'. Processing request took ${Date.now()-N}ms`,A)}else rt("send-response",_)}function Ni(_){if(!(y===Te.Off||!I))if(S===bn.Text){let k;(y===Te.Verbose||y===Te.Compact)&&_.params&&(k=`Params: ${lt(_.params)}

`),I.log(`Received request '${_.method} - (${_.id})'.`,k)}else rt("receive-request",_)}function Gt(_){if(!(y===Te.Off||!I||_.method===Rl.type.method))if(S===bn.Text){let k;(y===Te.Verbose||y===Te.Compact)&&(_.params?k=`Params: ${lt(_.params)}

`:k=`No parameters provided.

`),I.log(`Received notification '${_.method}'.`,k)}else rt("receive-notification",_)}function Yr(_,k){if(!(y===Te.Off||!I))if(S===bn.Text){let N;if((y===Te.Verbose||y===Te.Compact)&&(_.error&&_.error.data?N=`Error data: ${lt(_.error.data)}

`:_.result?N=`Result: ${lt(_.result)}

`:_.error===void 0&&(N=`No result returned.

`)),k){let A=_.error?` Request failed: ${_.error.message} (${_.error.code}).`:"";I.log(`Received response '${k.method} - (${_.id})' in ${Date.now()-k.timerStart}ms.${A}`,N)}else I.log(`Received response ${_.id} without active response promise.`,N)}else rt("receive-response",_)}function rt(_,k){if(!I||y===Te.Off)return;let N={isLSPMessage:!0,type:_,message:k,timestamp:Date.now()};I.log(N)}function tr(){if(Cn())throw new qr(na.Closed,"Connection is closed.");if(on())throw new qr(na.Disposed,"Connection is disposed.")}function Vt(){if(Qe())throw new qr(na.AlreadyListening,"Connection is already listening")}function Zr(){if(!Qe())throw new Error("Call listen() first.")}function nr(_){return _===void 0?null:_}function ei(_){if(_!==null)return _}function Ii(_){return _!=null&&!Array.isArray(_)&&typeof _=="object"}function sn(_,k){switch(_){case G.ParameterStructures.auto:return Ii(k)?ei(k):[nr(k)];case G.ParameterStructures.byName:if(!Ii(k))throw new Error("Received parameters by name but param is not an object literal.");return ei(k);case G.ParameterStructures.byPosition:return[nr(k)];default:throw new Error(`Unknown parameter structure ${_.toString()}`)}}function Mi(_,k){let N,A=_.numberOfParams;switch(A){case 0:N=void 0;break;case 1:N=sn(_.parameterStructures,k[0]);break;default:N=[];for(let we=0;we<k.length&&we<A;we++)N.push(nr(k[we]));if(k.length<A)for(let we=k.length;we<A;we++)N.push(null);break}return N}let wn={sendNotification:(_,...k)=>{tr();let N,A;if(He.string(_)){N=_;let ye=k[0],qe=0,Ne=G.ParameterStructures.auto;G.ParameterStructures.is(ye)&&(qe=1,Ne=ye);let oe=k.length,Re=oe-qe;switch(Re){case 0:A=void 0;break;case 1:A=sn(Ne,k[qe]);break;default:if(Ne===G.ParameterStructures.byName)throw new Error(`Received ${Re} parameters for 'by Name' notification parameter structure.`);A=k.slice(qe,oe).map(h=>nr(h));break}}else{let ye=k;N=_.method,A=Mi(_,ye)}let we={jsonrpc:c,method:N,params:A};return Tr(we),e.write(we).catch(ye=>{throw i.error("Sending notification failed."),ye})},onNotification:(_,k)=>{tr();let N;return He.func(_)?g=_:k&&(He.string(_)?(N=_,f.set(_,{type:void 0,handler:k})):(N=_.method,f.set(_.method,{type:_,handler:k}))),{dispose:()=>{N!==void 0?f.delete(N):g=void 0}}},onProgress:(_,k,N)=>{if(p.has(k))throw new Error(`Progress handler for token ${k} already registered`);return p.set(k,N),{dispose:()=>{p.delete(k)}}},sendProgress:(_,k,N)=>wn.sendNotification(No.type,{token:k,value:N}),onUnhandledProgress:Ae.event,sendRequest:(_,...k)=>{tr(),Zr();let N,A,we;if(He.string(_)){N=_;let oe=k[0],Re=k[k.length-1],h=0,q=G.ParameterStructures.auto;G.ParameterStructures.is(oe)&&(h=1,q=oe);let M=k.length;wl.CancellationToken.is(Re)&&(M=M-1,we=Re);let ie=M-h;switch(ie){case 0:A=void 0;break;case 1:A=sn(q,k[h]);break;default:if(q===G.ParameterStructures.byName)throw new Error(`Received ${ie} parameters for 'by Name' request parameter structure.`);A=k.slice(h,M).map(be=>nr(be));break}}else{let oe=k;N=_.method,A=Mi(_,oe);let Re=_.numberOfParams;we=wl.CancellationToken.is(oe[Re])?oe[Re]:void 0}let ye=o++,qe;we&&(qe=we.onCancellationRequested(()=>{let oe=st.sender.sendCancellation(wn,ye);return oe===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ye}`),Promise.resolve()):oe.catch(()=>{i.log(`Sending cancellation messages for id ${ye} failed`)})}));let Ne={jsonrpc:c,id:ye,method:N,params:A};return Fi(Ne),typeof st.sender.enableCancellation=="function"&&st.sender.enableCancellation(Ne),new Promise(async(oe,Re)=>{let h=ie=>{oe(ie),st.sender.cleanup(ye),qe?.dispose()},q=ie=>{Re(ie),st.sender.cleanup(ye),qe?.dispose()},M={method:N,timerStart:Date.now(),resolve:h,reject:q};try{await e.write(Ne),D.set(ye,M)}catch(ie){throw i.error("Sending request failed."),M.reject(new G.ResponseError(G.ErrorCodes.MessageWriteError,ie.message?ie.message:"Unknown reason")),ie}})},onRequest:(_,k)=>{tr();let N=null;return Dl.is(_)?(N=void 0,l=_):He.string(_)?(N=null,k!==void 0&&(N=_,d.set(_,{handler:k,type:void 0}))):k!==void 0&&(N=_.method,d.set(_.method,{type:_,handler:k})),{dispose:()=>{N!==null&&(N!==void 0?d.delete(N):l=void 0)}}},hasPendingResponse:()=>D.size>0,trace:async(_,k,N)=>{let A=!1,we=bn.Text;N!==void 0&&(He.boolean(N)?A=N:(A=N.sendNotification||!1,we=N.traceFormat||bn.Text)),y=_,S=we,y===Te.Off?I=void 0:I=k,A&&!Cn()&&!on()&&await wn.sendNotification(ym.type,{value:Te.toString(_)})},onError:$.event,onClose:Y.event,onUnhandledNotification:Z.event,onDispose:pe.event,end:()=>{e.end()},dispose:()=>{if(on())return;X=Dn.Disposed,pe.fire(void 0);let _=new G.ResponseError(G.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let k of D.values())k.reject(_);D=new Map,C=new Map,P=new Set,w=new mm.LinkedMap,He.func(e.dispose)&&e.dispose(),He.func(n.dispose)&&n.dispose()},listen:()=>{tr(),Vt(),X=Dn.Listening,n.listen(Qr)},inspect:()=>{(0,gm.default)().console.log("inspect")}};return wn.onNotification(Rl.type,_=>{if(y===Te.Off||!I)return;let k=y===Te.Verbose||y===Te.Compact;I.log(_.message,k?_.verbose:void 0)}),wn.onNotification(No.type,_=>{let k=p.get(_.token);k?k(_.value):Ae.fire(_)}),wn}K.createMessageConnection=LD});var ra=b(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.ProgressType=x.ProgressToken=x.createMessageConnection=x.NullLogger=x.ConnectionOptions=x.ConnectionStrategy=x.AbstractMessageBuffer=x.WriteableStreamMessageWriter=x.AbstractMessageWriter=x.MessageWriter=x.ReadableStreamMessageReader=x.AbstractMessageReader=x.MessageReader=x.SharedArrayReceiverStrategy=x.SharedArraySenderStrategy=x.CancellationToken=x.CancellationTokenSource=x.Emitter=x.Event=x.Disposable=x.LRUCache=x.Touch=x.LinkedMap=x.ParameterStructures=x.NotificationType9=x.NotificationType8=x.NotificationType7=x.NotificationType6=x.NotificationType5=x.NotificationType4=x.NotificationType3=x.NotificationType2=x.NotificationType1=x.NotificationType0=x.NotificationType=x.ErrorCodes=x.ResponseError=x.RequestType9=x.RequestType8=x.RequestType7=x.RequestType6=x.RequestType5=x.RequestType4=x.RequestType3=x.RequestType2=x.RequestType1=x.RequestType0=x.RequestType=x.Message=x.RAL=void 0;x.MessageStrategy=x.CancellationStrategy=x.CancellationSenderStrategy=x.CancellationReceiverStrategy=x.ConnectionError=x.ConnectionErrors=x.LogTraceNotification=x.SetTraceNotification=x.TraceFormat=x.TraceValues=x.Trace=void 0;var Ee=Yu();Object.defineProperty(x,"Message",{enumerable:!0,get:function(){return Ee.Message}});Object.defineProperty(x,"RequestType",{enumerable:!0,get:function(){return Ee.RequestType}});Object.defineProperty(x,"RequestType0",{enumerable:!0,get:function(){return Ee.RequestType0}});Object.defineProperty(x,"RequestType1",{enumerable:!0,get:function(){return Ee.RequestType1}});Object.defineProperty(x,"RequestType2",{enumerable:!0,get:function(){return Ee.RequestType2}});Object.defineProperty(x,"RequestType3",{enumerable:!0,get:function(){return Ee.RequestType3}});Object.defineProperty(x,"RequestType4",{enumerable:!0,get:function(){return Ee.RequestType4}});Object.defineProperty(x,"RequestType5",{enumerable:!0,get:function(){return Ee.RequestType5}});Object.defineProperty(x,"RequestType6",{enumerable:!0,get:function(){return Ee.RequestType6}});Object.defineProperty(x,"RequestType7",{enumerable:!0,get:function(){return Ee.RequestType7}});Object.defineProperty(x,"RequestType8",{enumerable:!0,get:function(){return Ee.RequestType8}});Object.defineProperty(x,"RequestType9",{enumerable:!0,get:function(){return Ee.RequestType9}});Object.defineProperty(x,"ResponseError",{enumerable:!0,get:function(){return Ee.ResponseError}});Object.defineProperty(x,"ErrorCodes",{enumerable:!0,get:function(){return Ee.ErrorCodes}});Object.defineProperty(x,"NotificationType",{enumerable:!0,get:function(){return Ee.NotificationType}});Object.defineProperty(x,"NotificationType0",{enumerable:!0,get:function(){return Ee.NotificationType0}});Object.defineProperty(x,"NotificationType1",{enumerable:!0,get:function(){return Ee.NotificationType1}});Object.defineProperty(x,"NotificationType2",{enumerable:!0,get:function(){return Ee.NotificationType2}});Object.defineProperty(x,"NotificationType3",{enumerable:!0,get:function(){return Ee.NotificationType3}});Object.defineProperty(x,"NotificationType4",{enumerable:!0,get:function(){return Ee.NotificationType4}});Object.defineProperty(x,"NotificationType5",{enumerable:!0,get:function(){return Ee.NotificationType5}});Object.defineProperty(x,"NotificationType6",{enumerable:!0,get:function(){return Ee.NotificationType6}});Object.defineProperty(x,"NotificationType7",{enumerable:!0,get:function(){return Ee.NotificationType7}});Object.defineProperty(x,"NotificationType8",{enumerable:!0,get:function(){return Ee.NotificationType8}});Object.defineProperty(x,"NotificationType9",{enumerable:!0,get:function(){return Ee.NotificationType9}});Object.defineProperty(x,"ParameterStructures",{enumerable:!0,get:function(){return Ee.ParameterStructures}});var kl=el();Object.defineProperty(x,"LinkedMap",{enumerable:!0,get:function(){return kl.LinkedMap}});Object.defineProperty(x,"LRUCache",{enumerable:!0,get:function(){return kl.LRUCache}});Object.defineProperty(x,"Touch",{enumerable:!0,get:function(){return kl.Touch}});var jD=am();Object.defineProperty(x,"Disposable",{enumerable:!0,get:function(){return jD.Disposable}});var bm=Ai();Object.defineProperty(x,"Event",{enumerable:!0,get:function(){return bm.Event}});Object.defineProperty(x,"Emitter",{enumerable:!0,get:function(){return bm.Emitter}});var Dm=Qs();Object.defineProperty(x,"CancellationTokenSource",{enumerable:!0,get:function(){return Dm.CancellationTokenSource}});Object.defineProperty(x,"CancellationToken",{enumerable:!0,get:function(){return Dm.CancellationToken}});var Rm=cm();Object.defineProperty(x,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Rm.SharedArraySenderStrategy}});Object.defineProperty(x,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Rm.SharedArrayReceiverStrategy}});var El=um();Object.defineProperty(x,"MessageReader",{enumerable:!0,get:function(){return El.MessageReader}});Object.defineProperty(x,"AbstractMessageReader",{enumerable:!0,get:function(){return El.AbstractMessageReader}});Object.defineProperty(x,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return El.ReadableStreamMessageReader}});var Ol=hm();Object.defineProperty(x,"MessageWriter",{enumerable:!0,get:function(){return Ol.MessageWriter}});Object.defineProperty(x,"AbstractMessageWriter",{enumerable:!0,get:function(){return Ol.AbstractMessageWriter}});Object.defineProperty(x,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Ol.WriteableStreamMessageWriter}});var AD=pm();Object.defineProperty(x,"AbstractMessageBuffer",{enumerable:!0,get:function(){return AD.AbstractMessageBuffer}});var ft=wm();Object.defineProperty(x,"ConnectionStrategy",{enumerable:!0,get:function(){return ft.ConnectionStrategy}});Object.defineProperty(x,"ConnectionOptions",{enumerable:!0,get:function(){return ft.ConnectionOptions}});Object.defineProperty(x,"NullLogger",{enumerable:!0,get:function(){return ft.NullLogger}});Object.defineProperty(x,"createMessageConnection",{enumerable:!0,get:function(){return ft.createMessageConnection}});Object.defineProperty(x,"ProgressToken",{enumerable:!0,get:function(){return ft.ProgressToken}});Object.defineProperty(x,"ProgressType",{enumerable:!0,get:function(){return ft.ProgressType}});Object.defineProperty(x,"Trace",{enumerable:!0,get:function(){return ft.Trace}});Object.defineProperty(x,"TraceValues",{enumerable:!0,get:function(){return ft.TraceValues}});Object.defineProperty(x,"TraceFormat",{enumerable:!0,get:function(){return ft.TraceFormat}});Object.defineProperty(x,"SetTraceNotification",{enumerable:!0,get:function(){return ft.SetTraceNotification}});Object.defineProperty(x,"LogTraceNotification",{enumerable:!0,get:function(){return ft.LogTraceNotification}});Object.defineProperty(x,"ConnectionErrors",{enumerable:!0,get:function(){return ft.ConnectionErrors}});Object.defineProperty(x,"ConnectionError",{enumerable:!0,get:function(){return ft.ConnectionError}});Object.defineProperty(x,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ft.CancellationReceiverStrategy}});Object.defineProperty(x,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ft.CancellationSenderStrategy}});Object.defineProperty(x,"CancellationStrategy",{enumerable:!0,get:function(){return ft.CancellationStrategy}});Object.defineProperty(x,"MessageStrategy",{enumerable:!0,get:function(){return ft.MessageStrategy}});var HD=Pr();x.RAL=HD.default});var Pm=b(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Sm=require("util"),sr=ra(),Wi=class extends sr.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return Wi.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Sm.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};Wi.emptyBuffer=Buffer.allocUnsafe(0);var Fl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),sr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),sr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),sr.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),sr.Disposable.create(()=>this.stream.off("data",e))}},Nl=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),sr.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),sr.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),sr.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let o=s=>{s==null?r():i(s)};typeof e=="string"?this.stream.write(e,t,o):this.stream.write(e,o)})}end(){this.stream.end()}},Tm=Object.freeze({messageBuffer:Object.freeze({create:n=>new Wi(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Sm.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Fl(n),asWritableStream:n=>new Nl(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Il(){return Tm}(function(n){function e(){sr.RAL.install(Tm)}n.install=e})(Il||(Il={}));Ml.default=Il});var si=b(le=>{"use strict";var $D=le&&le.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),WD=le&&le.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$D(e,n,t)};Object.defineProperty(le,"__esModule",{value:!0});le.createMessageConnection=le.createServerSocketTransport=le.createClientSocketTransport=le.createServerPipeTransport=le.createClientPipeTransport=le.generateRandomPipeName=le.StreamMessageWriter=le.StreamMessageReader=le.SocketMessageWriter=le.SocketMessageReader=le.PortMessageWriter=le.PortMessageReader=le.IPCMessageWriter=le.IPCMessageReader=void 0;var zi=Pm();zi.default.install();var qm=require("path"),zD=require("os"),KD=require("crypto"),sa=require("net"),Jt=ra();WD(ra(),le);var Ll=class extends Jt.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Jt.Disposable.create(()=>this.process.off("message",e))}};le.IPCMessageReader=Ll;var jl=class extends Jt.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};le.IPCMessageWriter=jl;var Al=class extends Jt.AbstractMessageReader{constructor(e){super(),this.onData=new Jt.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};le.PortMessageReader=Al;var Hl=class extends Jt.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};le.PortMessageWriter=Hl;var ii=class extends Jt.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,zi.default)().stream.asReadableStream(e),t)}};le.SocketMessageReader=ii;var oi=class extends Jt.WriteableStreamMessageWriter{constructor(e,t){super((0,zi.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};le.SocketMessageWriter=oi;var ia=class extends Jt.ReadableStreamMessageReader{constructor(e,t){super((0,zi.default)().stream.asReadableStream(e),t)}};le.StreamMessageReader=ia;var oa=class extends Jt.WriteableStreamMessageWriter{constructor(e,t){super((0,zi.default)().stream.asWritableStream(e),t)}};le.StreamMessageWriter=oa;var xm=process.env.XDG_RUNTIME_DIR,UD=new Map([["linux",107],["darwin",103]]);function BD(){let n=(0,KD.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;xm?e=qm.join(xm,`vscode-ipc-${n}.sock`):e=qm.join(zD.tmpdir(),`vscode-${n}.sock`);let t=UD.get(process.platform);return t!==void 0&&e.length>t&&(0,zi.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}le.generateRandomPipeName=BD;function GD(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,sa.createServer)(a=>{s.close(),t([new ii(a,e),new oi(a,e)])});s.on("error",o),s.listen(n,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}le.createClientPipeTransport=GD;function VD(n,e="utf-8"){let t=(0,sa.createConnection)(n);return[new ii(t,e),new oi(t,e)]}le.createServerPipeTransport=VD;function XD(n,e="utf-8"){let t,r=new Promise((i,o)=>{t=i});return new Promise((i,o)=>{let s=(0,sa.createServer)(a=>{s.close(),t([new ii(a,e),new oi(a,e)])});s.on("error",o),s.listen(n,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})}le.createClientSocketTransport=XD;function JD(n,e="utf-8"){let t=(0,sa.createConnection)(n,"127.0.0.1");return[new ii(t,e),new oi(t,e)]}le.createServerSocketTransport=JD;function QD(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function YD(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function ZD(n,e,t,r){t||(t=Jt.NullLogger);let i=QD(n)?new ia(n):n,o=YD(e)?new oa(e):e;return Jt.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Jt.createMessageConnection)(i,o,t,r)}le.createMessageConnection=ZD});var $l=b((XN,km)=>{"use strict";km.exports=si()});var ga={};oD(ga,{AnnotatedTextEdit:()=>ar,ChangeAnnotation:()=>ai,ChangeAnnotationIdentifier:()=>ht,CodeAction:()=>wd,CodeActionContext:()=>_d,CodeActionKind:()=>Cd,CodeActionTriggerKind:()=>Wo,CodeDescription:()=>Ql,CodeLens:()=>bd,Color:()=>ua,ColorInformation:()=>Ul,ColorPresentation:()=>Bl,Command:()=>ci,CompletionItem:()=>ad,CompletionItemKind:()=>td,CompletionItemLabelDetails:()=>sd,CompletionItemTag:()=>rd,CompletionList:()=>cd,CreateFile:()=>Ki,DeleteFile:()=>Bi,Diagnostic:()=>jo,DiagnosticRelatedInformation:()=>la,DiagnosticSeverity:()=>Xl,DiagnosticTag:()=>Jl,DocumentHighlight:()=>hd,DocumentHighlightKind:()=>fd,DocumentLink:()=>Rd,DocumentSymbol:()=>yd,DocumentUri:()=>Wl,EOL:()=>tR,FoldingRange:()=>Vl,FoldingRangeKind:()=>Gl,FormattingOptions:()=>Dd,Hover:()=>ud,InlayHint:()=>Fd,InlayHintKind:()=>ha,InlayHintLabelPart:()=>pa,InlineValueContext:()=>Od,InlineValueEvaluatableExpression:()=>Ed,InlineValueText:()=>xd,InlineValueVariableLookup:()=>kd,InsertReplaceEdit:()=>id,InsertTextFormat:()=>nd,InsertTextMode:()=>od,Location:()=>Lo,LocationLink:()=>Kl,MarkedString:()=>$o,MarkupContent:()=>Gi,MarkupKind:()=>fa,OptionalVersionedTextDocumentIdentifier:()=>Ho,ParameterInformation:()=>ld,Position:()=>cn,Range:()=>Ve,RenameFile:()=>Ui,SelectionRange:()=>Sd,SemanticTokenModifiers:()=>Pd,SemanticTokenTypes:()=>Td,SemanticTokens:()=>qd,SignatureInformation:()=>dd,SymbolInformation:()=>md,SymbolKind:()=>pd,SymbolTag:()=>gd,TextDocument:()=>Id,TextDocumentEdit:()=>Ao,TextDocumentIdentifier:()=>Yl,TextDocumentItem:()=>ed,TextEdit:()=>Un,URI:()=>ca,VersionedTextDocumentIdentifier:()=>Zl,WorkspaceChange:()=>eR,WorkspaceEdit:()=>da,WorkspaceFolder:()=>Nd,WorkspaceSymbol:()=>vd,integer:()=>zl,uinteger:()=>Mo});var Wl,ca,zl,Mo,cn,Ve,Lo,Kl,ua,Ul,Bl,Gl,Vl,la,Xl,Jl,Ql,jo,ci,Un,ai,ht,ar,Ao,Ki,Ui,Bi,da,aa,Em,eR,Yl,Zl,Ho,ed,fa,Gi,td,nd,rd,id,od,sd,ad,cd,$o,ud,ld,dd,fd,hd,pd,gd,md,vd,yd,Cd,Wo,_d,wd,bd,Dd,Rd,Sd,Td,Pd,qd,xd,kd,Ed,Od,ha,pa,Fd,Nd,tR,Id,nR,T,ma=iD(()=>{"use strict";(function(n){function e(t){return typeof t=="string"}n.is=e})(Wl||(Wl={}));(function(n){function e(t){return typeof t=="string"}n.is=e})(ca||(ca={}));(function(n){n.MIN_VALUE=-2147483648,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(zl||(zl={}));(function(n){n.MIN_VALUE=0,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(Mo||(Mo={}));(function(n){function e(r,i){return r===Number.MAX_VALUE&&(r=Mo.MAX_VALUE),i===Number.MAX_VALUE&&(i=Mo.MAX_VALUE),{line:r,character:i}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&T.uinteger(i.line)&&T.uinteger(i.character)}n.is=t})(cn||(cn={}));(function(n){function e(r,i,o,s){if(T.uinteger(r)&&T.uinteger(i)&&T.uinteger(o)&&T.uinteger(s))return{start:cn.create(r,i),end:cn.create(o,s)};if(cn.is(r)&&cn.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(o,", ").concat(s,"]"))}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&cn.is(i.start)&&cn.is(i.end)}n.is=t})(Ve||(Ve={}));(function(n){function e(r,i){return{uri:r,range:i}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&Ve.is(i.range)&&(T.string(i.uri)||T.undefined(i.uri))}n.is=t})(Lo||(Lo={}));(function(n){function e(r,i,o,s){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&Ve.is(i.targetRange)&&T.string(i.targetUri)&&Ve.is(i.targetSelectionRange)&&(Ve.is(i.originSelectionRange)||T.undefined(i.originSelectionRange))}n.is=t})(Kl||(Kl={}));(function(n){function e(r,i,o,s){return{red:r,green:i,blue:o,alpha:s}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&T.numberRange(i.red,0,1)&&T.numberRange(i.green,0,1)&&T.numberRange(i.blue,0,1)&&T.numberRange(i.alpha,0,1)}n.is=t})(ua||(ua={}));(function(n){function e(r,i){return{range:r,color:i}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&Ve.is(i.range)&&ua.is(i.color)}n.is=t})(Ul||(Ul={}));(function(n){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&T.string(i.label)&&(T.undefined(i.textEdit)||Un.is(i))&&(T.undefined(i.additionalTextEdits)||T.typedArray(i.additionalTextEdits,Un.is))}n.is=t})(Bl||(Bl={}));(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(Gl||(Gl={}));(function(n){function e(r,i,o,s,a,c){var l={startLine:r,endLine:i};return T.defined(o)&&(l.startCharacter=o),T.defined(s)&&(l.endCharacter=s),T.defined(a)&&(l.kind=a),T.defined(c)&&(l.collapsedText=c),l}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&T.uinteger(i.startLine)&&T.uinteger(i.startLine)&&(T.undefined(i.startCharacter)||T.uinteger(i.startCharacter))&&(T.undefined(i.endCharacter)||T.uinteger(i.endCharacter))&&(T.undefined(i.kind)||T.string(i.kind))}n.is=t})(Vl||(Vl={}));(function(n){function e(r,i){return{location:r,message:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&Lo.is(i.location)&&T.string(i.message)}n.is=t})(la||(la={}));(function(n){n.Error=1,n.Warning=2,n.Information=3,n.Hint=4})(Xl||(Xl={}));(function(n){n.Unnecessary=1,n.Deprecated=2})(Jl||(Jl={}));(function(n){function e(t){var r=t;return T.objectLiteral(r)&&T.string(r.href)}n.is=e})(Ql||(Ql={}));(function(n){function e(r,i,o,s,a,c){var l={range:r,message:i};return T.defined(o)&&(l.severity=o),T.defined(s)&&(l.code=s),T.defined(a)&&(l.source=a),T.defined(c)&&(l.relatedInformation=c),l}n.create=e;function t(r){var i,o=r;return T.defined(o)&&Ve.is(o.range)&&T.string(o.message)&&(T.number(o.severity)||T.undefined(o.severity))&&(T.integer(o.code)||T.string(o.code)||T.undefined(o.code))&&(T.undefined(o.codeDescription)||T.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(T.string(o.source)||T.undefined(o.source))&&(T.undefined(o.relatedInformation)||T.typedArray(o.relatedInformation,la.is))}n.is=t})(jo||(jo={}));(function(n){function e(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:r,command:i};return T.defined(o)&&o.length>0&&(a.arguments=o),a}n.create=e;function t(r){var i=r;return T.defined(i)&&T.string(i.title)&&T.string(i.command)}n.is=t})(ci||(ci={}));(function(n){function e(o,s){return{range:o,newText:s}}n.replace=e;function t(o,s){return{range:{start:o,end:o},newText:s}}n.insert=t;function r(o){return{range:o,newText:""}}n.del=r;function i(o){var s=o;return T.objectLiteral(s)&&T.string(s.newText)&&Ve.is(s.range)}n.is=i})(Un||(Un={}));(function(n){function e(r,i,o){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&T.string(i.label)&&(T.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(T.string(i.description)||i.description===void 0)}n.is=t})(ai||(ai={}));(function(n){function e(t){var r=t;return T.string(r)}n.is=e})(ht||(ht={}));(function(n){function e(o,s,a){return{range:o,newText:s,annotationId:a}}n.replace=e;function t(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}n.insert=t;function r(o,s){return{range:o,newText:"",annotationId:s}}n.del=r;function i(o){var s=o;return Un.is(s)&&(ai.is(s.annotationId)||ht.is(s.annotationId))}n.is=i})(ar||(ar={}));(function(n){function e(r,i){return{textDocument:r,edits:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&Ho.is(i.textDocument)&&Array.isArray(i.edits)}n.is=t})(Ao||(Ao={}));(function(n){function e(r,i,o){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}n.create=e;function t(r){var i=r;return i&&i.kind==="create"&&T.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||T.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||T.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ht.is(i.annotationId))}n.is=t})(Ki||(Ki={}));(function(n){function e(r,i,o,s){var a={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){var i=r;return i&&i.kind==="rename"&&T.string(i.oldUri)&&T.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||T.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||T.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||ht.is(i.annotationId))}n.is=t})(Ui||(Ui={}));(function(n){function e(r,i,o){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}n.create=e;function t(r){var i=r;return i&&i.kind==="delete"&&T.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||T.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||T.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||ht.is(i.annotationId))}n.is=t})(Bi||(Bi={}));(function(n){function e(t){var r=t;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return T.string(i.kind)?Ki.is(i)||Ui.is(i)||Bi.is(i):Ao.is(i)}))}n.is=e})(da||(da={}));aa=function(){function n(e,t){this.edits=e,this.changeAnnotations=t}return n.prototype.insert=function(e,t,r){var i,o;if(r===void 0?i=Un.insert(e,t):ht.is(r)?(o=r,i=ar.insert(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=ar.insert(e,t,o)),this.edits.push(i),o!==void 0)return o},n.prototype.replace=function(e,t,r){var i,o;if(r===void 0?i=Un.replace(e,t):ht.is(r)?(o=r,i=ar.replace(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=ar.replace(e,t,o)),this.edits.push(i),o!==void 0)return o},n.prototype.delete=function(e,t){var r,i;if(t===void 0?r=Un.del(e):ht.is(t)?(i=t,r=ar.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),r=ar.del(e,i)),this.edits.push(r),i!==void 0)return i},n.prototype.add=function(e){this.edits.push(e)},n.prototype.all=function(){return this.edits},n.prototype.clear=function(){this.edits.splice(0,this.edits.length)},n.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},n}(),Em=function(){function n(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return n.prototype.all=function(){return this._annotations},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype.manage=function(e,t){var r;if(ht.is(e)?r=e:(r=this.nextId(),t=e),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(t===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=t,this._size++,r},n.prototype.nextId=function(){return this._counter++,this._counter.toString()},n}(),eR=function(){function n(e){var t=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Em(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(Ao.is(r)){var i=new aa(r.edits,t._changeAnnotations);t._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new aa(e.changes[r]);t._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(n.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),n.prototype.getTextEditChange=function(e){if(Ho.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},r=this._textEditChanges[t.uri];if(!r){var i=[],o={textDocument:t,edits:i};this._workspaceEdit.documentChanges.push(o),r=new aa(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new aa(i),this._textEditChanges[e]=r}return r}},n.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Em,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},n.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},n.prototype.createFile=function(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ai.is(t)||ht.is(t)?i=t:r=t;var o,s;if(i===void 0?o=Ki.create(e,r):(s=ht.is(i)?i:this._changeAnnotations.manage(i),o=Ki.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},n.prototype.renameFile=function(e,t,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ai.is(r)||ht.is(r)?o=r:i=r;var s,a;if(o===void 0?s=Ui.create(e,t,i):(a=ht.is(o)?o:this._changeAnnotations.manage(o),s=Ui.create(e,t,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},n.prototype.deleteFile=function(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ai.is(t)||ht.is(t)?i=t:r=t;var o,s;if(i===void 0?o=Bi.create(e,r):(s=ht.is(i)?i:this._changeAnnotations.manage(i),o=Bi.create(e,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},n}();(function(n){function e(r){return{uri:r}}n.create=e;function t(r){var i=r;return T.defined(i)&&T.string(i.uri)}n.is=t})(Yl||(Yl={}));(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&T.string(i.uri)&&T.integer(i.version)}n.is=t})(Zl||(Zl={}));(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&T.string(i.uri)&&(i.version===null||T.integer(i.version))}n.is=t})(Ho||(Ho={}));(function(n){function e(r,i,o,s){return{uri:r,languageId:i,version:o,text:s}}n.create=e;function t(r){var i=r;return T.defined(i)&&T.string(i.uri)&&T.string(i.languageId)&&T.integer(i.version)&&T.string(i.text)}n.is=t})(ed||(ed={}));(function(n){n.PlainText="plaintext",n.Markdown="markdown";function e(t){var r=t;return r===n.PlainText||r===n.Markdown}n.is=e})(fa||(fa={}));(function(n){function e(t){var r=t;return T.objectLiteral(t)&&fa.is(r.kind)&&T.string(r.value)}n.is=e})(Gi||(Gi={}));(function(n){n.Text=1,n.Method=2,n.Function=3,n.Constructor=4,n.Field=5,n.Variable=6,n.Class=7,n.Interface=8,n.Module=9,n.Property=10,n.Unit=11,n.Value=12,n.Enum=13,n.Keyword=14,n.Snippet=15,n.Color=16,n.File=17,n.Reference=18,n.Folder=19,n.EnumMember=20,n.Constant=21,n.Struct=22,n.Event=23,n.Operator=24,n.TypeParameter=25})(td||(td={}));(function(n){n.PlainText=1,n.Snippet=2})(nd||(nd={}));(function(n){n.Deprecated=1})(rd||(rd={}));(function(n){function e(r,i,o){return{newText:r,insert:i,replace:o}}n.create=e;function t(r){var i=r;return i&&T.string(i.newText)&&Ve.is(i.insert)&&Ve.is(i.replace)}n.is=t})(id||(id={}));(function(n){n.asIs=1,n.adjustIndentation=2})(od||(od={}));(function(n){function e(t){var r=t;return r&&(T.string(r.detail)||r.detail===void 0)&&(T.string(r.description)||r.description===void 0)}n.is=e})(sd||(sd={}));(function(n){function e(t){return{label:t}}n.create=e})(ad||(ad={}));(function(n){function e(t,r){return{items:t||[],isIncomplete:!!r}}n.create=e})(cd||(cd={}));(function(n){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=e;function t(r){var i=r;return T.string(i)||T.objectLiteral(i)&&T.string(i.language)&&T.string(i.value)}n.is=t})($o||($o={}));(function(n){function e(t){var r=t;return!!r&&T.objectLiteral(r)&&(Gi.is(r.contents)||$o.is(r.contents)||T.typedArray(r.contents,$o.is))&&(t.range===void 0||Ve.is(t.range))}n.is=e})(ud||(ud={}));(function(n){function e(t,r){return r?{label:t,documentation:r}:{label:t}}n.create=e})(ld||(ld={}));(function(n){function e(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:t};return T.defined(r)&&(s.documentation=r),T.defined(i)?s.parameters=i:s.parameters=[],s}n.create=e})(dd||(dd={}));(function(n){n.Text=1,n.Read=2,n.Write=3})(fd||(fd={}));(function(n){function e(t,r){var i={range:t};return T.number(r)&&(i.kind=r),i}n.create=e})(hd||(hd={}));(function(n){n.File=1,n.Module=2,n.Namespace=3,n.Package=4,n.Class=5,n.Method=6,n.Property=7,n.Field=8,n.Constructor=9,n.Enum=10,n.Interface=11,n.Function=12,n.Variable=13,n.Constant=14,n.String=15,n.Number=16,n.Boolean=17,n.Array=18,n.Object=19,n.Key=20,n.Null=21,n.EnumMember=22,n.Struct=23,n.Event=24,n.Operator=25,n.TypeParameter=26})(pd||(pd={}));(function(n){n.Deprecated=1})(gd||(gd={}));(function(n){function e(t,r,i,o,s){var a={name:t,kind:r,location:{uri:o,range:i}};return s&&(a.containerName=s),a}n.create=e})(md||(md={}));(function(n){function e(t,r,i,o){return o!==void 0?{name:t,kind:r,location:{uri:i,range:o}}:{name:t,kind:r,location:{uri:i}}}n.create=e})(vd||(vd={}));(function(n){function e(r,i,o,s,a,c){var l={name:r,detail:i,kind:o,range:s,selectionRange:a};return c!==void 0&&(l.children=c),l}n.create=e;function t(r){var i=r;return i&&T.string(i.name)&&T.number(i.kind)&&Ve.is(i.range)&&Ve.is(i.selectionRange)&&(i.detail===void 0||T.string(i.detail))&&(i.deprecated===void 0||T.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}n.is=t})(yd||(yd={}));(function(n){n.Empty="",n.QuickFix="quickfix",n.Refactor="refactor",n.RefactorExtract="refactor.extract",n.RefactorInline="refactor.inline",n.RefactorRewrite="refactor.rewrite",n.Source="source",n.SourceOrganizeImports="source.organizeImports",n.SourceFixAll="source.fixAll"})(Cd||(Cd={}));(function(n){n.Invoked=1,n.Automatic=2})(Wo||(Wo={}));(function(n){function e(r,i,o){var s={diagnostics:r};return i!=null&&(s.only=i),o!=null&&(s.triggerKind=o),s}n.create=e;function t(r){var i=r;return T.defined(i)&&T.typedArray(i.diagnostics,jo.is)&&(i.only===void 0||T.typedArray(i.only,T.string))&&(i.triggerKind===void 0||i.triggerKind===Wo.Invoked||i.triggerKind===Wo.Automatic)}n.is=t})(_d||(_d={}));(function(n){function e(r,i,o){var s={title:r},a=!0;return typeof i=="string"?(a=!1,s.kind=i):ci.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}n.create=e;function t(r){var i=r;return i&&T.string(i.title)&&(i.diagnostics===void 0||T.typedArray(i.diagnostics,jo.is))&&(i.kind===void 0||T.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ci.is(i.command))&&(i.isPreferred===void 0||T.boolean(i.isPreferred))&&(i.edit===void 0||da.is(i.edit))}n.is=t})(wd||(wd={}));(function(n){function e(r,i){var o={range:r};return T.defined(i)&&(o.data=i),o}n.create=e;function t(r){var i=r;return T.defined(i)&&Ve.is(i.range)&&(T.undefined(i.command)||ci.is(i.command))}n.is=t})(bd||(bd={}));(function(n){function e(r,i){return{tabSize:r,insertSpaces:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&T.uinteger(i.tabSize)&&T.boolean(i.insertSpaces)}n.is=t})(Dd||(Dd={}));(function(n){function e(r,i,o){return{range:r,target:i,data:o}}n.create=e;function t(r){var i=r;return T.defined(i)&&Ve.is(i.range)&&(T.undefined(i.target)||T.string(i.target))}n.is=t})(Rd||(Rd={}));(function(n){function e(r,i){return{range:r,parent:i}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&Ve.is(i.range)&&(i.parent===void 0||n.is(i.parent))}n.is=t})(Sd||(Sd={}));(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",n.decorator="decorator"})(Td||(Td={}));(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(Pd||(Pd={}));(function(n){function e(t){var r=t;return T.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(qd||(qd={}));(function(n){function e(r,i){return{range:r,text:i}}n.create=e;function t(r){var i=r;return i!=null&&Ve.is(i.range)&&T.string(i.text)}n.is=t})(xd||(xd={}));(function(n){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}n.create=e;function t(r){var i=r;return i!=null&&Ve.is(i.range)&&T.boolean(i.caseSensitiveLookup)&&(T.string(i.variableName)||i.variableName===void 0)}n.is=t})(kd||(kd={}));(function(n){function e(r,i){return{range:r,expression:i}}n.create=e;function t(r){var i=r;return i!=null&&Ve.is(i.range)&&(T.string(i.expression)||i.expression===void 0)}n.is=t})(Ed||(Ed={}));(function(n){function e(r,i){return{frameId:r,stoppedLocation:i}}n.create=e;function t(r){var i=r;return T.defined(i)&&Ve.is(r.stoppedLocation)}n.is=t})(Od||(Od={}));(function(n){n.Type=1,n.Parameter=2;function e(t){return t===1||t===2}n.is=e})(ha||(ha={}));(function(n){function e(r){return{value:r}}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&(i.tooltip===void 0||T.string(i.tooltip)||Gi.is(i.tooltip))&&(i.location===void 0||Lo.is(i.location))&&(i.command===void 0||ci.is(i.command))}n.is=t})(pa||(pa={}));(function(n){function e(r,i,o){var s={position:r,label:i};return o!==void 0&&(s.kind=o),s}n.create=e;function t(r){var i=r;return T.objectLiteral(i)&&cn.is(i.position)&&(T.string(i.label)||T.typedArray(i.label,pa.is))&&(i.kind===void 0||ha.is(i.kind))&&i.textEdits===void 0||T.typedArray(i.textEdits,Un.is)&&(i.tooltip===void 0||T.string(i.tooltip)||Gi.is(i.tooltip))&&(i.paddingLeft===void 0||T.boolean(i.paddingLeft))&&(i.paddingRight===void 0||T.boolean(i.paddingRight))}n.is=t})(Fd||(Fd={}));(function(n){function e(t){var r=t;return T.objectLiteral(r)&&ca.is(r.uri)&&T.string(r.name)}n.is=e})(Nd||(Nd={}));tR=[`
`,`\r
`,"\r"];(function(n){function e(o,s,a,c){return new nR(o,s,a,c)}n.create=e;function t(o){var s=o;return!!(T.defined(s)&&T.string(s.uri)&&(T.undefined(s.languageId)||T.string(s.languageId))&&T.uinteger(s.lineCount)&&T.func(s.getText)&&T.func(s.positionAt)&&T.func(s.offsetAt))}n.is=t;function r(o,s){for(var a=o.getText(),c=i(s,function(m,w){var D=m.range.start.line-w.range.start.line;return D===0?m.range.start.character-w.range.start.character:D}),l=a.length,d=c.length-1;d>=0;d--){var g=c[d],f=o.offsetAt(g.range.start),p=o.offsetAt(g.range.end);if(p<=l)a=a.substring(0,f)+g.newText+a.substring(p,a.length);else throw new Error("Overlapping edit");l=f}return a}n.applyEdits=r;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,c=o.slice(0,a),l=o.slice(a);i(c,s),i(l,s);for(var d=0,g=0,f=0;d<c.length&&g<l.length;){var p=s(c[d],l[g]);p<=0?o[f++]=c[d++]:o[f++]=l[g++]}for(;d<c.length;)o[f++]=c[d++];for(;g<l.length;)o[f++]=l[g++];return o}})(Id||(Id={}));nR=function(){function n(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),n.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content},n.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},n.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],t=this._content,r=!0,i=0;i<t.length;i++){r&&(e.push(i),r=!1);var o=t.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},n.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),r=0,i=t.length;if(i===0)return cn.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);t[o]>e?i=o:r=o+1}var s=r-1;return cn.create(s,e-t[s])},n.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var r=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(n.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),n}();(function(n){var e=Object.prototype.toString;function t(p){return typeof p<"u"}n.defined=t;function r(p){return typeof p>"u"}n.undefined=r;function i(p){return p===!0||p===!1}n.boolean=i;function o(p){return e.call(p)==="[object String]"}n.string=o;function s(p){return e.call(p)==="[object Number]"}n.number=s;function a(p,m,w){return e.call(p)==="[object Number]"&&m<=p&&p<=w}n.numberRange=a;function c(p){return e.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}n.integer=c;function l(p){return e.call(p)==="[object Number]"&&0<=p&&p<=2147483647}n.uinteger=l;function d(p){return e.call(p)==="[object Function]"}n.func=d;function g(p){return p!==null&&typeof p=="object"}n.objectLiteral=g;function f(p,m){return Array.isArray(p)&&p.every(m)}n.typedArray=f})(T||(T={}))});var $e=b(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.ProtocolNotificationType=Pt.ProtocolNotificationType0=Pt.ProtocolRequestType=Pt.ProtocolRequestType0=Pt.RegistrationType=Pt.MessageDirection=void 0;var Vi=si(),rR;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(rR=Pt.MessageDirection||(Pt.MessageDirection={}));var Md=class{constructor(e){this.method=e}};Pt.RegistrationType=Md;var Ld=class extends Vi.RequestType0{constructor(e){super(e)}};Pt.ProtocolRequestType0=Ld;var jd=class extends Vi.RequestType{constructor(e){super(e,Vi.ParameterStructures.byName)}};Pt.ProtocolRequestType=jd;var Ad=class extends Vi.NotificationType0{constructor(e){super(e)}};Pt.ProtocolNotificationType0=Ad;var Hd=class extends Vi.NotificationType{constructor(e){super(e,Vi.ParameterStructures.byName)}};Pt.ProtocolNotificationType=Hd});var va=b(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.objectLiteral=Ye.typedArray=Ye.stringArray=Ye.array=Ye.func=Ye.error=Ye.number=Ye.string=Ye.boolean=void 0;function iR(n){return n===!0||n===!1}Ye.boolean=iR;function Om(n){return typeof n=="string"||n instanceof String}Ye.string=Om;function oR(n){return typeof n=="number"||n instanceof Number}Ye.number=oR;function sR(n){return n instanceof Error}Ye.error=sR;function aR(n){return typeof n=="function"}Ye.func=aR;function Fm(n){return Array.isArray(n)}Ye.array=Fm;function cR(n){return Fm(n)&&n.every(e=>Om(e))}Ye.stringArray=cR;function uR(n,e){return Array.isArray(n)&&n.every(e)}Ye.typedArray=uR;function lR(n){return n!==null&&typeof n=="object"}Ye.objectLiteral=lR});var Im=b(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.ImplementationRequest=void 0;var Nm=$e(),dR;(function(n){n.method="textDocument/implementation",n.messageDirection=Nm.MessageDirection.clientToServer,n.type=new Nm.ProtocolRequestType(n.method)})(dR=zo.ImplementationRequest||(zo.ImplementationRequest={}))});var Lm=b(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.TypeDefinitionRequest=void 0;var Mm=$e(),fR;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=Mm.MessageDirection.clientToServer,n.type=new Mm.ProtocolRequestType(n.method)})(fR=Ko.TypeDefinitionRequest||(Ko.TypeDefinitionRequest={}))});var jm=b(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.DidChangeWorkspaceFoldersNotification=xr.WorkspaceFoldersRequest=void 0;var ya=$e(),hR;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=ya.MessageDirection.serverToClient,n.type=new ya.ProtocolRequestType0(n.method)})(hR=xr.WorkspaceFoldersRequest||(xr.WorkspaceFoldersRequest={}));var pR;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=ya.MessageDirection.clientToServer,n.type=new ya.ProtocolNotificationType(n.method)})(pR=xr.DidChangeWorkspaceFoldersNotification||(xr.DidChangeWorkspaceFoldersNotification={}))});var Hm=b(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ConfigurationRequest=void 0;var Am=$e(),gR;(function(n){n.method="workspace/configuration",n.messageDirection=Am.MessageDirection.serverToClient,n.type=new Am.ProtocolRequestType(n.method)})(gR=Uo.ConfigurationRequest||(Uo.ConfigurationRequest={}))});var $m=b(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ColorPresentationRequest=kr.DocumentColorRequest=void 0;var Ca=$e(),mR;(function(n){n.method="textDocument/documentColor",n.messageDirection=Ca.MessageDirection.clientToServer,n.type=new Ca.ProtocolRequestType(n.method)})(mR=kr.DocumentColorRequest||(kr.DocumentColorRequest={}));var vR;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=Ca.MessageDirection.clientToServer,n.type=new Ca.ProtocolRequestType(n.method)})(vR=kr.ColorPresentationRequest||(kr.ColorPresentationRequest={}))});var zm=b(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.FoldingRangeRequest=void 0;var Wm=$e(),yR;(function(n){n.method="textDocument/foldingRange",n.messageDirection=Wm.MessageDirection.clientToServer,n.type=new Wm.ProtocolRequestType(n.method)})(yR=Bo.FoldingRangeRequest||(Bo.FoldingRangeRequest={}))});var Um=b(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.DeclarationRequest=void 0;var Km=$e(),CR;(function(n){n.method="textDocument/declaration",n.messageDirection=Km.MessageDirection.clientToServer,n.type=new Km.ProtocolRequestType(n.method)})(CR=Go.DeclarationRequest||(Go.DeclarationRequest={}))});var Gm=b(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.SelectionRangeRequest=void 0;var Bm=$e(),_R;(function(n){n.method="textDocument/selectionRange",n.messageDirection=Bm.MessageDirection.clientToServer,n.type=new Bm.ProtocolRequestType(n.method)})(_R=Vo.SelectionRangeRequest||(Vo.SelectionRangeRequest={}))});var Vm=b(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.WorkDoneProgressCancelNotification=Rn.WorkDoneProgressCreateRequest=Rn.WorkDoneProgress=void 0;var wR=si(),_a=$e(),bR;(function(n){n.type=new wR.ProgressType;function e(t){return t===n.type}n.is=e})(bR=Rn.WorkDoneProgress||(Rn.WorkDoneProgress={}));var DR;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=_a.MessageDirection.serverToClient,n.type=new _a.ProtocolRequestType(n.method)})(DR=Rn.WorkDoneProgressCreateRequest||(Rn.WorkDoneProgressCreateRequest={}));var RR;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=_a.MessageDirection.clientToServer,n.type=new _a.ProtocolNotificationType(n.method)})(RR=Rn.WorkDoneProgressCancelNotification||(Rn.WorkDoneProgressCancelNotification={}))});var Xm=b(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.CallHierarchyOutgoingCallsRequest=Sn.CallHierarchyIncomingCallsRequest=Sn.CallHierarchyPrepareRequest=void 0;var Xi=$e(),SR;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=Xi.MessageDirection.clientToServer,n.type=new Xi.ProtocolRequestType(n.method)})(SR=Sn.CallHierarchyPrepareRequest||(Sn.CallHierarchyPrepareRequest={}));var TR;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=Xi.MessageDirection.clientToServer,n.type=new Xi.ProtocolRequestType(n.method)})(TR=Sn.CallHierarchyIncomingCallsRequest||(Sn.CallHierarchyIncomingCallsRequest={}));var PR;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=Xi.MessageDirection.clientToServer,n.type=new Xi.ProtocolRequestType(n.method)})(PR=Sn.CallHierarchyOutgoingCallsRequest||(Sn.CallHierarchyOutgoingCallsRequest={}))});var Jm=b(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.SemanticTokensRefreshRequest=Ze.SemanticTokensRangeRequest=Ze.SemanticTokensDeltaRequest=Ze.SemanticTokensRequest=Ze.SemanticTokensRegistrationType=Ze.TokenFormat=void 0;var cr=$e(),qR;(function(n){n.Relative="relative"})(qR=Ze.TokenFormat||(Ze.TokenFormat={}));var wa;(function(n){n.method="textDocument/semanticTokens",n.type=new cr.RegistrationType(n.method)})(wa=Ze.SemanticTokensRegistrationType||(Ze.SemanticTokensRegistrationType={}));var xR;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=cr.MessageDirection.clientToServer,n.type=new cr.ProtocolRequestType(n.method),n.registrationMethod=wa.method})(xR=Ze.SemanticTokensRequest||(Ze.SemanticTokensRequest={}));var kR;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=cr.MessageDirection.clientToServer,n.type=new cr.ProtocolRequestType(n.method),n.registrationMethod=wa.method})(kR=Ze.SemanticTokensDeltaRequest||(Ze.SemanticTokensDeltaRequest={}));var ER;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=cr.MessageDirection.clientToServer,n.type=new cr.ProtocolRequestType(n.method),n.registrationMethod=wa.method})(ER=Ze.SemanticTokensRangeRequest||(Ze.SemanticTokensRangeRequest={}));var OR;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=cr.MessageDirection.serverToClient,n.type=new cr.ProtocolRequestType0(n.method)})(OR=Ze.SemanticTokensRefreshRequest||(Ze.SemanticTokensRefreshRequest={}))});var Ym=b(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ShowDocumentRequest=void 0;var Qm=$e(),FR;(function(n){n.method="window/showDocument",n.messageDirection=Qm.MessageDirection.serverToClient,n.type=new Qm.ProtocolRequestType(n.method)})(FR=Xo.ShowDocumentRequest||(Xo.ShowDocumentRequest={}))});var ev=b(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.LinkedEditingRangeRequest=void 0;var Zm=$e(),NR;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=Zm.MessageDirection.clientToServer,n.type=new Zm.ProtocolRequestType(n.method)})(NR=Jo.LinkedEditingRangeRequest||(Jo.LinkedEditingRangeRequest={}))});var tv=b(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.WillDeleteFilesRequest=We.DidDeleteFilesNotification=We.DidRenameFilesNotification=We.WillRenameFilesRequest=We.DidCreateFilesNotification=We.WillCreateFilesRequest=We.FileOperationPatternKind=void 0;var un=$e(),IR;(function(n){n.file="file",n.folder="folder"})(IR=We.FileOperationPatternKind||(We.FileOperationPatternKind={}));var MR;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolRequestType(n.method)})(MR=We.WillCreateFilesRequest||(We.WillCreateFilesRequest={}));var LR;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolNotificationType(n.method)})(LR=We.DidCreateFilesNotification||(We.DidCreateFilesNotification={}));var jR;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolRequestType(n.method)})(jR=We.WillRenameFilesRequest||(We.WillRenameFilesRequest={}));var AR;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolNotificationType(n.method)})(AR=We.DidRenameFilesNotification||(We.DidRenameFilesNotification={}));var HR;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolNotificationType(n.method)})(HR=We.DidDeleteFilesNotification||(We.DidDeleteFilesNotification={}));var $R;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=un.MessageDirection.clientToServer,n.type=new un.ProtocolRequestType(n.method)})($R=We.WillDeleteFilesRequest||(We.WillDeleteFilesRequest={}))});var rv=b(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.MonikerRequest=Tn.MonikerKind=Tn.UniquenessLevel=void 0;var nv=$e(),WR;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(WR=Tn.UniquenessLevel||(Tn.UniquenessLevel={}));var zR;(function(n){n.$import="import",n.$export="export",n.local="local"})(zR=Tn.MonikerKind||(Tn.MonikerKind={}));var KR;(function(n){n.method="textDocument/moniker",n.messageDirection=nv.MessageDirection.clientToServer,n.type=new nv.ProtocolRequestType(n.method)})(KR=Tn.MonikerRequest||(Tn.MonikerRequest={}))});var iv=b(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.TypeHierarchySubtypesRequest=Pn.TypeHierarchySupertypesRequest=Pn.TypeHierarchyPrepareRequest=void 0;var Ji=$e(),UR;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=Ji.MessageDirection.clientToServer,n.type=new Ji.ProtocolRequestType(n.method)})(UR=Pn.TypeHierarchyPrepareRequest||(Pn.TypeHierarchyPrepareRequest={}));var BR;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=Ji.MessageDirection.clientToServer,n.type=new Ji.ProtocolRequestType(n.method)})(BR=Pn.TypeHierarchySupertypesRequest||(Pn.TypeHierarchySupertypesRequest={}));var GR;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=Ji.MessageDirection.clientToServer,n.type=new Ji.ProtocolRequestType(n.method)})(GR=Pn.TypeHierarchySubtypesRequest||(Pn.TypeHierarchySubtypesRequest={}))});var ov=b(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.InlineValueRefreshRequest=Er.InlineValueRequest=void 0;var ba=$e(),VR;(function(n){n.method="textDocument/inlineValue",n.messageDirection=ba.MessageDirection.clientToServer,n.type=new ba.ProtocolRequestType(n.method)})(VR=Er.InlineValueRequest||(Er.InlineValueRequest={}));var XR;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=ba.MessageDirection.serverToClient,n.type=new ba.ProtocolRequestType0(n.method)})(XR=Er.InlineValueRefreshRequest||(Er.InlineValueRefreshRequest={}))});var sv=b(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.InlayHintRefreshRequest=qn.InlayHintResolveRequest=qn.InlayHintRequest=void 0;var Qi=$e(),JR;(function(n){n.method="textDocument/inlayHint",n.messageDirection=Qi.MessageDirection.clientToServer,n.type=new Qi.ProtocolRequestType(n.method)})(JR=qn.InlayHintRequest||(qn.InlayHintRequest={}));var QR;(function(n){n.method="inlayHint/resolve",n.messageDirection=Qi.MessageDirection.clientToServer,n.type=new Qi.ProtocolRequestType(n.method)})(QR=qn.InlayHintResolveRequest||(qn.InlayHintResolveRequest={}));var YR;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=Qi.MessageDirection.serverToClient,n.type=new Qi.ProtocolRequestType0(n.method)})(YR=qn.InlayHintRefreshRequest||(qn.InlayHintRefreshRequest={}))});var cv=b(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.DiagnosticRefreshRequest=pt.WorkspaceDiagnosticRequest=pt.DocumentDiagnosticRequest=pt.DocumentDiagnosticReportKind=pt.DiagnosticServerCancellationData=void 0;var av=si(),ZR=va(),Yi=$e(),eS;(function(n){function e(t){let r=t;return r&&ZR.boolean(r.retriggerRequest)}n.is=e})(eS=pt.DiagnosticServerCancellationData||(pt.DiagnosticServerCancellationData={}));var tS;(function(n){n.Full="full",n.Unchanged="unchanged"})(tS=pt.DocumentDiagnosticReportKind||(pt.DocumentDiagnosticReportKind={}));var nS;(function(n){n.method="textDocument/diagnostic",n.messageDirection=Yi.MessageDirection.clientToServer,n.type=new Yi.ProtocolRequestType(n.method),n.partialResult=new av.ProgressType})(nS=pt.DocumentDiagnosticRequest||(pt.DocumentDiagnosticRequest={}));var rS;(function(n){n.method="workspace/diagnostic",n.messageDirection=Yi.MessageDirection.clientToServer,n.type=new Yi.ProtocolRequestType(n.method),n.partialResult=new av.ProgressType})(rS=pt.WorkspaceDiagnosticRequest||(pt.WorkspaceDiagnosticRequest={}));var iS;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=Yi.MessageDirection.serverToClient,n.type=new Yi.ProtocolRequestType0(n.method)})(iS=pt.DiagnosticRefreshRequest||(pt.DiagnosticRefreshRequest={}))});var dv=b(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.DidCloseNotebookDocumentNotification=ge.DidSaveNotebookDocumentNotification=ge.DidChangeNotebookDocumentNotification=ge.NotebookCellArrayChange=ge.DidOpenNotebookDocumentNotification=ge.NotebookDocumentSyncRegistrationType=ge.NotebookDocument=ge.NotebookCell=ge.ExecutionSummary=ge.NotebookCellKind=void 0;var Qo=(ma(),xu(ga)),xn=va(),Bn=$e(),uv;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(uv=ge.NotebookCellKind||(ge.NotebookCellKind={}));var lv;(function(n){function e(i,o){let s={executionOrder:i};return(o===!0||o===!1)&&(s.success=o),s}n.create=e;function t(i){let o=i;return xn.objectLiteral(o)&&Qo.uinteger.is(o.executionOrder)&&(o.success===void 0||xn.boolean(o.success))}n.is=t;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}n.equals=r})(lv=ge.ExecutionSummary||(ge.ExecutionSummary={}));var $d;(function(n){function e(o,s){return{kind:o,document:s}}n.create=e;function t(o){let s=o;return xn.objectLiteral(s)&&uv.is(s.kind)&&Qo.DocumentUri.is(s.document)&&(s.metadata===void 0||xn.objectLiteral(s.metadata))}n.is=t;function r(o,s){let a=new Set;return o.document!==s.document&&a.add("document"),o.kind!==s.kind&&a.add("kind"),o.executionSummary!==s.executionSummary&&a.add("executionSummary"),(o.metadata!==void 0||s.metadata!==void 0)&&!i(o.metadata,s.metadata)&&a.add("metadata"),(o.executionSummary!==void 0||s.executionSummary!==void 0)&&!lv.equals(o.executionSummary,s.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(o,s){if(o===s)return!0;if(o==null||s===null||s===void 0||typeof o!=typeof s||typeof o!="object")return!1;let a=Array.isArray(o),c=Array.isArray(s);if(a!==c)return!1;if(a&&c){if(o.length!==s.length)return!1;for(let l=0;l<o.length;l++)if(!i(o[l],s[l]))return!1}if(xn.objectLiteral(o)&&xn.objectLiteral(s)){let l=Object.keys(o),d=Object.keys(s);if(l.length!==d.length||(l.sort(),d.sort(),!i(l,d)))return!1;for(let g=0;g<l.length;g++){let f=l[g];if(!i(o[f],s[f]))return!1}}return!0}})($d=ge.NotebookCell||(ge.NotebookCell={}));var oS;(function(n){function e(r,i,o,s){return{uri:r,notebookType:i,version:o,cells:s}}n.create=e;function t(r){let i=r;return xn.objectLiteral(i)&&xn.string(i.uri)&&Qo.integer.is(i.version)&&xn.typedArray(i.cells,$d.is)}n.is=t})(oS=ge.NotebookDocument||(ge.NotebookDocument={}));var Yo;(function(n){n.method="notebookDocument/sync",n.messageDirection=Bn.MessageDirection.clientToServer,n.type=new Bn.RegistrationType(n.method)})(Yo=ge.NotebookDocumentSyncRegistrationType||(ge.NotebookDocumentSyncRegistrationType={}));var sS;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=Bn.MessageDirection.clientToServer,n.type=new Bn.ProtocolNotificationType(n.method),n.registrationMethod=Yo.method})(sS=ge.DidOpenNotebookDocumentNotification||(ge.DidOpenNotebookDocumentNotification={}));var aS;(function(n){function e(r){let i=r;return xn.objectLiteral(i)&&Qo.uinteger.is(i.start)&&Qo.uinteger.is(i.deleteCount)&&(i.cells===void 0||xn.typedArray(i.cells,$d.is))}n.is=e;function t(r,i,o){let s={start:r,deleteCount:i};return o!==void 0&&(s.cells=o),s}n.create=t})(aS=ge.NotebookCellArrayChange||(ge.NotebookCellArrayChange={}));var cS;(function(n){n.method="notebookDocument/didChange",n.messageDirection=Bn.MessageDirection.clientToServer,n.type=new Bn.ProtocolNotificationType(n.method),n.registrationMethod=Yo.method})(cS=ge.DidChangeNotebookDocumentNotification||(ge.DidChangeNotebookDocumentNotification={}));var uS;(function(n){n.method="notebookDocument/didSave",n.messageDirection=Bn.MessageDirection.clientToServer,n.type=new Bn.ProtocolNotificationType(n.method),n.registrationMethod=Yo.method})(uS=ge.DidSaveNotebookDocumentNotification||(ge.DidSaveNotebookDocumentNotification={}));var lS;(function(n){n.method="notebookDocument/didClose",n.messageDirection=Bn.MessageDirection.clientToServer,n.type=new Bn.ProtocolNotificationType(n.method),n.registrationMethod=Yo.method})(lS=ge.DidCloseNotebookDocumentNotification||(ge.DidCloseNotebookDocumentNotification={}))});var _v=b(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.WorkspaceSymbolRequest=v.CodeActionResolveRequest=v.CodeActionRequest=v.DocumentSymbolRequest=v.DocumentHighlightRequest=v.ReferencesRequest=v.DefinitionRequest=v.SignatureHelpRequest=v.SignatureHelpTriggerKind=v.HoverRequest=v.CompletionResolveRequest=v.CompletionRequest=v.CompletionTriggerKind=v.PublishDiagnosticsNotification=v.WatchKind=v.RelativePattern=v.FileChangeType=v.DidChangeWatchedFilesNotification=v.WillSaveTextDocumentWaitUntilRequest=v.WillSaveTextDocumentNotification=v.TextDocumentSaveReason=v.DidSaveTextDocumentNotification=v.DidCloseTextDocumentNotification=v.DidChangeTextDocumentNotification=v.TextDocumentContentChangeEvent=v.DidOpenTextDocumentNotification=v.TextDocumentSyncKind=v.TelemetryEventNotification=v.LogMessageNotification=v.ShowMessageRequest=v.ShowMessageNotification=v.MessageType=v.DidChangeConfigurationNotification=v.ExitNotification=v.ShutdownRequest=v.InitializedNotification=v.InitializeErrorCodes=v.InitializeRequest=v.WorkDoneProgressOptions=v.TextDocumentRegistrationOptions=v.StaticRegistrationOptions=v.PositionEncodingKind=v.FailureHandlingKind=v.ResourceOperationKind=v.UnregistrationRequest=v.RegistrationRequest=v.DocumentSelector=v.NotebookCellTextDocumentFilter=v.NotebookDocumentFilter=v.TextDocumentFilter=void 0;v.TypeHierarchySubtypesRequest=v.TypeHierarchyPrepareRequest=v.MonikerRequest=v.MonikerKind=v.UniquenessLevel=v.WillDeleteFilesRequest=v.DidDeleteFilesNotification=v.WillRenameFilesRequest=v.DidRenameFilesNotification=v.WillCreateFilesRequest=v.DidCreateFilesNotification=v.FileOperationPatternKind=v.LinkedEditingRangeRequest=v.ShowDocumentRequest=v.SemanticTokensRegistrationType=v.SemanticTokensRefreshRequest=v.SemanticTokensRangeRequest=v.SemanticTokensDeltaRequest=v.SemanticTokensRequest=v.TokenFormat=v.CallHierarchyPrepareRequest=v.CallHierarchyOutgoingCallsRequest=v.CallHierarchyIncomingCallsRequest=v.WorkDoneProgressCancelNotification=v.WorkDoneProgressCreateRequest=v.WorkDoneProgress=v.SelectionRangeRequest=v.DeclarationRequest=v.FoldingRangeRequest=v.ColorPresentationRequest=v.DocumentColorRequest=v.ConfigurationRequest=v.DidChangeWorkspaceFoldersNotification=v.WorkspaceFoldersRequest=v.TypeDefinitionRequest=v.ImplementationRequest=v.ApplyWorkspaceEditRequest=v.ExecuteCommandRequest=v.PrepareRenameRequest=v.RenameRequest=v.PrepareSupportDefaultBehavior=v.DocumentOnTypeFormattingRequest=v.DocumentRangeFormattingRequest=v.DocumentFormattingRequest=v.DocumentLinkResolveRequest=v.DocumentLinkRequest=v.CodeLensRefreshRequest=v.CodeLensResolveRequest=v.CodeLensRequest=v.WorkspaceSymbolResolveRequest=void 0;v.DidCloseNotebookDocumentNotification=v.DidSaveNotebookDocumentNotification=v.DidChangeNotebookDocumentNotification=v.NotebookCellArrayChange=v.DidOpenNotebookDocumentNotification=v.NotebookDocumentSyncRegistrationType=v.NotebookDocument=v.NotebookCell=v.ExecutionSummary=v.NotebookCellKind=v.DiagnosticRefreshRequest=v.WorkspaceDiagnosticRequest=v.DocumentDiagnosticRequest=v.DocumentDiagnosticReportKind=v.DiagnosticServerCancellationData=v.InlayHintRefreshRequest=v.InlayHintResolveRequest=v.InlayHintRequest=v.InlineValueRefreshRequest=v.InlineValueRequest=v.TypeHierarchySupertypesRequest=void 0;var F=$e(),fv=(ma(),xu(ga)),gt=va(),dS=Im();Object.defineProperty(v,"ImplementationRequest",{enumerable:!0,get:function(){return dS.ImplementationRequest}});var fS=Lm();Object.defineProperty(v,"TypeDefinitionRequest",{enumerable:!0,get:function(){return fS.TypeDefinitionRequest}});var hv=jm();Object.defineProperty(v,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return hv.WorkspaceFoldersRequest}});Object.defineProperty(v,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return hv.DidChangeWorkspaceFoldersNotification}});var hS=Hm();Object.defineProperty(v,"ConfigurationRequest",{enumerable:!0,get:function(){return hS.ConfigurationRequest}});var pv=$m();Object.defineProperty(v,"DocumentColorRequest",{enumerable:!0,get:function(){return pv.DocumentColorRequest}});Object.defineProperty(v,"ColorPresentationRequest",{enumerable:!0,get:function(){return pv.ColorPresentationRequest}});var pS=zm();Object.defineProperty(v,"FoldingRangeRequest",{enumerable:!0,get:function(){return pS.FoldingRangeRequest}});var gS=Um();Object.defineProperty(v,"DeclarationRequest",{enumerable:!0,get:function(){return gS.DeclarationRequest}});var mS=Gm();Object.defineProperty(v,"SelectionRangeRequest",{enumerable:!0,get:function(){return mS.SelectionRangeRequest}});var Wd=Vm();Object.defineProperty(v,"WorkDoneProgress",{enumerable:!0,get:function(){return Wd.WorkDoneProgress}});Object.defineProperty(v,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Wd.WorkDoneProgressCreateRequest}});Object.defineProperty(v,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Wd.WorkDoneProgressCancelNotification}});var zd=Xm();Object.defineProperty(v,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return zd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(v,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return zd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(v,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return zd.CallHierarchyPrepareRequest}});var Zi=Jm();Object.defineProperty(v,"TokenFormat",{enumerable:!0,get:function(){return Zi.TokenFormat}});Object.defineProperty(v,"SemanticTokensRequest",{enumerable:!0,get:function(){return Zi.SemanticTokensRequest}});Object.defineProperty(v,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Zi.SemanticTokensDeltaRequest}});Object.defineProperty(v,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Zi.SemanticTokensRangeRequest}});Object.defineProperty(v,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Zi.SemanticTokensRefreshRequest}});Object.defineProperty(v,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Zi.SemanticTokensRegistrationType}});var vS=Ym();Object.defineProperty(v,"ShowDocumentRequest",{enumerable:!0,get:function(){return vS.ShowDocumentRequest}});var yS=ev();Object.defineProperty(v,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return yS.LinkedEditingRangeRequest}});var ui=tv();Object.defineProperty(v,"FileOperationPatternKind",{enumerable:!0,get:function(){return ui.FileOperationPatternKind}});Object.defineProperty(v,"DidCreateFilesNotification",{enumerable:!0,get:function(){return ui.DidCreateFilesNotification}});Object.defineProperty(v,"WillCreateFilesRequest",{enumerable:!0,get:function(){return ui.WillCreateFilesRequest}});Object.defineProperty(v,"DidRenameFilesNotification",{enumerable:!0,get:function(){return ui.DidRenameFilesNotification}});Object.defineProperty(v,"WillRenameFilesRequest",{enumerable:!0,get:function(){return ui.WillRenameFilesRequest}});Object.defineProperty(v,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return ui.DidDeleteFilesNotification}});Object.defineProperty(v,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return ui.WillDeleteFilesRequest}});var Kd=rv();Object.defineProperty(v,"UniquenessLevel",{enumerable:!0,get:function(){return Kd.UniquenessLevel}});Object.defineProperty(v,"MonikerKind",{enumerable:!0,get:function(){return Kd.MonikerKind}});Object.defineProperty(v,"MonikerRequest",{enumerable:!0,get:function(){return Kd.MonikerRequest}});var Ud=iv();Object.defineProperty(v,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ud.TypeHierarchyPrepareRequest}});Object.defineProperty(v,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Ud.TypeHierarchySubtypesRequest}});Object.defineProperty(v,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Ud.TypeHierarchySupertypesRequest}});var gv=ov();Object.defineProperty(v,"InlineValueRequest",{enumerable:!0,get:function(){return gv.InlineValueRequest}});Object.defineProperty(v,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return gv.InlineValueRefreshRequest}});var Bd=sv();Object.defineProperty(v,"InlayHintRequest",{enumerable:!0,get:function(){return Bd.InlayHintRequest}});Object.defineProperty(v,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Bd.InlayHintResolveRequest}});Object.defineProperty(v,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Bd.InlayHintRefreshRequest}});var Zo=cv();Object.defineProperty(v,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Zo.DiagnosticServerCancellationData}});Object.defineProperty(v,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Zo.DocumentDiagnosticReportKind}});Object.defineProperty(v,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Zo.DocumentDiagnosticRequest}});Object.defineProperty(v,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Zo.WorkspaceDiagnosticRequest}});Object.defineProperty(v,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Zo.DiagnosticRefreshRequest}});var Gn=dv();Object.defineProperty(v,"NotebookCellKind",{enumerable:!0,get:function(){return Gn.NotebookCellKind}});Object.defineProperty(v,"ExecutionSummary",{enumerable:!0,get:function(){return Gn.ExecutionSummary}});Object.defineProperty(v,"NotebookCell",{enumerable:!0,get:function(){return Gn.NotebookCell}});Object.defineProperty(v,"NotebookDocument",{enumerable:!0,get:function(){return Gn.NotebookDocument}});Object.defineProperty(v,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Gn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(v,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Gn.DidOpenNotebookDocumentNotification}});Object.defineProperty(v,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Gn.NotebookCellArrayChange}});Object.defineProperty(v,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Gn.DidChangeNotebookDocumentNotification}});Object.defineProperty(v,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Gn.DidSaveNotebookDocumentNotification}});Object.defineProperty(v,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Gn.DidCloseNotebookDocumentNotification}});var mv;(function(n){function e(t){let r=t;return gt.string(r.language)||gt.string(r.scheme)||gt.string(r.pattern)}n.is=e})(mv=v.TextDocumentFilter||(v.TextDocumentFilter={}));var vv;(function(n){function e(t){let r=t;return gt.objectLiteral(r)&&(gt.string(r.notebookType)||gt.string(r.scheme)||gt.string(r.pattern))}n.is=e})(vv=v.NotebookDocumentFilter||(v.NotebookDocumentFilter={}));var yv;(function(n){function e(t){let r=t;return gt.objectLiteral(r)&&(gt.string(r.notebook)||vv.is(r.notebook))&&(r.language===void 0||gt.string(r.language))}n.is=e})(yv=v.NotebookCellTextDocumentFilter||(v.NotebookCellTextDocumentFilter={}));var Cv;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!gt.string(r)&&!mv.is(r)&&!yv.is(r))return!1;return!0}n.is=e})(Cv=v.DocumentSelector||(v.DocumentSelector={}));var CS;(function(n){n.method="client/registerCapability",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolRequestType(n.method)})(CS=v.RegistrationRequest||(v.RegistrationRequest={}));var _S;(function(n){n.method="client/unregisterCapability",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolRequestType(n.method)})(_S=v.UnregistrationRequest||(v.UnregistrationRequest={}));var wS;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(wS=v.ResourceOperationKind||(v.ResourceOperationKind={}));var bS;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(bS=v.FailureHandlingKind||(v.FailureHandlingKind={}));var DS;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(DS=v.PositionEncodingKind||(v.PositionEncodingKind={}));var RS;(function(n){function e(t){let r=t;return r&&gt.string(r.id)&&r.id.length>0}n.hasId=e})(RS=v.StaticRegistrationOptions||(v.StaticRegistrationOptions={}));var SS;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||Cv.is(r.documentSelector))}n.is=e})(SS=v.TextDocumentRegistrationOptions||(v.TextDocumentRegistrationOptions={}));var TS;(function(n){function e(r){let i=r;return gt.objectLiteral(i)&&(i.workDoneProgress===void 0||gt.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&gt.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(TS=v.WorkDoneProgressOptions||(v.WorkDoneProgressOptions={}));var PS;(function(n){n.method="initialize",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(PS=v.InitializeRequest||(v.InitializeRequest={}));var qS;(function(n){n.unknownProtocolVersion=1})(qS=v.InitializeErrorCodes||(v.InitializeErrorCodes={}));var xS;(function(n){n.method="initialized",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(xS=v.InitializedNotification||(v.InitializedNotification={}));var kS;(function(n){n.method="shutdown",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType0(n.method)})(kS=v.ShutdownRequest||(v.ShutdownRequest={}));var ES;(function(n){n.method="exit",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType0(n.method)})(ES=v.ExitNotification||(v.ExitNotification={}));var OS;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(OS=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var FS;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(FS=v.MessageType||(v.MessageType={}));var NS;(function(n){n.method="window/showMessage",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolNotificationType(n.method)})(NS=v.ShowMessageNotification||(v.ShowMessageNotification={}));var IS;(function(n){n.method="window/showMessageRequest",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolRequestType(n.method)})(IS=v.ShowMessageRequest||(v.ShowMessageRequest={}));var MS;(function(n){n.method="window/logMessage",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolNotificationType(n.method)})(MS=v.LogMessageNotification||(v.LogMessageNotification={}));var LS;(function(n){n.method="telemetry/event",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolNotificationType(n.method)})(LS=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var jS;(function(n){n.None=0,n.Full=1,n.Incremental=2})(jS=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var AS;(function(n){n.method="textDocument/didOpen",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(AS=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var HS;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(HS=v.TextDocumentContentChangeEvent||(v.TextDocumentContentChangeEvent={}));var $S;(function(n){n.method="textDocument/didChange",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})($S=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var WS;(function(n){n.method="textDocument/didClose",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(WS=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var zS;(function(n){n.method="textDocument/didSave",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(zS=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var KS;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(KS=v.TextDocumentSaveReason||(v.TextDocumentSaveReason={}));var US;(function(n){n.method="textDocument/willSave",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(US=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var BS;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(BS=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var GS;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolNotificationType(n.method)})(GS=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var VS;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(VS=v.FileChangeType||(v.FileChangeType={}));var XS;(function(n){function e(t){let r=t;return gt.objectLiteral(r)&&(fv.URI.is(r.baseUri)||fv.WorkspaceFolder.is(r.baseUri))&&gt.string(r.pattern)}n.is=e})(XS=v.RelativePattern||(v.RelativePattern={}));var JS;(function(n){n.Create=1,n.Change=2,n.Delete=4})(JS=v.WatchKind||(v.WatchKind={}));var QS;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolNotificationType(n.method)})(QS=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var YS;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(YS=v.CompletionTriggerKind||(v.CompletionTriggerKind={}));var ZS;(function(n){n.method="textDocument/completion",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(ZS=v.CompletionRequest||(v.CompletionRequest={}));var eT;(function(n){n.method="completionItem/resolve",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(eT=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var tT;(function(n){n.method="textDocument/hover",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(tT=v.HoverRequest||(v.HoverRequest={}));var nT;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(nT=v.SignatureHelpTriggerKind||(v.SignatureHelpTriggerKind={}));var rT;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(rT=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var iT;(function(n){n.method="textDocument/definition",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(iT=v.DefinitionRequest||(v.DefinitionRequest={}));var oT;(function(n){n.method="textDocument/references",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(oT=v.ReferencesRequest||(v.ReferencesRequest={}));var sT;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(sT=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var aT;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(aT=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var cT;(function(n){n.method="textDocument/codeAction",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(cT=v.CodeActionRequest||(v.CodeActionRequest={}));var uT;(function(n){n.method="codeAction/resolve",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(uT=v.CodeActionResolveRequest||(v.CodeActionResolveRequest={}));var lT;(function(n){n.method="workspace/symbol",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(lT=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var dT;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(dT=v.WorkspaceSymbolResolveRequest||(v.WorkspaceSymbolResolveRequest={}));var fT;(function(n){n.method="textDocument/codeLens",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(fT=v.CodeLensRequest||(v.CodeLensRequest={}));var hT;(function(n){n.method="codeLens/resolve",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(hT=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var pT;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolRequestType0(n.method)})(pT=v.CodeLensRefreshRequest||(v.CodeLensRefreshRequest={}));var gT;(function(n){n.method="textDocument/documentLink",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(gT=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var mT;(function(n){n.method="documentLink/resolve",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(mT=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var vT;(function(n){n.method="textDocument/formatting",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(vT=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var yT;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(yT=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var CT;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(CT=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var _T;(function(n){n.Identifier=1})(_T=v.PrepareSupportDefaultBehavior||(v.PrepareSupportDefaultBehavior={}));var wT;(function(n){n.method="textDocument/rename",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(wT=v.RenameRequest||(v.RenameRequest={}));var bT;(function(n){n.method="textDocument/prepareRename",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(bT=v.PrepareRenameRequest||(v.PrepareRenameRequest={}));var DT;(function(n){n.method="workspace/executeCommand",n.messageDirection=F.MessageDirection.clientToServer,n.type=new F.ProtocolRequestType(n.method)})(DT=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var RT;(function(n){n.method="workspace/applyEdit",n.messageDirection=F.MessageDirection.serverToClient,n.type=new F.ProtocolRequestType("workspace/applyEdit")})(RT=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var bv=b(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.createProtocolConnection=void 0;var wv=si();function ST(n,e,t,r){return wv.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,wv.createMessageConnection)(n,e,t,r)}Da.createProtocolConnection=ST});var Dv=b(qt=>{"use strict";var TT=qt&&qt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ra=qt&&qt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&TT(e,n,t)};Object.defineProperty(qt,"__esModule",{value:!0});qt.LSPErrorCodes=qt.createProtocolConnection=void 0;Ra(si(),qt);Ra((ma(),xu(ga)),qt);Ra($e(),qt);Ra(_v(),qt);var PT=bv();Object.defineProperty(qt,"createProtocolConnection",{enumerable:!0,get:function(){return PT.createProtocolConnection}});var qT;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(qT=qt.LSPErrorCodes||(qt.LSPErrorCodes={}))});var H=b(Vn=>{"use strict";var xT=Vn&&Vn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Rv=Vn&&Vn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xT(e,n,t)};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.createProtocolConnection=void 0;var kT=$l();Rv($l(),Vn);Rv(Dv(),Vn);function ET(n,e,t,r){return(0,kT.createMessageConnection)(n,e,t,r)}Vn.createProtocolConnection=ET});var Sa=b(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.forEach=_t.mapAsync=_t.map=_t.clearTestMode=_t.setTestMode=_t.Semaphore=_t.Delayer=void 0;var ts=H(),Gd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,ts.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};_t.Delayer=Gd;var Vd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ts.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};_t.Semaphore=Vd;var Xd=!1;function OT(){Xd=!0}_t.setTestMode=OT;function FT(){Xd=!1}_t.clearTestMode=FT;var Sv=15,es=class{constructor(e=Sv){this.yieldAfter=Xd===!0?Math.max(e,2):Math.max(e,Sv),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function NT(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new es(r?.yieldAfter);function s(c){o.start();for(let l=c;l<n.length;l++)if(i[l]=e(n[l]),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ts.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}_t.map=NT;async function IT(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),o=new es(r?.yieldAfter);async function s(c){o.start();for(let l=c;l<n.length;l++)if(i[l]=await e(n[l],t),o.shouldYield())return r?.yieldCallback&&r.yieldCallback(),l+1;return-1}let a=await s(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(c=>{(0,ts.RAL)().timer.setImmediate(()=>{c(s(a))})});return i}_t.mapAsync=IT;async function MT(n,e,t,r){if(n.length===0)return;let i=new es(r?.yieldAfter);function o(a){i.start();for(let c=a;c<n.length;c++)if(e(n[c]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(t!==void 0&&t.isCancellationRequested);)s=await new Promise(a=>{(0,ts.RAL)().timer.setImmediate(()=>{a(o(s))})})}_t.forEach=MT});var Yd=b(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});var LT=require("vscode"),Jd=class extends LT.CompletionItem{constructor(e){super(e)}};Qd.default=Jd});var tf=b(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});var jT=require("vscode"),Zd=class extends jT.CodeLens{constructor(e){super(e)}};ef.default=Zd});var of=b(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});var AT=require("vscode"),nf=class extends AT.DocumentLink{constructor(e,t){super(e,t)}};rf.default=nf});var cf=b(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var HT=require("vscode"),sf=class extends HT.CodeAction{constructor(e,t){super(e),this.data=t}};af.default=sf});var df=b(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.ProtocolDiagnostic=li.DiagnosticCode=void 0;var $T=require("vscode"),uf=an(),WT;(function(n){function e(t){let r=t;return r!=null&&(uf.number(r.value)||uf.string(r.value))&&uf.string(r.target)}n.is=e})(WT=li.DiagnosticCode||(li.DiagnosticCode={}));var lf=class extends $T.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};li.ProtocolDiagnostic=lf});var pf=b(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});var zT=require("vscode"),ff=class extends zT.CallHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};hf.default=ff});var vf=b(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var KT=require("vscode"),gf=class extends KT.TypeHierarchyItem{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o,s),a!==void 0&&(this.data=a)}};mf.default=gf});var _f=b(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var Ta=require("vscode"),yf=class extends Ta.SymbolInformation{constructor(e,t,r,i,o){let s=!(i instanceof Ta.Uri);super(e,t,r,s?i:new Ta.Location(i,new Ta.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}};Cf.default=yf});var Df=b(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var UT=require("vscode"),wf=class extends UT.InlayHint{constructor(e,t,r){super(e,t,r)}};bf.default=wf});var qv=b(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.createConverter=void 0;var et=require("vscode"),ee=H(),eo=an(),Tv=Sa(),BT=Yd(),GT=tf(),VT=of(),XT=cf(),Pv=df(),JT=pf(),QT=vf(),YT=_f(),ZT=Df(),Rf;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Rf||(Rf={}));function eP(n){let t=n||(h=>h.toString());function r(h){return t(h)}function i(h){return{uri:t(h.uri)}}function o(h){return{uri:t(h.uri),languageId:h.languageId,version:h.version,text:h.getText()}}function s(h){return{uri:t(h.uri),version:h.version}}function a(h){return{textDocument:o(h)}}function c(h){let q=h;return!!q.document&&!!q.contentChanges}function l(h){let q=h;return!!q.uri&&!!q.version}function d(h,q,M){if(l(h))return{textDocument:{uri:t(h.uri),version:h.version},contentChanges:[{text:h.getText()}]};if(c(h)){let ie=q,be=M;return{textDocument:{uri:t(ie),version:be},contentChanges:h.contentChanges.map(Xt=>{let zn=Xt.range;return{range:{start:{line:zn.start.line,character:zn.start.character},end:{line:zn.end.line,character:zn.end.character}},rangeLength:Xt.rangeLength,text:Xt.text}})}}else throw Error("Unsupported text document change parameter")}function g(h){return{textDocument:i(h)}}function f(h,q=!1){let M={textDocument:i(h)};return q&&(M.text=h.getText()),M}function p(h){switch(h){case et.TextDocumentSaveReason.Manual:return ee.TextDocumentSaveReason.Manual;case et.TextDocumentSaveReason.AfterDelay:return ee.TextDocumentSaveReason.AfterDelay;case et.TextDocumentSaveReason.FocusOut:return ee.TextDocumentSaveReason.FocusOut}return ee.TextDocumentSaveReason.Manual}function m(h){return{textDocument:i(h.document),reason:p(h.reason)}}function w(h){return{files:h.files.map(q=>({uri:t(q)}))}}function D(h){return{files:h.files.map(q=>({oldUri:t(q.oldUri),newUri:t(q.newUri)}))}}function P(h){return{files:h.files.map(q=>({uri:t(q)}))}}function C(h){return{files:h.files.map(q=>({uri:t(q)}))}}function y(h){return{files:h.files.map(q=>({oldUri:t(q.oldUri),newUri:t(q.newUri)}))}}function S(h){return{files:h.files.map(q=>({uri:t(q)}))}}function I(h,q){return{textDocument:i(h),position:Mt(q)}}function X(h){switch(h){case et.CompletionTriggerKind.TriggerCharacter:return ee.CompletionTriggerKind.TriggerCharacter;case et.CompletionTriggerKind.TriggerForIncompleteCompletions:return ee.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ee.CompletionTriggerKind.Invoked}}function $(h,q,M){return{textDocument:i(h),position:Mt(q),context:{triggerKind:X(M.triggerKind),triggerCharacter:M.triggerCharacter}}}function Y(h){switch(h){case et.SignatureHelpTriggerKind.Invoke:return ee.SignatureHelpTriggerKind.Invoked;case et.SignatureHelpTriggerKind.TriggerCharacter:return ee.SignatureHelpTriggerKind.TriggerCharacter;case et.SignatureHelpTriggerKind.ContentChange:return ee.SignatureHelpTriggerKind.ContentChange}}function Z(h){return{label:h.label}}function Ae(h){return h.map(Z)}function pe(h){return{label:h.label,parameters:Ae(h.parameters)}}function st(h){return h.map(pe)}function Rr(h){return h===void 0?h:{signatures:st(h.signatures),activeSignature:h.activeSignature,activeParameter:h.activeParameter}}function $n(h,q,M){return{textDocument:i(h),position:Mt(q),context:{isRetrigger:M.isRetrigger,triggerCharacter:M.triggerCharacter,triggerKind:Y(M.triggerKind),activeSignatureHelp:Rr(M.activeSignatureHelp)}}}function Mt(h){return{line:h.line,character:h.character}}function Bt(h){return h==null?h:{line:h.line>ee.uinteger.MAX_VALUE?ee.uinteger.MAX_VALUE:h.line,character:h.character>ee.uinteger.MAX_VALUE?ee.uinteger.MAX_VALUE:h.character}}function Sr(h,q){return Tv.map(h,Bt,q)}function Qe(h){return h==null?h:{start:Bt(h.start),end:Bt(h.end)}}function Cn(h){return h==null?h:ee.Location.create(r(h.uri),Qe(h.range))}function on(h){switch(h){case et.DiagnosticSeverity.Error:return ee.DiagnosticSeverity.Error;case et.DiagnosticSeverity.Warning:return ee.DiagnosticSeverity.Warning;case et.DiagnosticSeverity.Information:return ee.DiagnosticSeverity.Information;case et.DiagnosticSeverity.Hint:return ee.DiagnosticSeverity.Hint}}function Vr(h){if(!h)return;let q=[];for(let M of h){let ie=_n(M);ie!==void 0&&q.push(ie)}return q.length>0?q:void 0}function _n(h){switch(h){case et.DiagnosticTag.Unnecessary:return ee.DiagnosticTag.Unnecessary;case et.DiagnosticTag.Deprecated:return ee.DiagnosticTag.Deprecated;default:return}}function To(h){return{message:h.message,location:Cn(h.location)}}function ki(h){return h.map(To)}function Xr(h){if(h!=null)return eo.number(h)||eo.string(h)?h:{value:h.value,target:r(h.target)}}function Jr(h){let q=ee.Diagnostic.create(Qe(h.range),h.message),M=h instanceof Pv.ProtocolDiagnostic?h:void 0;M!==void 0&&M.data!==void 0&&(q.data=M.data);let ie=Xr(h.code);return Pv.DiagnosticCode.is(ie)?M!==void 0&&M.hasDiagnosticCode?q.code=ie:(q.code=ie.value,q.codeDescription={href:ie.target}):q.code=ie,eo.number(h.severity)&&(q.severity=on(h.severity)),Array.isArray(h.tags)&&(q.tags=Vr(h.tags)),h.relatedInformation&&(q.relatedInformation=ki(h.relatedInformation)),h.source&&(q.source=h.source),q}function Qr(h,q){return h==null?h:Tv.map(h,Jr,q)}function Po(h,q){switch(h){case"$string":return q;case ee.MarkupKind.PlainText:return{kind:h,value:q};case ee.MarkupKind.Markdown:return{kind:h,value:q.value};default:return`Unsupported Markup content received. Kind is: ${h}`}}function Ei(h){switch(h){case et.CompletionItemTag.Deprecated:return ee.CompletionItemTag.Deprecated}}function Oi(h){if(h===void 0)return h;let q=[];for(let M of h){let ie=Ei(M);ie!==void 0&&q.push(ie)}return q}function qo(h,q){return q!==void 0?q:h+1}function lt(h,q=!1){let M,ie;eo.string(h.label)?M=h.label:(M=h.label.label,q&&(h.label.detail!==void 0||h.label.description!==void 0)&&(ie={detail:h.label.detail,description:h.label.description}));let be={label:M};ie!==void 0&&(be.labelDetails=ie);let at=h instanceof BT.default?h:void 0;h.detail&&(be.detail=h.detail),h.documentation&&(!at||at.documentationFormat==="$string"?be.documentation=h.documentation:be.documentation=Po(at.documentationFormat,h.documentation)),h.filterText&&(be.filterText=h.filterText),Fi(be,h),eo.number(h.kind)&&(be.kind=qo(h.kind,at&&at.originalItemKind)),h.sortText&&(be.sortText=h.sortText),h.additionalTextEdits&&(be.additionalTextEdits=Ni(h.additionalTextEdits)),h.commitCharacters&&(be.commitCharacters=h.commitCharacters.slice()),h.command&&(be.command=sn(h.command)),(h.preselect===!0||h.preselect===!1)&&(be.preselect=h.preselect);let Xt=Oi(h.tags);if(at){if(at.data!==void 0&&(be.data=at.data),at.deprecated===!0||at.deprecated===!1){if(at.deprecated===!0&&Xt!==void 0&&Xt.length>0){let zn=Xt.indexOf(et.CompletionItemTag.Deprecated);zn!==-1&&Xt.splice(zn,1)}be.deprecated=at.deprecated}at.insertTextMode!==void 0&&(be.insertTextMode=at.insertTextMode)}return Xt!==void 0&&Xt.length>0&&(be.tags=Xt),be.insertTextMode===void 0&&h.keepWhitespace===!0&&(be.insertTextMode=ee.InsertTextMode.adjustIndentation),be}function Fi(h,q){let M=ee.InsertTextFormat.PlainText,ie,be;q.textEdit?(ie=q.textEdit.newText,be=q.textEdit.range):q.insertText instanceof et.SnippetString?(M=ee.InsertTextFormat.Snippet,ie=q.insertText.value):ie=q.insertText,q.range&&(be=q.range),h.insertTextFormat=M,q.fromEdit&&ie!==void 0&&be!==void 0?h.textEdit=Tr(ie,be):h.insertText=ie}function Tr(h,q){return Rf.is(q)?ee.InsertReplaceEdit.create(h,Qe(q.inserting),Qe(q.replacing)):{newText:h,range:Qe(q)}}function Wn(h){return{range:Qe(h.range),newText:h.newText}}function Ni(h){return h==null?h:h.map(Wn)}function Gt(h){return h<=et.SymbolKind.TypeParameter?h+1:ee.SymbolKind.Property}function Yr(h){return h}function rt(h){return h.map(Yr)}function tr(h,q,M){return{textDocument:i(h),position:Mt(q),context:{includeDeclaration:M.includeDeclaration}}}async function Vt(h,q){let M=ee.CodeAction.create(h.title);if(h instanceof XT.default&&h.data!==void 0&&(M.data=h.data),h.kind!==void 0&&(M.kind=ei(h.kind)),h.diagnostics!==void 0&&(M.diagnostics=await Qr(h.diagnostics,q)),h.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return h.command!==void 0&&(M.command=sn(h.command)),h.isPreferred!==void 0&&(M.isPreferred=h.isPreferred),h.disabled!==void 0&&(M.disabled={reason:h.disabled.reason}),M}async function Zr(h,q){if(h==null)return h;let M;return h.only&&eo.string(h.only.value)&&(M=[h.only.value]),ee.CodeActionContext.create(await Qr(h.diagnostics,q),M,nr(h.triggerKind))}function nr(h){switch(h){case et.CodeActionTriggerKind.Invoke:return ee.CodeActionTriggerKind.Invoked;case et.CodeActionTriggerKind.Automatic:return ee.CodeActionTriggerKind.Automatic;default:return}}function ei(h){if(h!=null)return h.value}function Ii(h){return h==null?h:ee.InlineValueContext.create(h.frameId,Qe(h.stoppedLocation))}function sn(h){let q=ee.Command.create(h.title,h.command);return h.arguments&&(q.arguments=h.arguments),q}function Mi(h){let q=ee.CodeLens.create(Qe(h.range));return h.command&&(q.command=sn(h.command)),h instanceof GT.default&&h.data&&(q.data=h.data),q}function wn(h,q){let M={tabSize:h.tabSize,insertSpaces:h.insertSpaces};return q.trimTrailingWhitespace&&(M.trimTrailingWhitespace=!0),q.trimFinalNewlines&&(M.trimFinalNewlines=!0),q.insertFinalNewline&&(M.insertFinalNewline=!0),M}function _(h){return{textDocument:i(h)}}function k(h){return{textDocument:i(h)}}function N(h){let q=ee.DocumentLink.create(Qe(h.range));h.target&&(q.target=r(h.target)),h.tooltip!==void 0&&(q.tooltip=h.tooltip);let M=h instanceof VT.default?h:void 0;return M&&M.data&&(q.data=M.data),q}function A(h){return{textDocument:i(h)}}function we(h){let q={name:h.name,kind:Gt(h.kind),uri:r(h.uri),range:Qe(h.range),selectionRange:Qe(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(q.detail=h.detail),h.tags!==void 0&&(q.tags=rt(h.tags)),h instanceof JT.default&&h.data!==void 0&&(q.data=h.data),q}function ye(h){let q={name:h.name,kind:Gt(h.kind),uri:r(h.uri),range:Qe(h.range),selectionRange:Qe(h.selectionRange)};return h.detail!==void 0&&h.detail.length>0&&(q.detail=h.detail),h.tags!==void 0&&(q.tags=rt(h.tags)),h instanceof QT.default&&h.data!==void 0&&(q.data=h.data),q}function qe(h){let q=h instanceof YT.default?{name:h.name,kind:Gt(h.kind),location:h.hasRange?Cn(h.location):{uri:t(h.location.uri)},data:h.data}:{name:h.name,kind:Gt(h.kind),location:Cn(h.location)};return h.tags!==void 0&&(q.tags=rt(h.tags)),h.containerName!==""&&(q.containerName=h.containerName),q}function Ne(h){let q=typeof h.label=="string"?h.label:h.label.map(oe),M=ee.InlayHint.create(Bt(h.position),q);return h.kind!==void 0&&(M.kind=h.kind),h.textEdits!==void 0&&(M.textEdits=Ni(h.textEdits)),h.tooltip!==void 0&&(M.tooltip=Re(h.tooltip)),h.paddingLeft!==void 0&&(M.paddingLeft=h.paddingLeft),h.paddingRight!==void 0&&(M.paddingRight=h.paddingRight),h instanceof ZT.default&&h.data!==void 0&&(M.data=h.data),M}function oe(h){let q=ee.InlayHintLabelPart.create(h.value);return h.location!==void 0&&(q.location=Cn(h.location)),h.command!==void 0&&(q.command=sn(h.command)),h.tooltip!==void 0&&(q.tooltip=Re(h.tooltip)),q}function Re(h){return typeof h=="string"?h:{kind:ee.MarkupKind.Markdown,value:h.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:d,asCloseTextDocumentParams:g,asSaveTextDocumentParams:f,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:w,asDidRenameFilesParams:D,asDidDeleteFilesParams:P,asWillCreateFilesParams:C,asWillRenameFilesParams:y,asWillDeleteFilesParams:S,asTextDocumentPositionParams:I,asCompletionParams:$,asSignatureHelpParams:$n,asWorkerPosition:Mt,asRange:Qe,asPosition:Bt,asPositions:Sr,asLocation:Cn,asDiagnosticSeverity:on,asDiagnosticTag:_n,asDiagnostic:Jr,asDiagnostics:Qr,asCompletionItem:lt,asTextEdit:Wn,asSymbolKind:Gt,asSymbolTag:Yr,asSymbolTags:rt,asReferenceParams:tr,asCodeAction:Vt,asCodeActionContext:Zr,asInlineValueContext:Ii,asCommand:sn,asCodeLens:Mi,asFormattingOptions:wn,asDocumentSymbolParams:_,asCodeLensParams:k,asDocumentLink:N,asDocumentLinkParams:A,asCallHierarchyItem:we,asTypeHierarchyItem:ye,asInlayHint:Ne,asWorkspaceSymbol:qe}}Pa.createConverter=eP});var Ev=b(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.createConverter=void 0;var j=require("vscode"),V=H(),ln=an(),Ce=Sa(),tP=Yd(),nP=tf(),rP=of(),iP=cf(),xv=df(),oP=pf(),sP=vf(),aP=_f(),cP=Df(),kv=H(),qa;(function(n){function e(t){let r=t;return r&&ln.string(r.language)&&ln.string(r.value)}n.is=e})(qa||(qa={}));function uP(n,e,t){let i=n||(u=>j.Uri.parse(u));function o(u){return i(u)}function s(u){let R=[];for(let E of u)if(typeof E=="string")R.push(E);else if(kv.NotebookCellTextDocumentFilter.is(E))if(typeof E.notebook=="string")R.push({notebookType:E.notebook,language:E.language});else{let B=E.notebook.notebookType??"*";R.push({notebookType:B,scheme:E.notebook.scheme,pattern:E.notebook.pattern,language:E.language})}else kv.TextDocumentFilter.is(E)&&R.push({language:E.language,scheme:E.scheme,pattern:E.pattern});return R}async function a(u,R){return Ce.map(u,l,R)}function c(u){let R=new Array(u.length);for(let E=0;E<u.length;E++)R[E]=l(u[E]);return R}function l(u){let R=new xv.ProtocolDiagnostic(m(u.range),u.message,D(u.severity),u.data);if(u.code!==void 0){if(typeof u.code=="string"||typeof u.code=="number")V.CodeDescription.is(u.codeDescription)?R.code={value:u.code,target:o(u.codeDescription.href)}:R.code=u.code;else if(xv.DiagnosticCode.is(u.code)){R.hasDiagnosticCode=!0;let E=u.code;R.code={value:E.value,target:o(E.target)}}}return u.source&&(R.source=u.source),u.relatedInformation&&(R.relatedInformation=d(u.relatedInformation)),Array.isArray(u.tags)&&(R.tags=g(u.tags)),R}function d(u){let R=new Array(u.length);for(let E=0;E<u.length;E++){let B=u[E];R[E]=new j.DiagnosticRelatedInformation(_n(B.location),B.message)}return R}function g(u){if(!u)return;let R=[];for(let E of u){let B=f(E);B!==void 0&&R.push(B)}return R.length>0?R:void 0}function f(u){switch(u){case V.DiagnosticTag.Unnecessary:return j.DiagnosticTag.Unnecessary;case V.DiagnosticTag.Deprecated:return j.DiagnosticTag.Deprecated;default:return}}function p(u){return u?new j.Position(u.line,u.character):void 0}function m(u){return u?new j.Range(u.start.line,u.start.character,u.end.line,u.end.character):void 0}async function w(u,R){return Ce.map(u,E=>new j.Range(E.start.line,E.start.character,E.end.line,E.end.character),R)}function D(u){if(u==null)return j.DiagnosticSeverity.Error;switch(u){case V.DiagnosticSeverity.Error:return j.DiagnosticSeverity.Error;case V.DiagnosticSeverity.Warning:return j.DiagnosticSeverity.Warning;case V.DiagnosticSeverity.Information:return j.DiagnosticSeverity.Information;case V.DiagnosticSeverity.Hint:return j.DiagnosticSeverity.Hint}return j.DiagnosticSeverity.Error}function P(u){if(ln.string(u))return y(u);if(qa.is(u))return y().appendCodeblock(u.value,u.language);if(Array.isArray(u)){let R=[];for(let E of u){let B=y();qa.is(E)?B.appendCodeblock(E.value,E.language):B.appendMarkdown(E),R.push(B)}return R}else return y(u)}function C(u){if(ln.string(u))return u;switch(u.kind){case V.MarkupKind.Markdown:return y(u.value);case V.MarkupKind.PlainText:return u.value;default:return`Unsupported Markup content received. Kind is: ${u.kind}`}}function y(u){let R;if(u===void 0||typeof u=="string")R=new j.MarkdownString(u);else switch(u.kind){case V.MarkupKind.Markdown:R=new j.MarkdownString(u.value);break;case V.MarkupKind.PlainText:R=new j.MarkdownString,R.appendText(u.value);break;default:R=new j.MarkdownString,R.appendText(`Unsupported Markup content received. Kind is: ${u.kind}`);break}return R.isTrusted=e,R.supportHtml=t,R}function S(u){if(!!u)return new j.Hover(P(u.contents),m(u.range))}async function I(u,R,E){if(!u)return;if(Array.isArray(u))return Ce.map(u,Kn=>Ae(Kn,R),E);let B=u,{defaultRange:Lt,commitCharacters:dt}=X(B,R),Se=await Ce.map(B.items,Kn=>Ae(Kn,dt,Lt,B.itemDefaults?.insertTextMode,B.itemDefaults?.insertTextFormat,B.itemDefaults?.data),E);return new j.CompletionList(Se,B.isIncomplete)}function X(u,R){let E=u.itemDefaults?.editRange,B=u.itemDefaults?.commitCharacters??R;return V.Range.is(E)?{defaultRange:m(E),commitCharacters:B}:E!==void 0?{defaultRange:{inserting:m(E.insert),replacing:m(E.replace)},commitCharacters:B}:{defaultRange:void 0,commitCharacters:B}}function $(u){return V.CompletionItemKind.Text<=u&&u<=V.CompletionItemKind.TypeParameter?[u-1,void 0]:[j.CompletionItemKind.Text,u]}function Y(u){switch(u){case V.CompletionItemTag.Deprecated:return j.CompletionItemTag.Deprecated}}function Z(u){if(u==null)return[];let R=[];for(let E of u){let B=Y(E);B!==void 0&&R.push(B)}return R}function Ae(u,R,E,B,Lt,dt){let Se=Z(u.tags),Kn=pe(u),xe=new tP.default(Kn);u.detail&&(xe.detail=u.detail),u.documentation&&(xe.documentation=C(u.documentation),xe.documentationFormat=ln.string(u.documentation)?"$string":u.documentation.kind),u.filterText&&(xe.filterText=u.filterText);let Vs=st(u,E,Lt);if(Vs&&(xe.insertText=Vs.text,xe.range=Vs.range,xe.fromEdit=Vs.fromEdit),ln.number(u.kind)){let[eD,Yg]=$(u.kind);xe.kind=eD,Yg&&(xe.originalItemKind=Yg)}u.sortText&&(xe.sortText=u.sortText),u.additionalTextEdits&&(xe.additionalTextEdits=Bt(u.additionalTextEdits));let Jg=u.commitCharacters!==void 0?ln.stringArray(u.commitCharacters)?u.commitCharacters:void 0:R;Jg&&(xe.commitCharacters=Jg.slice()),u.command&&(xe.command=rt(u.command)),(u.deprecated===!0||u.deprecated===!1)&&(xe.deprecated=u.deprecated,u.deprecated===!0&&Se.push(j.CompletionItemTag.Deprecated)),(u.preselect===!0||u.preselect===!1)&&(xe.preselect=u.preselect);let Qg=u.data??dt;Qg!==void 0&&(xe.data=Qg),Se.length>0&&(xe.tags=Se);let Pu=u.insertTextMode??B;return Pu!==void 0&&(xe.insertTextMode=Pu,Pu===V.InsertTextMode.asIs&&(xe.keepWhitespace=!0)),xe}function pe(u){return V.CompletionItemLabelDetails.is(u.labelDetails)?{label:u.label,detail:u.labelDetails.detail,description:u.labelDetails.description}:u.label}function st(u,R,E){let B=u.insertTextFormat??E;if(u.textEdit!==void 0||R!==void 0){let[Lt,dt]=u.textEdit!==void 0?Rr(u.textEdit):[R,u.textEditText??u.label];return B===V.InsertTextFormat.Snippet?{text:new j.SnippetString(dt),range:Lt,fromEdit:!0}:{text:dt,range:Lt,fromEdit:!0}}else return u.insertText?B===V.InsertTextFormat.Snippet?{text:new j.SnippetString(u.insertText),fromEdit:!1}:{text:u.insertText,fromEdit:!1}:void 0}function Rr(u){return V.InsertReplaceEdit.is(u)?[{inserting:m(u.insert),replacing:m(u.replace)},u.newText]:[m(u.range),u.newText]}function $n(u){if(!!u)return new j.TextEdit(m(u.range),u.newText)}async function Mt(u,R){if(!!u)return Ce.map(u,$n,R)}function Bt(u){if(!u)return;let R=new Array(u.length);for(let E=0;E<u.length;E++)R[E]=$n(u[E]);return R}async function Sr(u,R){if(!u)return;let E=new j.SignatureHelp;return ln.number(u.activeSignature)?E.activeSignature=u.activeSignature:E.activeSignature=0,ln.number(u.activeParameter)?E.activeParameter=u.activeParameter:E.activeParameter=0,u.signatures&&(E.signatures=await Qe(u.signatures,R)),E}async function Qe(u,R){return Ce.mapAsync(u,Cn,R)}async function Cn(u,R){let E=new j.SignatureInformation(u.label);return u.documentation!==void 0&&(E.documentation=C(u.documentation)),u.parameters!==void 0&&(E.parameters=await on(u.parameters,R)),u.activeParameter!==void 0&&(E.activeParameter=u.activeParameter),E}function on(u,R){return Ce.map(u,Vr,R)}function Vr(u){let R=new j.ParameterInformation(u.label);return u.documentation&&(R.documentation=C(u.documentation)),R}function _n(u){return u?new j.Location(i(u.uri),m(u.range)):void 0}async function To(u,R){if(!!u)return Jr(u,R)}async function ki(u,R){if(!!u)return Jr(u,R)}function Xr(u){if(!u)return;let R={targetUri:i(u.targetUri),targetRange:m(u.targetRange),originSelectionRange:m(u.originSelectionRange),targetSelectionRange:m(u.targetSelectionRange)};if(!R.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return R}async function Jr(u,R){if(!!u)if(ln.array(u)){if(u.length===0)return[];if(V.LocationLink.is(u[0])){let E=u;return Ce.map(E,Xr,R)}else{let E=u;return Ce.map(E,_n,R)}}else return V.LocationLink.is(u)?[Xr(u)]:_n(u)}async function Qr(u,R){if(!!u)return Ce.map(u,_n,R)}async function Po(u,R){if(!!u)return Ce.map(u,Ei,R)}function Ei(u){let R=new j.DocumentHighlight(m(u.range));return ln.number(u.kind)&&(R.kind=Oi(u.kind)),R}function Oi(u){switch(u){case V.DocumentHighlightKind.Text:return j.DocumentHighlightKind.Text;case V.DocumentHighlightKind.Read:return j.DocumentHighlightKind.Read;case V.DocumentHighlightKind.Write:return j.DocumentHighlightKind.Write}return j.DocumentHighlightKind.Text}async function qo(u,R){if(!!u)return Ce.map(u,Wn,R)}function lt(u){return u<=V.SymbolKind.TypeParameter?u-1:j.SymbolKind.Property}function Fi(u){switch(u){case V.SymbolTag.Deprecated:return j.SymbolTag.Deprecated;default:return}}function Tr(u){if(u==null)return;let R=[];for(let E of u){let B=Fi(E);B!==void 0&&R.push(B)}return R.length===0?void 0:R}function Wn(u){let R=u.data,E=u.location,B=E.range===void 0||R!==void 0?new aP.default(u.name,lt(u.kind),u.containerName??"",E.range===void 0?i(E.uri):new j.Location(i(u.location.uri),m(E.range)),R):new j.SymbolInformation(u.name,lt(u.kind),u.containerName??"",new j.Location(i(u.location.uri),m(E.range)));return Yr(B,u),B}async function Ni(u,R){if(u!=null)return Ce.map(u,Gt,R)}function Gt(u){let R=new j.DocumentSymbol(u.name,u.detail||"",lt(u.kind),m(u.range),m(u.selectionRange));if(Yr(R,u),u.children!==void 0&&u.children.length>0){let E=[];for(let B of u.children)E.push(Gt(B));R.children=E}return R}function Yr(u,R){u.tags=Tr(R.tags),R.deprecated&&(u.tags?u.tags.includes(j.SymbolTag.Deprecated)||(u.tags=u.tags.concat(j.SymbolTag.Deprecated)):u.tags=[j.SymbolTag.Deprecated])}function rt(u){let R={title:u.title,command:u.command};return u.arguments&&(R.arguments=u.arguments),R}async function tr(u,R){if(!!u)return Ce.map(u,rt,R)}let Vt=new Map;Vt.set(V.CodeActionKind.Empty,j.CodeActionKind.Empty),Vt.set(V.CodeActionKind.QuickFix,j.CodeActionKind.QuickFix),Vt.set(V.CodeActionKind.Refactor,j.CodeActionKind.Refactor),Vt.set(V.CodeActionKind.RefactorExtract,j.CodeActionKind.RefactorExtract),Vt.set(V.CodeActionKind.RefactorInline,j.CodeActionKind.RefactorInline),Vt.set(V.CodeActionKind.RefactorRewrite,j.CodeActionKind.RefactorRewrite),Vt.set(V.CodeActionKind.Source,j.CodeActionKind.Source),Vt.set(V.CodeActionKind.SourceOrganizeImports,j.CodeActionKind.SourceOrganizeImports);function Zr(u){if(u==null)return;let R=Vt.get(u);if(R)return R;let E=u.split(".");R=j.CodeActionKind.Empty;for(let B of E)R=R.append(B);return R}function nr(u){if(u!=null)return u.map(R=>Zr(R))}async function ei(u,R){if(u==null)return;let E=new iP.default(u.title,u.data);return u.kind!==void 0&&(E.kind=Zr(u.kind)),u.diagnostics!==void 0&&(E.diagnostics=c(u.diagnostics)),u.edit!==void 0&&(E.edit=await wn(u.edit,R)),u.command!==void 0&&(E.command=rt(u.command)),u.isPreferred!==void 0&&(E.isPreferred=u.isPreferred),u.disabled!==void 0&&(E.disabled={reason:u.disabled.reason}),E}function Ii(u,R){return Ce.mapAsync(u,async E=>V.Command.is(E)?rt(E):ei(E,R),R)}function sn(u){if(!u)return;let R=new nP.default(m(u.range));return u.command&&(R.command=rt(u.command)),u.data!==void 0&&u.data!==null&&(R.data=u.data),R}async function Mi(u,R){if(!!u)return Ce.map(u,sn,R)}async function wn(u,R){if(!u)return;let E=new Map;if(u.changeAnnotations!==void 0){let dt=u.changeAnnotations;await Ce.forEach(Object.keys(dt),Se=>{let Kn=_(dt[Se]);E.set(Se,Kn)},R)}let B=dt=>{if(dt!==void 0)return E.get(dt)},Lt=new j.WorkspaceEdit;if(u.documentChanges){let dt=u.documentChanges;await Ce.forEach(dt,Se=>{if(V.CreateFile.is(Se))Lt.createFile(i(Se.uri),Se.options,B(Se.annotationId));else if(V.RenameFile.is(Se))Lt.renameFile(i(Se.oldUri),i(Se.newUri),Se.options,B(Se.annotationId));else if(V.DeleteFile.is(Se))Lt.deleteFile(i(Se.uri),Se.options,B(Se.annotationId));else if(V.TextDocumentEdit.is(Se)){let Kn=i(Se.textDocument.uri);for(let xe of Se.edits)V.AnnotatedTextEdit.is(xe)?Lt.replace(Kn,m(xe.range),xe.newText,B(xe.annotationId)):Lt.replace(Kn,m(xe.range),xe.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Se,void 0,4)}`)},R)}else if(u.changes){let dt=u.changes;await Ce.forEach(Object.keys(dt),Se=>{Lt.set(i(Se),Bt(dt[Se]))},R)}return Lt}function _(u){if(u!==void 0)return{label:u.label,needsConfirmation:!!u.needsConfirmation,description:u.description}}function k(u){let R=m(u.range),E=u.target?o(u.target):void 0,B=new rP.default(R,E);return u.tooltip!==void 0&&(B.tooltip=u.tooltip),u.data!==void 0&&u.data!==null&&(B.data=u.data),B}async function N(u,R){if(!!u)return Ce.map(u,k,R)}function A(u){return new j.Color(u.red,u.green,u.blue,u.alpha)}function we(u){return new j.ColorInformation(m(u.range),A(u.color))}async function ye(u,R){if(!!u)return Ce.map(u,we,R)}function qe(u){let R=new j.ColorPresentation(u.label);return R.additionalTextEdits=Bt(u.additionalTextEdits),u.textEdit&&(R.textEdit=$n(u.textEdit)),R}async function Ne(u,R){if(!!u)return Ce.map(u,qe,R)}function oe(u){if(u)switch(u){case V.FoldingRangeKind.Comment:return j.FoldingRangeKind.Comment;case V.FoldingRangeKind.Imports:return j.FoldingRangeKind.Imports;case V.FoldingRangeKind.Region:return j.FoldingRangeKind.Region}}function Re(u){return new j.FoldingRange(u.startLine,u.endLine,oe(u.kind))}async function h(u,R){if(!!u)return Ce.map(u,Re,R)}function q(u){return new j.SelectionRange(m(u.range),u.parent?q(u.parent):void 0)}async function M(u,R){return Array.isArray(u)?Ce.map(u,q,R):[]}function ie(u){return V.InlineValueText.is(u)?new j.InlineValueText(m(u.range),u.text):V.InlineValueVariableLookup.is(u)?new j.InlineValueVariableLookup(m(u.range),u.variableName,u.caseSensitiveLookup):new j.InlineValueEvaluatableExpression(m(u.range),u.expression)}async function be(u,R){return Array.isArray(u)?Ce.map(u,ie,R):[]}async function at(u,R){let E=typeof u.label=="string"?u.label:await Ce.map(u.label,Xt,R),B=new cP.default(p(u.position),E);return u.kind!==void 0&&(B.kind=u.kind),u.textEdits!==void 0&&(B.textEdits=await Mt(u.textEdits,R)),u.tooltip!==void 0&&(B.tooltip=zn(u.tooltip)),u.paddingLeft!==void 0&&(B.paddingLeft=u.paddingLeft),u.paddingRight!==void 0&&(B.paddingRight=u.paddingRight),u.data!==void 0&&(B.data=u.data),B}function Xt(u){let R=new j.InlayHintLabelPart(u.value);return u.location!==void 0&&(R.location=_n(u.location)),u.tooltip!==void 0&&(R.tooltip=zn(u.tooltip)),u.command!==void 0&&(R.command=rt(u.command)),R}function zn(u){return typeof u=="string"?u:y(u)}async function zb(u,R){if(!!Array.isArray(u))return Ce.mapAsync(u,at,R)}function Gs(u){if(u===null)return;let R=new oP.default(lt(u.kind),u.name,u.detail||"",o(u.uri),m(u.range),m(u.selectionRange),u.data);return u.tags!==void 0&&(R.tags=Tr(u.tags)),R}async function Kb(u,R){if(u!==null)return Ce.map(u,Gs,R)}async function Bg(u,R){return new j.CallHierarchyIncomingCall(Gs(u.from),await w(u.fromRanges,R))}async function Ub(u,R){if(u!==null)return Ce.mapAsync(u,Bg,R)}async function Gg(u,R){return new j.CallHierarchyOutgoingCall(Gs(u.to),await w(u.fromRanges,R))}async function Bb(u,R){if(u!==null)return Ce.mapAsync(u,Gg,R)}async function Gb(u,R){if(u!=null)return new j.SemanticTokens(new Uint32Array(u.data),u.resultId)}function Vg(u){return new j.SemanticTokensEdit(u.start,u.deleteCount,u.data!==void 0?new Uint32Array(u.data):void 0)}async function Vb(u,R){if(u!=null)return new j.SemanticTokensEdits(u.edits.map(Vg),u.resultId)}function Xb(u){return u}async function Jb(u,R){if(u!=null)return new j.LinkedEditingRanges(await w(u.ranges,R),Qb(u.wordPattern))}function Qb(u){if(u!=null)return new RegExp(u)}function Xg(u){if(u===null)return;let R=new sP.default(lt(u.kind),u.name,u.detail||"",o(u.uri),m(u.range),m(u.selectionRange),u.data);return u.tags!==void 0&&(R.tags=Tr(u.tags)),R}async function Yb(u,R){if(u!==null)return Ce.map(u,Xg,R)}function Zb(u){if(ln.string(u))return u;if(V.RelativePattern.is(u)){if(V.URI.is(u.baseUri))return new j.RelativePattern(o(u.baseUri),u.pattern);if(V.WorkspaceFolder.is(u.baseUri)){let R=j.workspace.getWorkspaceFolder(o(u.baseUri.uri));return R!==void 0?new j.RelativePattern(R,u.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:l,asRange:m,asRanges:w,asPosition:p,asDiagnosticSeverity:D,asDiagnosticTag:f,asHover:S,asCompletionResult:I,asCompletionItem:Ae,asTextEdit:$n,asTextEdits:Mt,asSignatureHelp:Sr,asSignatureInformations:Qe,asSignatureInformation:Cn,asParameterInformations:on,asParameterInformation:Vr,asDeclarationResult:To,asDefinitionResult:ki,asLocation:_n,asReferences:Qr,asDocumentHighlights:Po,asDocumentHighlight:Ei,asDocumentHighlightKind:Oi,asSymbolKind:lt,asSymbolTag:Fi,asSymbolTags:Tr,asSymbolInformations:qo,asSymbolInformation:Wn,asDocumentSymbols:Ni,asDocumentSymbol:Gt,asCommand:rt,asCommands:tr,asCodeAction:ei,asCodeActionKind:Zr,asCodeActionKinds:nr,asCodeActionResult:Ii,asCodeLens:sn,asCodeLenses:Mi,asWorkspaceEdit:wn,asDocumentLink:k,asDocumentLinks:N,asFoldingRangeKind:oe,asFoldingRange:Re,asFoldingRanges:h,asColor:A,asColorInformation:we,asColorInformations:ye,asColorPresentation:qe,asColorPresentations:Ne,asSelectionRange:q,asSelectionRanges:M,asInlineValue:ie,asInlineValues:be,asInlayHint:at,asInlayHints:zb,asSemanticTokensLegend:Xb,asSemanticTokens:Gb,asSemanticTokensEdit:Vg,asSemanticTokensEdits:Vb,asCallHierarchyItem:Gs,asCallHierarchyItems:Kb,asCallHierarchyIncomingCall:Bg,asCallHierarchyIncomingCalls:Ub,asCallHierarchyOutgoingCall:Gg,asCallHierarchyOutgoingCalls:Bb,asLinkedEditingRanges:Jb,asTypeHierarchyItem:Xg,asTypeHierarchyItems:Yb,asGlobPattern:Zb}}xa.createConverter=uP});var ze=b(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.generateUuid=dn.parse=dn.isUUID=dn.v4=dn.empty=void 0;var ns=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},te=class extends ns{constructor(){super([te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),"-","4",te._randomHex(),te._randomHex(),te._randomHex(),"-",te._oneOf(te._timeHighBits),te._randomHex(),te._randomHex(),te._randomHex(),"-",te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex(),te._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return te._oneOf(te._chars)}};te._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];te._timeHighBits=["8","9","a","b"];dn.empty=new ns("00000000-0000-0000-0000-000000000000");function Ov(){return new te}dn.v4=Ov;var lP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Fv(n){return lP.test(n)}dn.isUUID=Fv;function dP(n){if(!Fv(n))throw new Error("invalid uuid");return new ns(n)}dn.parse=dP;function fP(){return Ov().asHex()}dn.generateUuid=fP});var Tf=b(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.ProgressPart=void 0;var Nv=require("vscode"),Iv=H(),Mv=an(),Sf=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Iv.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Nv.window.withProgress({location:Nv.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Iv.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&Mv.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Mv.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};ka.ProgressPart=Sf});var he=b(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.WorkspaceFeature=tt.TextDocumentLanguageFeature=tt.TextDocumentEventFeature=tt.DynamicDocumentFeature=tt.DynamicFeature=tt.StaticFeature=tt.ensure=tt.LSPCancellationError=void 0;var di=require("vscode"),Pf=H(),xt=an(),Lv=ze(),qf=class extends di.CancellationError{constructor(e){super(),this.data=e}};tt.LSPCancellationError=qf;function hP(n,e){return n[e]===void 0&&(n[e]={}),n[e]}tt.ensure=hP;var pP;(function(n){function e(t){let r=t;return r!=null&&xt.func(r.fillClientCapabilities)&&xt.func(r.initialize)&&xt.func(r.getState)&&xt.func(r.dispose)&&(r.fillInitializeParams===void 0||xt.func(r.fillInitializeParams))}n.is=e})(pP=tt.StaticFeature||(tt.StaticFeature={}));var gP;(function(n){function e(t){let r=t;return r!=null&&xt.func(r.fillClientCapabilities)&&xt.func(r.initialize)&&xt.func(r.getState)&&xt.func(r.dispose)&&(r.fillInitializeParams===void 0||xt.func(r.fillInitializeParams))&&xt.func(r.register)&&xt.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(gP=tt.DynamicFeature||(tt.DynamicFeature={}));var rs=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let o of di.workspace.textDocuments)if(di.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};tt.DynamicDocumentFeature=rs;var xf=class extends rs{constructor(e,t,r,i,o,s,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._textDocument=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new di.EventEmitter}static textDocumentFilter(e,t){for(let r of e)if(di.languages.match(r,t)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(di.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};tt.TextDocumentEventFeature=xf;var kf=class extends rs{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Pf.TextDocumentRegistrationOptions.is(t)){let r=Pf.StaticRegistrationOptions.hasId(t)?t.id:Lv.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(xt.boolean(t)&&t===!0||Pf.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=xt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Lv.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return xt.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&di.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};tt.TextDocumentLanguageFeature=kf;var Ef=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};tt.WorkspaceFeature=Ef});var Av=b((LI,jv)=>{var mP=typeof process=="object"&&process&&process.platform==="win32";jv.exports=mP?{sep:"\\"}:{sep:"/"}});var Kv=b((jI,zv)=>{"use strict";zv.exports=$v;function $v(n,e,t){n instanceof RegExp&&(n=Hv(n,t)),e instanceof RegExp&&(e=Hv(e,t));var r=Wv(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function Hv(n,e){var t=e.match(n);return t?t[0]:null}$v.range=Wv;function Wv(n,e,t){var r,i,o,s,a,c=t.indexOf(n),l=t.indexOf(e,c+1),d=c;if(c>=0&&l>0){if(n===e)return[c,l];for(r=[],o=t.length;d>=0&&!a;)d==c?(r.push(d),c=t.indexOf(n,d+1)):r.length==1?a=[r.pop(),l]:(i=r.pop(),i<o&&(o=i,s=l),l=t.indexOf(e,d+1)),d=c<l&&c>=0?c:l;r.length&&(a=[o,s])}return a}});var Yv=b((AI,Qv)=>{var Uv=Kv();Qv.exports=CP;var Bv="\0SLASH"+Math.random()+"\0",Gv="\0OPEN"+Math.random()+"\0",Ff="\0CLOSE"+Math.random()+"\0",Vv="\0COMMA"+Math.random()+"\0",Xv="\0PERIOD"+Math.random()+"\0";function Of(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function vP(n){return n.split("\\\\").join(Bv).split("\\{").join(Gv).split("\\}").join(Ff).split("\\,").join(Vv).split("\\.").join(Xv)}function yP(n){return n.split(Bv).join("\\").split(Gv).join("{").split(Ff).join("}").split(Vv).join(",").split(Xv).join(".")}function Jv(n){if(!n)return[""];var e=[],t=Uv("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,o=t.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=Jv(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function CP(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),is(vP(n),!0).map(yP)):[]}function _P(n){return"{"+n+"}"}function wP(n){return/^-?0\d/.test(n)}function bP(n,e){return n<=e}function DP(n,e){return n>=e}function is(n,e){var t=[],r=Uv("{","}",n);if(!r)return[n];var i=r.pre,o=r.post.length?is(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];t.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||l,g=r.body.indexOf(",")>=0;if(!d&&!g)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+Ff+r.post,is(n)):[n];var f;if(d)f=r.body.split(/\.\./);else if(f=Jv(r.body),f.length===1&&(f=is(f[0],!1).map(_P),f.length===1))return o.map(function(Ae){return r.pre+f[0]+Ae});var p;if(d){var m=Of(f[0]),w=Of(f[1]),D=Math.max(f[0].length,f[1].length),P=f.length==3?Math.abs(Of(f[2])):1,C=bP,y=w<m;y&&(P*=-1,C=DP);var S=f.some(wP);p=[];for(var I=m;C(I,w);I+=P){var X;if(l)X=String.fromCharCode(I),X==="\\"&&(X="");else if(X=String(I),S){var $=D-X.length;if($>0){var Y=new Array($+1).join("0");I<0?X="-"+Y+X.slice(1):X=Y+X}}p.push(X)}}else{p=[];for(var Z=0;Z<f.length;Z++)p.push.apply(p,is(f[Z],!1))}for(var Z=0;Z<p.length;Z++)for(var s=0;s<o.length;s++){var a=i+p[Z]+o[s];(!e||d||a)&&t.push(a)}}return t}});var Oa=b(($I,jf)=>{var Qt=jf.exports=(n,e,t={})=>(Ea(e),!t.nocomment&&e.charAt(0)==="#"?!1:new to(e,t).match(n));jf.exports=Qt;var Mf=Av();Qt.sep=Mf.sep;var kn=Symbol("globstar **");Qt.GLOBSTAR=kn;var RP=Yv(),Zv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Lf="[^/]",Nf=Lf+"*?",SP="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",TP="(?:(?!(?:\\/|^)\\.).)*?",ny=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),ey=ny("().*{}+?[]^$\\!"),PP=ny("[.("),ty=/\/+/;Qt.filter=(n,e={})=>(t,r,i)=>Qt(t,n,e);var Or=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};Qt.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Qt;let e=Qt,t=(r,i,o)=>e(r,i,Or(n,o));return t.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,Or(n,o))}},t.Minimatch.defaults=r=>e.defaults(Or(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,Or(n,i)),t.defaults=r=>e.defaults(Or(n,r)),t.makeRe=(r,i)=>e.makeRe(r,Or(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,Or(n,i)),t.match=(r,i,o)=>e.match(r,i,Or(n,o)),t};Qt.braceExpand=(n,e)=>ry(n,e);var ry=(n,e={})=>(Ea(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:RP(n)),qP=1024*64,Ea=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>qP)throw new TypeError("pattern is too long")},If=Symbol("subparse");Qt.makeRe=(n,e)=>new to(n,e||{}).makeRe();Qt.match=(n,e,t={})=>{let r=new to(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var xP=n=>n.replace(/\\(.)/g,"$1"),kP=n=>n.replace(/\\([^-\]])/g,"$1"),EP=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),OP=n=>n.replace(/[[\]\\]/g,"\\$&"),to=class{constructor(e,t){Ea(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(ty)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l=t[s],d=e[o];if(this.debug(t,l,d),l===!1)return!1;if(l===kn){this.debug("GLOBSTAR",[t,l,d]);var g=o,f=s+1;if(f===c){for(this.debug("** at the end");o<a;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;g<a;){var p=e[g];if(this.debug(`
globstar while`,e,g,t,f,p),this.matchOne(e.slice(g),t.slice(f),r))return this.debug("globstar found match!",g,a,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,g,t,f);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,g,t,f),g===a))}var m;if(typeof l=="string"?(m=d===l,this.debug("string match",l,d,m)):(m=d.match(l),this.debug("pattern match",l,d,m)),!m)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return ry(this.pattern,this.options)}parse(e,t){Ea(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return kn;if(e==="")return"";let i="",o=!1,s=!1,a=[],c=[],l,d=!1,g=-1,f=-1,p,m,w,D=e.charAt(0)===".",P=r.dot||D,C=()=>D?"":P?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=$=>$.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",S=()=>{if(l){switch(l){case"*":i+=Nf,o=!0;break;case"?":i+=Lf,o=!0;break;default:i+="\\"+l;break}this.debug("clearStateChar %j %j",l,i),l=!1}};for(let $=0,Y;$<e.length&&(Y=e.charAt($));$++){if(this.debug("%s	%s %s %j",e,$,i,Y),s){if(Y==="/")return!1;ey[Y]&&(i+="\\"),i+=Y,s=!1;continue}switch(Y){case"/":return!1;case"\\":if(d&&e.charAt($+1)==="-"){i+=Y;continue}S(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,$,i,Y),d){this.debug("  in class"),Y==="!"&&$===f+1&&(Y="^"),i+=Y;continue}this.debug("call clearStateChar %j",l),S(),l=Y,r.noext&&S();continue;case"(":{if(d){i+="(";continue}if(!l){i+="\\(";continue}let Z={type:l,start:$-1,reStart:i.length,open:Zv[l].open,close:Zv[l].close};this.debug(this.pattern,"	",Z),a.push(Z),i+=Z.open,Z.start===0&&Z.type!=="!"&&(D=!0,i+=y(e.slice($+1))),this.debug("plType %j %j",l,i),l=!1;continue}case")":{let Z=a[a.length-1];if(d||!Z){i+="\\)";continue}a.pop(),S(),o=!0,m=Z,i+=m.close,m.type==="!"&&c.push(Object.assign(m,{reEnd:i.length}));continue}case"|":{let Z=a[a.length-1];if(d||!Z){i+="\\|";continue}S(),i+="|",Z.start===0&&Z.type!=="!"&&(D=!0,i+=y(e.slice($+1)));continue}case"[":if(S(),d){i+="\\"+Y;continue}d=!0,f=$,g=i.length,i+=Y;continue;case"]":if($===f+1||!d){i+="\\"+Y;continue}p=e.substring(f+1,$);try{RegExp("["+OP(kP(p))+"]"),i+=Y}catch{i=i.substring(0,g)+"(?:$.)"}o=!0,d=!1;continue;default:S(),ey[Y]&&!(Y==="^"&&d)&&(i+="\\"),i+=Y;break}}for(d&&(p=e.slice(f+1),w=this.parse(p,If),i=i.substring(0,g)+"\\["+w[0],o=o||w[1]),m=a.pop();m;m=a.pop()){let $;$=i.slice(m.reStart+m.open.length),this.debug("setting tail",i,m),$=$.replace(/((?:\\{2}){0,64})(\\?)\|/g,(Z,Ae,pe)=>(pe||(pe="\\"),Ae+Ae+pe+"|")),this.debug(`tail=%j
   %s`,$,$,m,i);let Y=m.type==="*"?Nf:m.type==="?"?Lf:"\\"+m.type;o=!0,i=i.slice(0,m.reStart)+Y+"\\("+$}S(),s&&(i+="\\\\");let I=PP[i.charAt(0)];for(let $=c.length-1;$>-1;$--){let Y=c[$],Z=i.slice(0,Y.reStart),Ae=i.slice(Y.reStart,Y.reEnd-8),pe=i.slice(Y.reEnd),st=i.slice(Y.reEnd-8,Y.reEnd)+pe,Rr=Z.split(")").length,$n=Z.split("(").length-Rr,Mt=pe;for(let Sr=0;Sr<$n;Sr++)Mt=Mt.replace(/\)[+*?]?/,"");pe=Mt;let Bt=pe===""&&t!==If?"(?:$|\\/)":"";i=Z+Ae+pe+Bt+st}if(i!==""&&o&&(i="(?=.)"+i),I&&(i=C()+i),t===If)return[i,o];if(r.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return xP(e);let X=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",X),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?Nf:t.dot?SP:TP,i=t.nocase?"i":"",o=e.map(s=>(s=s.map(a=>typeof a=="string"?EP(a):a===kn?kn:a._src).reduce((a,c)=>(a[a.length-1]===kn&&c===kn||a.push(c),a),[]),s.forEach((a,c)=>{a!==kn||s[c-1]===kn||(c===0?s.length>1?s[c+1]="(?:\\/|"+r+"\\/)?"+s[c+1]:s[c]=r:c===s.length-1?s[c-1]+="(?:\\/|"+r+")?":(s[c-1]+="(?:\\/|\\/"+r+"\\/)"+s[c+1],s[c+1]=kn))}),s.filter(a=>a!==kn).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;Mf.sep!=="/"&&(e=e.split(Mf.sep).join("/")),e=e.split(ty),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=e.length-1;s>=0&&(o=e[s],!o);s--);for(let s=0;s<i.length;s++){let a=i[s],c=e;if(r.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return Qt.defaults(e).Minimatch}};Qt.Minimatch=to});var Bf=b(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.DiagnosticFeature=Xn.DiagnosticPullMode=Xn.vsdiag=void 0;var FP=Oa(),de=require("vscode"),Xe=H(),NP=ze(),Af=he();function Fa(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var En;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(En=Xn.vsdiag||(Xn.vsdiag={}));var Hf;(function(n){n.onType="onType",n.onSave="onSave"})(Hf=Xn.DiagnosticPullMode||(Xn.DiagnosticPullMode={}));var wt;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(wt||(wt={}));var fi=class{constructor(){this.open=new Set,this._onOpen=new de.EventEmitter,this._onClose=new de.EventEmitter,fi.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;fi.fillTabResources(i);let o=new Set,s=new Set(i);for(let a of r.values())i.has(a)?s.delete(a):o.add(a);if(this.open=i,o.size>0){let a=new Set;for(let c of o)a.add(de.Uri.parse(c));this._onClose.fire(a)}if(s.size>0){let a=new Set;for(let c of s)a.add(de.Uri.parse(c));this._onOpen.fire(a)}};de.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=de.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof de.Uri?de.window.activeTextEditor?.document.uri===e:de.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof de.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return fi.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of de.window.tabGroups.all)for(let o of i.tabs){let s=o.input,a;s instanceof de.TabInputText?a=s.uri:s instanceof de.TabInputTextDiff&&(a=s.modified),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},it;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(it||(it={}));var ur;(function(n){function e(t){return t instanceof de.Uri?t.toString():t.uri.toString()}n.asKey=e})(ur||(ur={}));var $f=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===it.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=t instanceof de.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],c=i.get(o);return c===void 0&&(c={document:s,pulledVersion:a,resultId:void 0},i.set(o,c)),c}update(e,t,r,i){let o=e===it.document?this.documentPullStates:this.workspacePullStates,[s,a,c,l]=t instanceof de.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],d=o.get(s);d===void 0?(d={document:a,pulledVersion:c,resultId:l},o.set(s,d)):(d.pulledVersion=c,d.resultId=l)}unTrack(e,t){let r=ur.asKey(t);(e===it.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=ur.asKey(t);return(e===it.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=ur.asKey(t);return(e===it.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},Wf=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new de.EventEmitter,this.provider=this.createProvider(),this.diagnostics=de.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new $f,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof de.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof de.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof de.Uri,i=r?e:e.uri,o=i.toString();t=r?t:e.version;let s=this.openRequests.get(o),a=r?this.documentStates.track(it.document,e,t):this.documentStates.track(it.document,e);if(s===void 0){let c=new de.CancellationTokenSource;this.openRequests.set(o,{state:wt.active,document:e,version:t,tokenSource:c});let l,d;try{l=await this.provider.provideDiagnostics(e,a.resultId,c.token)??{kind:En.DocumentDiagnosticReportKind.full,items:[]}}catch(g){if(g instanceof Af.LSPCancellationError&&Xe.DiagnosticServerCancellationData.is(g.data)&&g.data.retriggerRequest===!1&&(d={state:wt.outDated,document:e}),d===void 0&&g instanceof de.CancellationError)d={state:wt.reschedule,document:e};else throw g}if(d=d??this.openRequests.get(o),d===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(it.document,e);return}if(d.state===wt.outDated)return;l!==void 0&&(l.kind===En.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,l.items),a.pulledVersion=t,a.resultId=l.resultId),d.state===wt.reschedule&&this.pull(e)}else s.state===wt.active?(s.tokenSource.cancel(),this.openRequests.set(o,{state:wt.reschedule,document:s.document})):s.state===wt.outDated&&this.openRequests.set(o,{state:wt.reschedule,document:s.document})}forgetDocument(e){let t=e instanceof de.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:wt.reschedule,document:e}):this.pull(e,()=>{this.forget(it.document,e)}):(i!==void 0&&(i.state===wt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:wt.outDated,document:e})),this.diagnostics.delete(t),this.forget(it.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Xe.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof Af.LSPCancellationError)&&!Xe.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Xe.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new de.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===En.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(it.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(it.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let o=(a,c,l)=>{let d={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof de.Uri?a:a.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:En.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Xe.DocumentDiagnosticRequest.type,d,l).then(async g=>g==null||this.isDisposed||l.isCancellationRequested?{kind:En.DocumentDiagnosticReportKind.full,items:[]}:g.kind===Xe.DocumentDiagnosticReportKind.Full?{kind:En.DocumentDiagnosticReportKind.full,resultId:g.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(g.items,l)}:{kind:En.DocumentDiagnosticReportKind.unChanged,resultId:g.resultId},g=>this.client.handleFailedRequest(Xe.DocumentDiagnosticRequest.type,l,g,{kind:En.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let o=async l=>l.kind===Xe.DocumentDiagnosticReportKind.Full?{kind:En.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version,items:await this.client.protocol2CodeConverter.asDiagnostics(l.items,r)}:{kind:En.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(l.uri),resultId:l.resultId,version:l.version},s=l=>{let d=[];for(let g of l)d.push({uri:this.client.code2ProtocolConverter.asUri(g.uri),value:g.value});return d},a=(l,d)=>{let g=(0,NP.generateUuid)(),f=this.client.onProgress(Xe.WorkspaceDiagnosticRequest.partialResult,g,async m=>{if(m==null){i(null);return}let w={items:[]};for(let D of m.items)try{w.items.push(await o(D))}catch(P){this.client.error("Converting workspace diagnostics failed.",P)}i(w)}),p={identifier:this.options.identifier,previousResultIds:s(l),partialResultToken:g};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Xe.WorkspaceDiagnosticRequest.type,p,d).then(async m=>{if(d.isCancellationRequested)return{items:[]};let w={items:[]};for(let D of m.items)w.items.push(await o(D));return f.dispose(),i(w),{items:[]}},m=>(f.dispose(),this.client.handleFailedRequest(Xe.DocumentDiagnosticRequest.type,d,m,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===wt.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:wt.outDated,document:t.document});this.diagnostics.dispose()}},zf=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Xe.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=ur.asKey(e);this.documents.has(t)||(this.documents.set(t,e,Xe.Touch.Last),this.trigger())}remove(e){let t=ur.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Xe.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=ur.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,Xe.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?ur.asKey(this.endDocument):void 0}},Kf=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),s=[],a=m=>{let w=r.documentSelector;if(i.match!==void 0)return i.match(w,m);for(let D of w)if(!!Xe.TextDocumentFilter.is(D)){if(typeof D=="string"||D.language!==void 0&&D.language!=="*"||D.scheme!==void 0&&D.scheme!=="*"&&D.scheme!==m.scheme)return!1;if(D.pattern!==void 0){let P=new FP.Minimatch(D.pattern,{noext:!0});if(!P.makeRe()||!P.match(m.fsPath))return!1}}return!0},c=m=>m instanceof de.Uri?a(m):de.languages.match(o,m)>0&&t.isVisible(m),l=m=>m instanceof de.Uri?this.activeTextDocument?.uri.toString()===m.toString():this.activeTextDocument===m;this.diagnosticRequestor=new Wf(e,t,r),this.backgroundScheduler=new zf(this.diagnosticRequestor);let d=m=>{!c(m)||!r.interFileDependencies||l(m)||this.backgroundScheduler.add(m)};this.activeTextDocument=de.window.activeTextEditor?.document,de.window.onDidChangeActiveTextEditor(m=>{let w=this.activeTextDocument;this.activeTextDocument=m?.document,w!==void 0&&d(w),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let g=e.getFeature(Xe.DidOpenTextDocumentNotification.method);s.push(g.onNotificationSent(m=>{let w=m.textDocument;this.diagnosticRequestor.knows(it.document,w)||c(w)&&this.diagnosticRequestor.pull(w,()=>{d(w)})})),t.onOpen(m=>{for(let w of m){if(this.diagnosticRequestor.knows(it.document,w))continue;let D=w.toString(),P;for(let C of de.workspace.textDocuments)if(D===C.uri.toString()){P=C;break}P!==void 0&&c(P)?this.diagnosticRequestor.pull(P,()=>{d(P)}):c(w)&&this.diagnosticRequestor.pull(w,()=>{d(w)})}});let f=new Set;for(let m of de.workspace.textDocuments)c(m)&&(this.diagnosticRequestor.pull(m,()=>{d(m)}),f.add(m.uri.toString()));if(i.onTabs===!0)for(let m of t.getTabResources())!f.has(m.toString())&&c(m)&&this.diagnosticRequestor.pull(m,()=>{d(m)});if(i.onChange===!0){let m=e.getFeature(Xe.DidChangeTextDocumentNotification.method);s.push(m.onNotificationSent(async w=>{let D=w.textDocument;(i.filter===void 0||!i.filter(D,Hf.onType))&&this.diagnosticRequestor.knows(it.document,D)&&this.diagnosticRequestor.pull(D,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let m=e.getFeature(Xe.DidSaveTextDocumentNotification.method);s.push(m.onNotificationSent(w=>{let D=w.textDocument;(i.filter===void 0||!i.filter(D,Hf.onSave))&&this.diagnosticRequestor.knows(it.document,D)&&this.diagnosticRequestor.pull(w.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let p=e.getFeature(Xe.DidCloseTextDocumentNotification.method);s.push(p.onNotificationSent(m=>{this.cleanUpDocument(m.textDocument)})),t.onClose(m=>{for(let w of m)this.cleanUpDocument(w)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let m of de.workspace.textDocuments)c(m)&&this.diagnosticRequestor.pull(m)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=de.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(it.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},Uf=class extends Af.TextDocumentLanguageFeature{constructor(e){super(e,Xe.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=Fa(Fa(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,Fa(Fa(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(Xe.DiagnosticRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new fi);let t=new Kf(this._client,this.tabs,e);return[t.disposable,t]}};Xn.DiagnosticFeature=Uf});var sy=b(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.NotebookDocumentSyncFeature=void 0;var bt=require("vscode"),IP=Oa(),lr=H(),MP=ze(),iy=an();function oy(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var no;(function(n){let e;(function(t){function r(f,p){return{version:f.version,uri:p.asUri(f.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(f,p,m){let w=lr.NotebookDocument.create(m.asUri(f.uri),f.notebookType,f.version,o(p,m));return Object.keys(f.metadata).length>0&&(w.metadata=s(f.metadata)),w}t.asNotebookDocument=i;function o(f,p){return f.map(m=>a(m,p))}t.asNotebookCells=o;function s(f){return l(new Set,f)}t.asMetadata=s;function a(f,p){let m=lr.NotebookCell.create(c(f.kind),p.asUri(f.document.uri));return Object.keys(f.metadata).length>0&&(m.metadata=s(f.metadata)),f.executionSummary!==void 0&&iy.number(f.executionSummary.executionOrder)&&iy.boolean(f.executionSummary.success)&&(m.executionSummary={executionOrder:f.executionSummary.executionOrder,success:f.executionSummary.success}),m}t.asNotebookCell=a;function c(f){switch(f){case bt.NotebookCellKind.Markup:return lr.NotebookCellKind.Markup;case bt.NotebookCellKind.Code:return lr.NotebookCellKind.Code}}function l(f,p){if(f.has(p))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(p)){let m=[];for(let w of p)if(w!==null&&typeof w=="object"||Array.isArray(w))m.push(l(f,w));else{if(w instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m.push(w)}return m}else{let m=Object.keys(p),w=Object.create(null);for(let D of m){let P=p[D];if(P!==null&&typeof P=="object"||Array.isArray(P))w[D]=l(f,P);else{if(P instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");w[D]=P}}return w}}function d(f,p){let m=p.asChangeTextDocumentParams(f,f.document.uri,f.document.version);return{document:m.textDocument,changes:m.contentChanges}}t.asTextContentChange=d;function g(f,p){let m=Object.create(null);if(f.metadata&&(m.metadata=n.c2p.asMetadata(f.metadata)),f.cells!==void 0){let w=Object.create(null),D=f.cells;D.structure&&(w.structure={array:{start:D.structure.array.start,deleteCount:D.structure.array.deleteCount,cells:D.structure.array.cells!==void 0?D.structure.array.cells.map(P=>n.c2p.asNotebookCell(P,p)):void 0},didOpen:D.structure.didOpen!==void 0?D.structure.didOpen.map(P=>p.asOpenTextDocumentParams(P.document).textDocument):void 0,didClose:D.structure.didClose!==void 0?D.structure.didClose.map(P=>p.asCloseTextDocumentParams(P.document).textDocument):void 0}),D.data!==void 0&&(w.data=D.data.map(P=>n.c2p.asNotebookCell(P,p))),D.textContent!==void 0&&(w.textContent=D.textContent.map(P=>n.c2p.asTextContentChange(P,p))),Object.keys(w).length>0&&(m.cells=w)}return m}t.asNotebookDocumentChangeEvent=g})(e=n.c2p||(n.c2p={}))})(no||(no={}));var Gf;(function(n){function e(a,c,l){let d=a.length,g=c.length,f=0;for(;f<g&&f<d&&t(a[f],c[f],l);)f++;if(f<g&&f<d){let p=d-1,m=g-1;for(;p>=0&&m>=0&&t(a[p],c[m],l);)p--,m--;let w=p+1-f,D=f===m+1?void 0:c.slice(f,m+1);return D!==void 0?{start:f,deleteCount:w,cells:D}:{start:f,deleteCount:w}}else return f<g?{start:f,deleteCount:0,cells:c.slice(f)}:f<d?{start:f,deleteCount:d-f}:void 0}n.computeDiff=e;function t(a,c,l=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!r(a.executionSummary,c.executionSummary)?!1:!l||l&&o(a.metadata,c.metadata)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&i(a.timing,c.timing)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;let l=Array.isArray(a),d=Array.isArray(c);if(l!==d)return!1;if(l&&d){if(a.length!==c.length)return!1;for(let g=0;g<a.length;g++)if(!o(a[g],c[g]))return!1}if(s(a)&&s(c)){let g=Object.keys(a),f=Object.keys(c);if(g.length!==f.length||(g.sort(),f.sort(),!o(g,f)))return!1;for(let p=0;p<g.length;p++){let m=g[p];if(!o(a[m],c[m]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=s})(Gf||(Gf={}));var Vf;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new IP.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(Vf||(Vf={}));var Na;(function(n){function e(r){let i=r.notebookSelector,o=[];for(let s of i){let a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,l=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(let d of s.cells)o.push(t(a,c,l,d.language));else o.push(t(a,c,l,void 0))}return o}n.asDocumentSelector=e;function t(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(Na||(Na={}));var Ia;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(Ia||(Ia={}));var ro=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Na.asDocumentSelector(t)),bt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of bt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);bt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&bt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),bt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of bt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return bt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(bt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let o=r.uris.has(t.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let s=this.getMatchingCells(e);if(s!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){bt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(o,s)=>{let a=no.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(l=>this.client.code2ProtocolConverter.asTextDocumentItem(l.document));try{await this.client.sendNotification(lr.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(l){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",l),l}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ia.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async o=>{try{await this.client.sendNotification(lr.DidChangeNotebookDocumentNotification.type,{notebookDocument:no.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:no.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ia.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(lr.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(o,s)=>{try{await this.client.sendNotification(lr.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};t?.metadata!==void 0&&(o.metadata=no.c2p.asMetadata(t.metadata));let s;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];s=new Set(i.map(c=>c.document.uri.toString()));for(let c of t.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,c=i,l=Gf.computeDiff(a,c,!1),d,g;if(l!==void 0){d=l.cells===void 0?new Map:new Map(l.cells.map(m=>[m.document.uri.toString(),m])),g=l.deleteCount===0?new Map:new Map(a.slice(l.start,l.start+l.deleteCount).map(m=>[m.document.uri.toString(),m]));for(let m of Array.from(g.keys()))d.has(m)&&(g.delete(m),d.delete(m));o.cells=o.cells??{};let f=[],p=[];if(d.size>0||g.size>0){for(let m of d.values())f.push(m);for(let m of g.values())p.push(m)}o.cells.structure={array:l,didOpen:f,didClose:p}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||Vf.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(o=>{let s=o.document.languageId;return r.some(a=>a.language==="*"||s===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=lr.NotebookDocumentSyncRegistrationType.type,bt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof ro&&o.didOpenNotebookCellTextDocument(r,i)}),bt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof ro&&o.didChangeNotebookCellTextDocument(i,t)}),bt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof ro&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=oy(oy(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Na.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??MP.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new ro(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==dr.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&bt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of bt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};Ma.NotebookDocumentSyncFeature=dr;dr.CellScheme="vscode-notebook-cell"});var cy=b(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.SyncConfigurationFeature=Fr.toJSONObject=Fr.ConfigurationFeature=void 0;var io=require("vscode"),os=H(),LP=an(),jP=ze(),ay=he(),Xf=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(os.ConfigurationRequest.type,(t,r)=>{let i=s=>{let a=[];for(let c of s.items){let l=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(l,c.section!==null?c.section:void 0))}return a},o=e.middleware.workspace;return o&&o.configuration?o.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=hi(io.workspace.getConfiguration(void 0,e).get(t));else{let o=io.workspace.getConfiguration(t.substr(0,i),e);o&&(r=hi(o.get(t.substr(i+1))))}}else{let i=io.workspace.getConfiguration(void 0,e);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=hi(i.get(o)))}return r===void 0&&(r=null),r}dispose(){}};Fr.ConfigurationFeature=Xf;function hi(n){if(n){if(Array.isArray(n))return n.map(hi);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=hi(n[t]));return e}}return n}Fr.toJSONObject=hi;var Jf=class{constructor(e){this._client=e,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return os.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,ay.ensure)((0,ay.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:jP.generateUuid(),registerOptions:{section:e}})}register(e){let t=io.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(e,t){if(this.isDisposed)return;let r;if(LP.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async s=>s===void 0?this._client.sendNotification(os.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(os.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(r,i):i(r)).catch(s=>{this._client.error(`Sending notification ${os.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let a=o;for(let c=0;c<s.length-1;c++){let l=a[s[c]];l||(l=Object.create(null),a[s[c]]=l),a=l}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(a>=0?c=io.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):c=io.workspace.getConfiguration(void 0,r).get(s),c){let l=e[o].split(".");t(i,l)[l[l.length-1]]=hi(c)}}return i}};Fr.SyncConfigurationFeature=Jf});var uy=b(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.DidSaveTextDocumentFeature=jt.WillSaveWaitUntilFeature=jt.WillSaveFeature=jt.DidChangeTextDocumentFeature=jt.DidCloseTextDocumentFeature=jt.DidOpenTextDocumentFeature=void 0;var Yt=require("vscode"),ke=H(),Ke=he(),oo=ze(),Qf=class extends Ke.TextDocumentEventFeature{constructor(e,t){super(e,Yt.workspace.onDidOpenTextDocument,ke.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,Ke.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:oo.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return ke.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Yt.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&Yt.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};jt.DidOpenTextDocumentFeature=Qf;var Yf=class extends Ke.TextDocumentEventFeature{constructor(e,t,r){super(e,Yt.workspace.onDidCloseTextDocument,ke.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,Ke.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return ke.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:oo.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Yt.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};jt.DidCloseTextDocumentFeature=Yf;var Zf=class extends Ke.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new Yt.EventEmitter,this._onPendingChangeAdded=new Yt.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=ke.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return ke.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==ke.TextDocumentSyncKind.None&&this.register({id:oo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Yt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let o of this._changeData.values())if(Yt.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let s=this._client.middleware;if(o.syncKind===ke.TextDocumentSyncKind.Incremental){let a=async c=>{let l=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,t,r);await this._client.sendNotification(ke.DidChangeTextDocumentNotification.type,l),this.notificationSent(c.document,ke.DidChangeTextDocumentNotification.type,l)};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}else if(o.syncKind===ke.TextDocumentSyncKind.Full){let a=async c=>{let l=c.document.uri.toString();this._pendingTextDocumentChanges.set(l,c.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(e,c=>a(c)):a(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${ke.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=ke.TextDocumentSyncKind.None;else{this._syncKind=ke.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===ke.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=ke.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(Yt.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==ke.TextDocumentSyncKind.Full)switch(e){case ke.TextDocumentSyncKind.Full:this._syncKind=e;break;case ke.TextDocumentSyncKind.Incremental:this._syncKind===ke.TextDocumentSyncKind.None&&(this._syncKind=ke.TextDocumentSyncKind.Incremental);break}}};jt.DidChangeTextDocumentFeature=Zf;var eh=class extends Ke.TextDocumentEventFeature{constructor(e){super(e,Yt.workspace.onWillSaveTextDocument,ke.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>Ke.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return ke.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:oo.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};jt.WillSaveFeature=eh;var th=class extends Ke.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return ke.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:oo.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=Yt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(Ke.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(ke.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};jt.WillSaveWaitUntilFeature=th;var nh=class extends Ke.TextDocumentEventFeature{constructor(e){super(e,Yt.workspace.onDidSaveTextDocument,ke.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,Ke.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return ke.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,Ke.ensure)((0,Ke.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:oo.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};jt.DidSaveTextDocumentFeature=nh});var ly=b(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.CompletionItemFeature=void 0;var AP=require("vscode"),ae=H(),rh=he(),HP=ze(),$P=[ae.CompletionItemKind.Text,ae.CompletionItemKind.Method,ae.CompletionItemKind.Function,ae.CompletionItemKind.Constructor,ae.CompletionItemKind.Field,ae.CompletionItemKind.Variable,ae.CompletionItemKind.Class,ae.CompletionItemKind.Interface,ae.CompletionItemKind.Module,ae.CompletionItemKind.Property,ae.CompletionItemKind.Unit,ae.CompletionItemKind.Value,ae.CompletionItemKind.Enum,ae.CompletionItemKind.Keyword,ae.CompletionItemKind.Snippet,ae.CompletionItemKind.Color,ae.CompletionItemKind.File,ae.CompletionItemKind.Reference,ae.CompletionItemKind.Folder,ae.CompletionItemKind.EnumMember,ae.CompletionItemKind.Constant,ae.CompletionItemKind.Struct,ae.CompletionItemKind.Event,ae.CompletionItemKind.Operator,ae.CompletionItemKind.TypeParameter],ih=class extends rh.TextDocumentLanguageFeature{constructor(e){super(e,ae.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,rh.ensure)((0,rh.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[ae.MarkupKind.Markdown,ae.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[ae.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[ae.InsertTextMode.asIs,ae.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=ae.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:$P},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);!r||this.register({id:HP.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,c,l,d)=>{let g=this._client,f=this._client.middleware,p=(m,w,D,P)=>g.sendRequest(ae.CompletionRequest.type,g.code2ProtocolConverter.asCompletionParams(m,w,D),P).then(C=>P.isCancellationRequested?null:g.protocol2CodeConverter.asCompletionResult(C,i,P),C=>g.handleFailedRequest(ae.CompletionRequest.type,P,C,null));return f.provideCompletionItem?f.provideCompletionItem(a,c,d,l,p):p(a,c,d,l)},resolveCompletionItem:e.resolveProvider?(a,c)=>{let l=this._client,d=this._client.middleware,g=(f,p)=>l.sendRequest(ae.CompletionResolveRequest.type,l.code2ProtocolConverter.asCompletionItem(f,!!this.labelDetailsSupport.get(t)),p).then(m=>p.isCancellationRequested?null:l.protocol2CodeConverter.asCompletionItem(m),m=>l.handleFailedRequest(ae.CompletionResolveRequest.type,p,m,f));return d.resolveCompletionItem?d.resolveCompletionItem(a,c,g):g(a,c)}:void 0};return[AP.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}};La.CompletionItemFeature=ih});var dy=b(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.HoverFeature=void 0;var WP=require("vscode"),ss=H(),oh=he(),zP=ze(),sh=class extends oh.TextDocumentLanguageFeature{constructor(e){super(e,ss.HoverRequest.type)}fillClientCapabilities(e){let t=(0,oh.ensure)((0,oh.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[ss.MarkupKind.Markdown,ss.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);!r||this.register({id:zP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(ss.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asHover(p),p=>a.handleFailedRequest(ss.HoverRequest.type,f,p,null)),l=a.middleware;return l.provideHover?l.provideHover(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return WP.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ja.HoverFeature=sh});var fy=b(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.DefinitionFeature=void 0;var KP=require("vscode"),ah=H(),ch=he(),UP=ze(),uh=class extends ch.TextDocumentLanguageFeature{constructor(e){super(e,ah.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,ch.ensure)((0,ch.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);!r||this.register({id:UP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(ah.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,f),p=>a.handleFailedRequest(ah.DefinitionRequest.type,f,p,null)),l=a.middleware;return l.provideDefinition?l.provideDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return KP.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Aa.DefinitionFeature=uh});var py=b(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.SignatureHelpFeature=void 0;var hy=require("vscode"),as=H(),lh=he(),BP=ze(),dh=class extends lh.TextDocumentLanguageFeature{constructor(e){super(e,as.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,lh.ensure)((0,lh.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[as.MarkupKind.Markdown,as.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);!r||this.register({id:BP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,o,s)=>{let a=this._client,c=(d,g,f,p)=>a.sendRequest(as.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(d,g,f),p).then(m=>p.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(m,p),m=>a.handleFailedRequest(as.SignatureHelpRequest.type,p,m,null)),l=a.middleware;return l.provideSignatureHelp?l.provideSignatureHelp(r,i,s,o,c):c(r,i,s,o)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return hy.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return hy.languages.registerSignatureHelpProvider(r,t,i)}}};Ha.SignatureHelpFeature=dh});var gy=b($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.DocumentHighlightFeature=void 0;var GP=require("vscode"),fh=H(),hh=he(),VP=ze(),ph=class extends hh.TextDocumentLanguageFeature{constructor(e){super(e,fh.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,hh.ensure)((0,hh.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);!r||this.register({id:VP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(fh.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(p,f),p=>a.handleFailedRequest(fh.DocumentHighlightRequest.type,f,p,null)),l=a.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(i,o,s,c):c(i,o,s)}};return[GP.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};$a.DocumentHighlightFeature=ph});var vh=b(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.DocumentSymbolFeature=Jn.SupportedSymbolTags=Jn.SupportedSymbolKinds=void 0;var XP=require("vscode"),_e=H(),gh=he(),JP=ze();Jn.SupportedSymbolKinds=[_e.SymbolKind.File,_e.SymbolKind.Module,_e.SymbolKind.Namespace,_e.SymbolKind.Package,_e.SymbolKind.Class,_e.SymbolKind.Method,_e.SymbolKind.Property,_e.SymbolKind.Field,_e.SymbolKind.Constructor,_e.SymbolKind.Enum,_e.SymbolKind.Interface,_e.SymbolKind.Function,_e.SymbolKind.Variable,_e.SymbolKind.Constant,_e.SymbolKind.String,_e.SymbolKind.Number,_e.SymbolKind.Boolean,_e.SymbolKind.Array,_e.SymbolKind.Object,_e.SymbolKind.Key,_e.SymbolKind.Null,_e.SymbolKind.EnumMember,_e.SymbolKind.Struct,_e.SymbolKind.Event,_e.SymbolKind.Operator,_e.SymbolKind.TypeParameter];Jn.SupportedSymbolTags=[_e.SymbolTag.Deprecated];var mh=class extends gh.TextDocumentLanguageFeature{constructor(e){super(e,_e.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,gh.ensure)((0,gh.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Jn.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:Jn.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);!r||this.register({id:JP.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(o,s)=>{let a=this._client,c=async(d,g)=>{try{let f=await a.sendRequest(_e.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(d),g);if(g.isCancellationRequested||f===void 0||f===null)return null;if(f.length===0)return[];{let p=f[0];return _e.DocumentSymbol.is(p)?await a.protocol2CodeConverter.asDocumentSymbols(f,g):await a.protocol2CodeConverter.asSymbolInformations(f,g)}}catch(f){return a.handleFailedRequest(_e.DocumentSymbolRequest.type,g,f,null)}},l=a.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(o,s,c):c(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[XP.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};Jn.DocumentSymbolFeature=mh});var vy=b(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.WorkspaceSymbolFeature=void 0;var QP=require("vscode"),cs=H(),yh=he(),my=vh(),YP=ze(),Ch=class extends yh.WorkspaceFeature{constructor(e){super(e,cs.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,yh.ensure)((0,yh.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:my.SupportedSymbolKinds},t.tagSupport={valueSet:my.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:YP.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let o=this._client,s=(c,l)=>o.sendRequest(cs.WorkspaceSymbolRequest.type,{query:c},l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(d,l),d=>o.handleFailedRequest(cs.WorkspaceSymbolRequest.type,l,d,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let o=this._client,s=(c,l)=>o.sendRequest(cs.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),l).then(d=>l.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(d),d=>o.handleFailedRequest(cs.WorkspaceSymbolResolveRequest.type,l,d,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[QP.languages.registerWorkspaceSymbolProvider(t),t]}};Wa.WorkspaceSymbolFeature=Ch});var yy=b(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.ReferencesFeature=void 0;var ZP=require("vscode"),_h=H(),wh=he(),eq=ze(),bh=class extends wh.TextDocumentLanguageFeature{constructor(e){super(e,_h.ReferencesRequest.type)}fillClientCapabilities(e){(0,wh.ensure)((0,wh.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);!r||this.register({id:eq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,o,s,a)=>{let c=this._client,l=(g,f,p,m)=>c.sendRequest(_h.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(g,f,p),m).then(w=>m.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(w,m),w=>c.handleFailedRequest(_h.ReferencesRequest.type,m,w,null)),d=c.middleware;return d.provideReferences?d.provideReferences(i,o,s,a,l):l(i,o,s,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return ZP.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};za.ReferencesFeature=bh});var Cy=b(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.CodeActionFeature=void 0;var tq=require("vscode"),Zt=H(),nq=ze(),Dh=he(),Rh=class extends Dh.TextDocumentLanguageFeature{constructor(e){super(e,Zt.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Dh.ensure)((0,Dh.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[Zt.CodeActionKind.Empty,Zt.CodeActionKind.QuickFix,Zt.CodeActionKind.Refactor,Zt.CodeActionKind.RefactorExtract,Zt.CodeActionKind.RefactorInline,Zt.CodeActionKind.RefactorRewrite,Zt.CodeActionKind.Source,Zt.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);!r||this.register({id:nq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,o,s,a)=>{let c=this._client,l=async(g,f,p,m)=>{let w={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(f),context:await c.code2ProtocolConverter.asCodeActionContext(p,m)};return c.sendRequest(Zt.CodeActionRequest.type,w,m).then(D=>m.isCancellationRequested||D===null||D===void 0?null:c.protocol2CodeConverter.asCodeActionResult(D,m),D=>c.handleFailedRequest(Zt.CodeActionRequest.type,m,D,null))},d=c.middleware;return d.provideCodeActions?d.provideCodeActions(i,o,s,a,l):l(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=>{let s=this._client,a=this._client.middleware,c=async(l,d)=>s.sendRequest(Zt.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(l,d),d).then(g=>d.isCancellationRequested?l:s.protocol2CodeConverter.asCodeAction(g,d),g=>s.handleFailedRequest(Zt.CodeActionResolveRequest.type,d,g,l));return a.resolveCodeAction?a.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[tq.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Ka.CodeActionFeature=Rh});var wy=b(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.CodeLensFeature=void 0;var _y=require("vscode"),so=H(),rq=ze(),us=he(),Sh=class extends us.TextDocumentLanguageFeature{constructor(e){super(e,so.CodeLensRequest.type)}fillClientCapabilities(e){(0,us.ensure)((0,us.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,us.ensure)((0,us.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(so.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:rq.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new _y.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{let a=this._client,c=(d,g)=>a.sendRequest(so.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(d),g).then(f=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(f,g),f=>a.handleFailedRequest(so.CodeLensRequest.type,g,f,null)),l=a.middleware;return l.provideCodeLenses?l.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=>{let a=this._client,c=(d,g)=>a.sendRequest(so.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(d),g).then(f=>g.isCancellationRequested?d:a.protocol2CodeConverter.asCodeLens(f),f=>a.handleFailedRequest(so.CodeLensResolveRequest.type,g,f,d)),l=a.middleware;return l.resolveCodeLens?l.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[_y.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};Ua.CodeLensFeature=Sh});var by=b(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.DocumentOnTypeFormattingFeature=Nr.DocumentRangeFormattingFeature=Nr.DocumentFormattingFeature=void 0;var Ba=require("vscode"),fr=H(),xh=ze(),hr=he(),ls;(function(n){function e(t){let r=Ba.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(ls||(ls={}));var Th=class extends hr.TextDocumentLanguageFeature{constructor(e){super(e,fr.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,hr.ensure)((0,hr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);!r||this.register({id:xh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{let a=this._client,c=(d,g,f)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),options:a.code2ProtocolConverter.asFormattingOptions(g,ls.fromConfiguration(d))};return a.sendRequest(fr.DocumentFormattingRequest.type,p,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(m,f),m=>a.handleFailedRequest(fr.DocumentFormattingRequest.type,f,m,null))},l=a.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(i,o,s,c):c(i,o,s)}};return[Ba.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Nr.DocumentFormattingFeature=Th;var Ph=class extends hr.TextDocumentLanguageFeature{constructor(e){super(e,fr.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,hr.ensure)((0,hr.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!r||this.register({id:xh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{let c=this._client,l=(g,f,p,m)=>{let w={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(f),options:c.code2ProtocolConverter.asFormattingOptions(p,ls.fromConfiguration(g))};return c.sendRequest(fr.DocumentRangeFormattingRequest.type,w,m).then(D=>m.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(D,m),D=>c.handleFailedRequest(fr.DocumentRangeFormattingRequest.type,m,D,null))},d=c.middleware;return d.provideDocumentRangeFormattingEdits?d.provideDocumentRangeFormattingEdits(i,o,s,a,l):l(i,o,s,a)}};return[Ba.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Nr.DocumentRangeFormattingFeature=Ph;var qh=class extends hr.TextDocumentLanguageFeature{constructor(e){super(e,fr.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,hr.ensure)((0,hr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!r||this.register({id:xh.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,c,l)=>{let d=this._client,g=(p,m,w,D,P)=>{let C={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(p),position:d.code2ProtocolConverter.asPosition(m),ch:w,options:d.code2ProtocolConverter.asFormattingOptions(D,ls.fromConfiguration(p))};return d.sendRequest(fr.DocumentOnTypeFormattingRequest.type,C,P).then(y=>P.isCancellationRequested?null:d.protocol2CodeConverter.asTextEdits(y,P),y=>d.handleFailedRequest(fr.DocumentOnTypeFormattingRequest.type,P,y,null))},f=d.middleware;return f.provideOnTypeFormattingEdits?f.provideOnTypeFormattingEdits(o,s,a,c,l,g):g(o,s,a,c,l)}},i=e.moreTriggerCharacter||[];return[Ba.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};Nr.DocumentOnTypeFormattingFeature=qh});var Ry=b(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.RenameFeature=void 0;var iq=require("vscode"),pi=H(),oq=ze(),Dy=an(),kh=he(),Eh=class extends kh.TextDocumentLanguageFeature{constructor(e){super(e,pi.RenameRequest.type)}fillClientCapabilities(e){let t=(0,kh.ensure)((0,kh.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=pi.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);!r||(Dy.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:oq.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{let c=this._client,l=(g,f,p,m)=>{let w={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),position:c.code2ProtocolConverter.asPosition(f),newName:p};return c.sendRequest(pi.RenameRequest.type,w,m).then(D=>m.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(D,m),D=>c.handleFailedRequest(pi.RenameRequest.type,m,D,null,!1))},d=c.middleware;return d.provideRenameEdits?d.provideRenameEdits(i,o,s,a,l):l(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=>{let a=this._client,c=(d,g,f)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(pi.PrepareRenameRequest.type,p,f).then(m=>f.isCancellationRequested?null:pi.Range.is(m)?a.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&pi.Range.is(m.range)?{range:a.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},l=a.middleware;return l.prepareRename?l.prepareRename(i,o,s,c):c(i,o,s)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return iq.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Dy.boolean(t.defaultBehavior)}};Ga.RenameFeature=Eh});var Sy=b(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.DocumentLinkFeature=void 0;var sq=require("vscode"),ds=H(),Oh=he(),aq=ze(),Fh=class extends Oh.TextDocumentLanguageFeature{constructor(e){super(e,ds.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,Oh.ensure)((0,Oh.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);!r||this.register({id:aq.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,o)=>{let s=this._client,a=(l,d)=>s.sendRequest(ds.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(l),d).then(g=>d.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(g,d),g=>s.handleFailedRequest(ds.DocumentLinkRequest.type,d,g,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let s=this._client,a=(l,d)=>s.sendRequest(ds.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(l),d).then(g=>d.isCancellationRequested?l:s.protocol2CodeConverter.asDocumentLink(g),g=>s.handleFailedRequest(ds.DocumentLinkResolveRequest.type,d,g,l)),c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[sq.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Va.DocumentLinkFeature=Fh});var Py=b(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.ExecuteCommandFeature=void 0;var cq=require("vscode"),Nh=H(),uq=ze(),Ty=he(),Ih=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Nh.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,Ty.ensure)((0,Ty.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:uq.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(o,s)=>{let a={command:o,arguments:s};return t.sendRequest(Nh.ExecuteCommandRequest.type,a).then(void 0,c=>t.handleFailedRequest(Nh.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(cq.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};Xa.ExecuteCommandFeature=Ih});var qy=b(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.FileSystemWatcherFeature=void 0;var lq=require("vscode"),gi=H(),Ja=he(),Mh=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return gi.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,Ja.ensure)((0,Ja.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Ja.ensure)((0,Ja.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&gi.WatchKind.Create)!==0,s=(r.kind&gi.WatchKind.Change)!==0,a=(r.kind&gi.WatchKind.Delete)!==0);let c=lq.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(c,o,s,a,t),t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,o){t&&e.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:gi.FileChangeType.Created}),null,o),r&&e.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:gi.FileChangeType.Changed}),null,o),i&&e.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:gi.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};Qa.FileSystemWatcherFeature=Mh});var xy=b(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.ColorProviderFeature=void 0;var dq=require("vscode"),fs=H(),Lh=he(),jh=class extends Lh.TextDocumentLanguageFeature{constructor(e){super(e,fs.DocumentColorRequest.type)}fillClientCapabilities(e){(0,Lh.ensure)((0,Lh.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=>{let a=this._client,c=(d,g,f)=>{let p={color:d,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(fs.ColorPresentationRequest.type,p,f).then(m=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,f),m=>a.handleFailedRequest(fs.ColorPresentationRequest.type,f,m,null))},l=a.middleware;return l.provideColorPresentations?l.provideColorPresentations(i,o,s,c):c(i,o,s)},provideDocumentColors:(i,o)=>{let s=this._client,a=(l,d)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(l)};return s.sendRequest(fs.DocumentColorRequest.type,g,d).then(f=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(f,d),f=>s.handleFailedRequest(fs.DocumentColorRequest.type,d,f,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,a):a(i,o)}};return[dq.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Ya.ColorProviderFeature=jh});var ky=b(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.ImplementationFeature=void 0;var fq=require("vscode"),Ah=H(),Hh=he(),$h=class extends Hh.TextDocumentLanguageFeature{constructor(e){super(e,Ah.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,Hh.ensure)((0,Hh.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(Ah.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,f),p=>a.handleFailedRequest(Ah.ImplementationRequest.type,f,p,null)),l=a.middleware;return l.provideImplementation?l.provideImplementation(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return fq.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Za.ImplementationFeature=$h});var Ey=b(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.TypeDefinitionFeature=void 0;var hq=require("vscode"),Wh=H(),hs=he(),zh=class extends hs.TextDocumentLanguageFeature{constructor(e){super(e,Wh.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,hs.ensure)((0,hs.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,hs.ensure)((0,hs.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(Wh.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(p,f),p=>a.handleFailedRequest(Wh.TypeDefinitionRequest.type,f,p,null)),l=a.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return hq.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ec.TypeDefinitionFeature=zh});var Oy=b(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.WorkspaceFoldersFeature=ao.arrayDiff=void 0;var pq=ze(),tc=require("vscode"),ps=H();function Kh(n,e){if(n!=null)return n[e]}function Uh(n,e){return n.filter(t=>e.indexOf(t)<0)}ao.arrayDiff=Uh;var Bh=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ps.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=tc.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(ps.WorkspaceFoldersRequest.type,o=>{let s=()=>{let c=tc.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Kh(Kh(Kh(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=pq.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=Uh(this._initialFolders,e),i=Uh(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${ps.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(ps.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=tc.workspace.onDidChangeWorkspaceFolders(o=>{let s=l=>this.doSendEvent(l.added,l.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(l=>{this._client.error(`Sending notification ${ps.DidChangeWorkspaceFoldersNotification.type.method} failed`,l)})});this._listeners.set(t,i),this.sendInitialEvent(tc.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};ao.WorkspaceFoldersFeature=Bh});var Fy=b(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.FoldingRangeFeature=void 0;var gq=require("vscode"),co=H(),Gh=he(),Vh=class extends Gh.TextDocumentLanguageFeature{constructor(e){super(e,co.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Gh.ensure)((0,Gh.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[co.FoldingRangeKind.Comment,co.FoldingRangeKind.Imports,co.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1}}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=>{let a=this._client,c=(d,g,f)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d)};return a.sendRequest(co.FoldingRangeRequest.type,p,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(m,f),m=>a.handleFailedRequest(co.FoldingRangeRequest.type,f,m,null))},l=a.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(i,o,s,c):c(i,o,s)}};return[gq.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};nc.FoldingRangeFeature=Vh});var Ny=b(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.DeclarationFeature=void 0;var mq=require("vscode"),Xh=H(),Jh=he(),Qh=class extends Jh.TextDocumentLanguageFeature{constructor(e){super(e,Xh.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,Jh.ensure)((0,Jh.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(Xh.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(p,f),p=>a.handleFailedRequest(Xh.DeclarationRequest.type,f,p,null)),l=a.middleware;return l.provideDeclaration?l.provideDeclaration(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return mq.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};rc.DeclarationFeature=Qh});var Iy=b(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.SelectionRangeFeature=void 0;var vq=require("vscode"),Yh=H(),Zh=he(),ep=class extends Zh.TextDocumentLanguageFeature{constructor(e){super(e,Yh.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,Zh.ensure)((0,Zh.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=>{let a=this._client,c=async(d,g,f)=>{let p={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d),positions:await a.code2ProtocolConverter.asPositions(g,f)};return a.sendRequest(Yh.SelectionRangeRequest.type,p,f).then(m=>f.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(m,f),m=>a.handleFailedRequest(Yh.SelectionRangeRequest.type,f,m,null))},l=a.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return vq.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ic.SelectionRangeFeature=ep});var Ly=b(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.ProgressFeature=void 0;var My=H(),yq=Tf();function Cq(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var tp=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:My.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){Cq(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new yq.ProgressPart(this._client,i.token,t))};e.onRequest(My.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};oc.ProgressFeature=tp});var jy=b(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.CallHierarchyFeature=void 0;var _q=require("vscode"),mi=H(),np=he(),rp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,l)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(mi.CallHierarchyPrepareRequest.type,d,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(g,l),g=>i.handleFailedRequest(mi.CallHierarchyPrepareRequest.type,l,g,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(mi.CallHierarchyIncomingCallsRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(l,a),l=>r.handleFailedRequest(mi.CallHierarchyIncomingCallsRequest.type,a,l,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(mi.CallHierarchyOutgoingCallsRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(l,a),l=>r.handleFailedRequest(mi.CallHierarchyOutgoingCallsRequest.type,a,l,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},ip=class extends np.TextDocumentLanguageFeature{constructor(e){super(e,mi.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,np.ensure)((0,np.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new rp(t);return[_q.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};sc.CallHierarchyFeature=ip});var Ay=b(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.SemanticTokensFeature=void 0;var ac=require("vscode"),Q=H(),gs=he(),wq=an(),op=class extends gs.TextDocumentLanguageFeature{constructor(e){super(e,Q.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,gs.ensure)((0,gs.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Q.SemanticTokenTypes.namespace,Q.SemanticTokenTypes.type,Q.SemanticTokenTypes.class,Q.SemanticTokenTypes.enum,Q.SemanticTokenTypes.interface,Q.SemanticTokenTypes.struct,Q.SemanticTokenTypes.typeParameter,Q.SemanticTokenTypes.parameter,Q.SemanticTokenTypes.variable,Q.SemanticTokenTypes.property,Q.SemanticTokenTypes.enumMember,Q.SemanticTokenTypes.event,Q.SemanticTokenTypes.function,Q.SemanticTokenTypes.method,Q.SemanticTokenTypes.macro,Q.SemanticTokenTypes.keyword,Q.SemanticTokenTypes.modifier,Q.SemanticTokenTypes.comment,Q.SemanticTokenTypes.string,Q.SemanticTokenTypes.number,Q.SemanticTokenTypes.regexp,Q.SemanticTokenTypes.operator,Q.SemanticTokenTypes.decorator],t.tokenModifiers=[Q.SemanticTokenModifiers.declaration,Q.SemanticTokenModifiers.definition,Q.SemanticTokenModifiers.readonly,Q.SemanticTokenModifiers.static,Q.SemanticTokenModifiers.deprecated,Q.SemanticTokenModifiers.abstract,Q.SemanticTokenModifiers.async,Q.SemanticTokenModifiers.modification,Q.SemanticTokenModifiers.documentation,Q.SemanticTokenModifiers.defaultLibrary],t.formats=[Q.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,gs.ensure)((0,gs.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Q.SemanticTokensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=wq.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new ac.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(p,m)=>{let w=this._client,D=w.middleware,P=(C,y)=>{let S={textDocument:w.code2ProtocolConverter.asTextDocumentIdentifier(C)};return w.sendRequest(Q.SemanticTokensRequest.type,S,y).then(I=>y.isCancellationRequested?null:w.protocol2CodeConverter.asSemanticTokens(I,y),I=>w.handleFailedRequest(Q.SemanticTokensRequest.type,y,I,null))};return D.provideDocumentSemanticTokens?D.provideDocumentSemanticTokens(p,m,P):P(p,m)},provideDocumentSemanticTokensEdits:i?(p,m,w)=>{let D=this._client,P=D.middleware,C=(y,S,I)=>{let X={textDocument:D.code2ProtocolConverter.asTextDocumentIdentifier(y),previousResultId:S};return D.sendRequest(Q.SemanticTokensDeltaRequest.type,X,I).then(async $=>I.isCancellationRequested?null:Q.SemanticTokens.is($)?await D.protocol2CodeConverter.asSemanticTokens($,I):await D.protocol2CodeConverter.asSemanticTokensEdits($,I),$=>D.handleFailedRequest(Q.SemanticTokensDeltaRequest.type,I,$,null))};return P.provideDocumentSemanticTokensEdits?P.provideDocumentSemanticTokensEdits(p,m,w,C):C(p,m,w)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(p,m,w)=>{let D=this._client,P=D.middleware,C=(y,S,I)=>{let X={textDocument:D.code2ProtocolConverter.asTextDocumentIdentifier(y),range:D.code2ProtocolConverter.asRange(S)};return D.sendRequest(Q.SemanticTokensRangeRequest.type,X,I).then($=>I.isCancellationRequested?null:D.protocol2CodeConverter.asSemanticTokens($,I),$=>D.handleFailedRequest(Q.SemanticTokensRangeRequest.type,I,$,null))};return P.provideDocumentRangeSemanticTokens?P.provideDocumentRangeSemanticTokens(p,m,w,C):C(p,m,w)}}:void 0,l=[],d=this._client,g=d.protocol2CodeConverter.asSemanticTokensLegend(e.legend),f=d.protocol2CodeConverter.asDocumentSelector(t);return s!==void 0&&l.push(ac.languages.registerDocumentSemanticTokensProvider(f,s,g)),c!==void 0&&l.push(ac.languages.registerDocumentRangeSemanticTokensProvider(f,c,g)),[new ac.Disposable(()=>l.forEach(p=>p.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}};cc.SemanticTokensFeature=op});var Wy=b(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.WillDeleteFilesFeature=At.WillRenameFilesFeature=At.WillCreateFilesFeature=At.DidDeleteFilesFeature=At.DidRenameFilesFeature=At.DidCreateFilesFeature=void 0;var fn=require("vscode"),bq=Oa(),pr=H(),Dq=ze();function Hy(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function Rq(n,e){return n[e]}function $y(n,e,t){n[e]=t}var gr=class{constructor(e,t,r,i,o){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Hy(Hy(e,"workspace"),"fileOperations");$y(t,"dynamicRegistration",!0),$y(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?Rq(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:Dq.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new bq.Minimatch(r.pattern.glob,gr.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return gr.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=>{let s=t(o),a=s.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let l of c)if(!(l.scheme!==void 0&&l.scheme!==s.scheme)){if(l.matcher.match(a)){if(l.kind===void 0)return!0;let d=await this.getFileType(s);if(d===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(d===fn.FileType.File&&l.kind===pr.FileOperationPatternKind.file||d===fn.FileType.Directory&&l.kind===pr.FileOperationPatternKind.folder)return!0}else if(l.kind===pr.FileOperationPatternKind.folder&&await gr.getFileType(s)===fn.FileType.Directory&&l.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=>r[s]);return{...e,files:i}}static async getFileType(e){try{return(await fn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},uc=class extends gr{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},lc=class extends uc{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await gr.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},sp=class extends uc{constructor(e){super(e,fn.workspace.onDidCreateFiles,pr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};At.DidCreateFilesFeature=sp;var ap=class extends lc{constructor(e){super(e,fn.workspace.onDidRenameFiles,pr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=fn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};At.DidRenameFilesFeature=ap;var cp=class extends lc{constructor(e){super(e,fn.workspace.onDidDeleteFiles,pr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=fn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};At.DidDeleteFilesFeature=cp;var ms=class extends gr{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},up=class extends ms{constructor(e){super(e,fn.workspace.onWillCreateFiles,pr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};At.WillCreateFilesFeature=up;var lp=class extends ms{constructor(e){super(e,fn.workspace.onWillRenameFiles,pr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};At.WillRenameFilesFeature=lp;var dp=class extends ms{constructor(e){super(e,fn.workspace.onWillDeleteFiles,pr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};At.WillDeleteFilesFeature=dp});var zy=b(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.LinkedEditingFeature=void 0;var Sq=require("vscode"),fp=H(),hp=he(),pp=class extends hp.TextDocumentLanguageFeature{constructor(e){super(e,fp.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,hp.ensure)((0,hp.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{let a=this._client,c=(d,g,f)=>a.sendRequest(fp.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(d,g),f).then(p=>f.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(p,f),p=>a.handleFailedRequest(fp.LinkedEditingRangeRequest.type,f,p,null)),l=a.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(i,o,s,c):c(i,o,s)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return Sq.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};dc.LinkedEditingFeature=pp});var Ky=b(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.TypeHierarchyFeature=void 0;var Tq=require("vscode"),vi=H(),gp=he(),mp=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,c,l)=>{let d=i.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return i.sendRequest(vi.TypeHierarchyPrepareRequest.type,d,l).then(g=>l.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(g,l),g=>i.handleFailedRequest(vi.TypeHierarchyPrepareRequest.type,l,g,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(vi.TypeHierarchySupertypesRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(vi.TypeHierarchySupertypesRequest.type,a,l,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=>{let c={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(vi.TypeHierarchySubtypesRequest.type,c,a).then(l=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(l,a),l=>r.handleFailedRequest(vi.TypeHierarchySubtypesRequest.type,a,l,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},vp=class extends gp.TextDocumentLanguageFeature{constructor(e){super(e,vi.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,gp.ensure)((0,gp.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new mp(t);return[Tq.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};fc.TypeHierarchyFeature=vp});var By=b(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.InlineValueFeature=void 0;var Uy=require("vscode"),hc=H(),vs=he(),yp=class extends vs.TextDocumentLanguageFeature{constructor(e){super(e,hc.InlineValueRequest.type)}fillClientCapabilities(e){(0,vs.ensure)((0,vs.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,vs.ensure)((0,vs.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(hc.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Uy.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,c)=>{let l=this._client,d=(f,p,m,w)=>{let D={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(f),range:l.code2ProtocolConverter.asRange(p),context:l.code2ProtocolConverter.asInlineValueContext(m)};return l.sendRequest(hc.InlineValueRequest.type,D,w).then(P=>w.isCancellationRequested?null:l.protocol2CodeConverter.asInlineValues(P,w),P=>l.handleFailedRequest(hc.InlineValueRequest.type,w,P,null))},g=l.middleware;return g.provideInlineValues?g.provideInlineValues(o,s,a,c,d):d(o,s,a,c)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return Uy.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};pc.InlineValueFeature=yp});var Vy=b(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.InlayHintsFeature=void 0;var Gy=require("vscode"),uo=H(),ys=he(),Cp=class extends ys.TextDocumentLanguageFeature{constructor(e){super(e,uo.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,ys.ensure)((0,ys.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,ys.ensure)((0,ys.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(uo.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Gy.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{let c=this._client,l=async(g,f,p)=>{let m={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(g),range:c.code2ProtocolConverter.asRange(f)};try{let w=await c.sendRequest(uo.InlayHintRequest.type,m,p);return p.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(w,p)}catch(w){return c.handleFailedRequest(uo.InlayHintRequest.type,p,w,null)}},d=c.middleware;return d.provideInlayHints?d.provideInlayHints(o,s,a,l):l(o,s,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,s)=>{let a=this._client,c=async(d,g)=>{try{let f=await a.sendRequest(uo.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(d),g);if(g.isCancellationRequested)return null;let p=a.protocol2CodeConverter.asInlayHint(f,g);return g.isCancellationRequested?null:p}catch(f){return a.handleFailedRequest(uo.InlayHintResolveRequest.type,g,f,null)}},l=a.middleware;return l.resolveInlayHint?l.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return Gy.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};gc.InlayHintsFeature=Cp});var Dp=b(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.ProposedFeatures=Me.BaseLanguageClient=Me.MessageTransports=Me.SuspendMode=Me.State=Me.CloseAction=Me.ErrorAction=Me.RevealOutputChannelOn=void 0;var De=require("vscode"),O=H(),Pq=qv(),qq=Ev(),Qn=an(),mc=Sa(),Xy=ze(),xq=Tf(),On=he(),kq=Bf(),Jy=sy(),Qy=cy(),lo=uy(),Eq=ly(),Oq=dy(),Fq=fy(),Nq=py(),Iq=gy(),Mq=vh(),Lq=vy(),jq=yy(),Aq=Cy(),Hq=wy(),_p=by(),$q=Ry(),Wq=Sy(),zq=Py(),Kq=qy(),Uq=xy(),Bq=ky(),Gq=Ey(),Vq=Oy(),Xq=Fy(),Jq=Ny(),Qq=Iy(),Yq=Ly(),Zq=jy(),ex=Ay(),fo=Wy(),tx=zy(),nx=Ky(),rx=By(),ix=Vy(),Cs;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(Cs=Me.RevealOutputChannelOn||(Me.RevealOutputChannelOn={}));var yc;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(yc=Me.ErrorAction||(Me.ErrorAction={}));var yi;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(yi=Me.CloseAction||(Me.CloseAction={}));var vc;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(vc=Me.State||(Me.State={}));var ox;(function(n){n.off="off",n.on="on"})(ox=Me.SuspendMode||(Me.SuspendMode={}));var wp=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:yc.Continue}:{action:yc.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:yi.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:yi.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:yi.Restart})}},se;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(se||(se={}));var sx;(function(n){function e(t){return t&&O.MessageReader.is(t.reader)&&O.MessageWriter.is(t.writer)}n.is=e})(sx=Me.MessageTransports||(Me.MessageTransports={}));var mr=class{constructor(e,t,r){this._traceFormat=O.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new mc.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Cs.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=se.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new mc.Semaphore(1),this._pendingChangeDelayer=new mc.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new mc.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new O.Emitter,this._stateChangeEmitter=new O.Emitter,this._trace=O.Trace.Off,this._tracer={log:(o,s)=>{Qn.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=Pq.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=qq.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=De.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case se.Starting:return vc.Starting;case se.Running:return vc.Running;default:return vc.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===se.StartFailed||this.$state===se.Stopping||this.$state===se.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();return this._didChangeTextDocumentFeature.syncKind===O.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r),r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),o={dispose:()=>{let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),o={dispose:()=>{this._pendingRequestHandlers.delete(r);let s=this._requestDisposables.get(r);s!==void 0&&(s.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),o.dispose()}}}async sendNotification(e,t){if(this.$state===se.StartFailed||this.$state===se.Stopping||this.$state===se.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===O.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===O.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();return r&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i),o.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),o={dispose:()=>{let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),o={dispose:()=>{this._pendingNotificationHandlers.delete(r);let s=this._notificationDisposables.get(r);s!==void 0&&(s.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),o.dispose()}}}async sendProgress(e,t,r){if(this.$state===se.StartFailed||this.$state===se.Stopping||this.$state===se.Stopped)return Promise.reject(new O.ResponseError(O.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),o,s=this._clientOptions.middleware?.handleWorkDoneProgress,a=O.WorkDoneProgress.is(e)&&s!==void 0?c=>{s(t,c,()=>r(c))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),o={dispose:()=>{let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),o={dispose:()=>{this._pendingProgressHandlers.delete(t);let c=this._progressDisposables.get(t);c!==void 0&&(c.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new wp(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof O.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?Qn.string(e.stack)?e.stack:e.message:Qn.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Cs.Info&&this.showNotificationMessage(O.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=Cs.Warn&&this.showNotificationMessage(O.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),(r==="force"||r&&this._clientOptions.revealOutputChannelOn<=Cs.Error)&&this.showNotificationMessage(O.MessageType.Error,e)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===O.MessageType.Error?De.window.showErrorMessage:e===O.MessageType.Warning?De.window.showWarningMessage:De.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===se.Initial||this.$state===se.Stopping||this.$state===se.Stopped}needsStop(){return this.$state===se.Starting||this.$state===se.Running}activeConnection(){return this.$state===se.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===se.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===se.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?De.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):De.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=se.Starting;try{let i=await this.createConnection();i.onNotification(O.LogMessageNotification.type,o=>{switch(o.type){case O.MessageType.Error:this.error(o.message,void 0,!1);break;case O.MessageType.Warning:this.warn(o.message,void 0,!1);break;case O.MessageType.Info:this.info(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification(O.ShowMessageNotification.type,o=>{switch(o.type){case O.MessageType.Error:De.window.showErrorMessage(o.message);break;case O.MessageType.Warning:De.window.showWarningMessage(o.message);break;case O.MessageType.Info:De.window.showInformationMessage(o.message);break;default:De.window.showInformationMessage(o.message)}}),i.onRequest(O.ShowMessageRequest.type,o=>{let s;switch(o.type){case O.MessageType.Error:s=De.window.showErrorMessage;break;case O.MessageType.Warning:s=De.window.showWarningMessage;break;case O.MessageType.Info:s=De.window.showInformationMessage;break;default:s=De.window.showInformationMessage}let a=o.actions||[];return s(o.message,...a)}),i.onNotification(O.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest(O.ShowDocumentRequest.type,async o=>{let s=async c=>{let l=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await De.env.openExternal(l)};{let d={};return c.selection!==void 0&&(d.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?d.preserveFocus=!0:c.takeFocus===!0&&(d.preserveFocus=!1),await De.window.showTextDocument(l,d),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(o,s):s(o)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=se.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,o)=>{e=i,t=o}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:De.env.appName,version:De.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(De.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:Qn.func(t)?t():t,trace:O.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Xy.generateUuid(),a=new xq.ProgressPart(e,s);o.workDoneToken=s;try{let c=await this.doInitialize(e,o);return a.done(),c}catch(c){throw a.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==O.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=se.Running;let i;Qn.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===O.TextDocumentSyncKind.None?i={openClose:!1,change:O.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(O.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(O.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(O.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(O.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,s]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,s));this._pendingNotificationHandlers.clear();for(let[o,s]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,s));this._pendingRequestHandlers.clear();for(let[o,s]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(s.type,o,s.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(O.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof O.ResponseError&&r.data&&r.data.retry?De.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&De.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=De.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===se.Stopped||this.$state===se.Initial)return;if(this.$state===se.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==se.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=se.Stopping,this.cleanUp(e);let i=new Promise(s=>{(0,O.RAL)().timer.setTimeout(s,t)}),o=(async s=>(await s.shutdown(),await s.exit(),s))(r);return this._onStop=Promise.race([i,o]).then(s=>{if(s!==void 0)s.end(),s.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},s=>{throw this.error("Stopping server failed",s,!1),s}).finally(()=>{this.$state=se.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.dispose();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(O.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=>{t.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(O.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,O.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,O.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new De.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(o=>{if(!i.token.isCancellationRequested){let s=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(s,o,(c,l)=>this.setDiagnostics(c,l)):this.setDiagnostics(s,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}getLocale(){return De.env.language}async $start(){if(this.$state===se.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,s)=>{this.handleConnectionError(i,o,s).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=ax(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===se.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:yi.DoNotRestart};if(this.$state!==se.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===yi.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===se.Starting?this.$state=se.StartFailed:this.$state=se.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===yi.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=se.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===yc.Shutdown&&(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)}))}hookConfigurationChanged(e){this._listeners.push(De.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=De.workspace.getConfiguration(this._id),i=O.Trace.Off,o=O.TraceFormat.Text;if(r){let s=r.get("trace.server","off");typeof s=="string"?i=O.Trace.fromString(s):(i=O.Trace.fromString(r.get("trace.server.verbosity","off")),o=O.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(s=>{this.error("Updating trace failed with error",s,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;Qn.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(O.DidChangeWatchedFilesNotification.type.method).registerRaw(Xy.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),On.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(O.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof Jy.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new Qy.ConfigurationFeature(this)),this.registerFeature(new lo.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new lo.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new lo.WillSaveFeature(this)),this.registerFeature(new lo.WillSaveWaitUntilFeature(this)),this.registerFeature(new lo.DidSaveTextDocumentFeature(this)),this.registerFeature(new lo.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new Kq.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new Eq.CompletionItemFeature(this)),this.registerFeature(new Oq.HoverFeature(this)),this.registerFeature(new Nq.SignatureHelpFeature(this)),this.registerFeature(new Fq.DefinitionFeature(this)),this.registerFeature(new jq.ReferencesFeature(this)),this.registerFeature(new Iq.DocumentHighlightFeature(this)),this.registerFeature(new Mq.DocumentSymbolFeature(this)),this.registerFeature(new Lq.WorkspaceSymbolFeature(this)),this.registerFeature(new Aq.CodeActionFeature(this)),this.registerFeature(new Hq.CodeLensFeature(this)),this.registerFeature(new _p.DocumentFormattingFeature(this)),this.registerFeature(new _p.DocumentRangeFormattingFeature(this)),this.registerFeature(new _p.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new $q.RenameFeature(this)),this.registerFeature(new Wq.DocumentLinkFeature(this)),this.registerFeature(new zq.ExecuteCommandFeature(this)),this.registerFeature(new Qy.SyncConfigurationFeature(this)),this.registerFeature(new Gq.TypeDefinitionFeature(this)),this.registerFeature(new Bq.ImplementationFeature(this)),this.registerFeature(new Uq.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new Vq.WorkspaceFoldersFeature(this)),this.registerFeature(new Xq.FoldingRangeFeature(this)),this.registerFeature(new Jq.DeclarationFeature(this)),this.registerFeature(new Qq.SelectionRangeFeature(this)),this.registerFeature(new Yq.ProgressFeature(this)),this.registerFeature(new Zq.CallHierarchyFeature(this)),this.registerFeature(new ex.SemanticTokensFeature(this)),this.registerFeature(new tx.LinkedEditingFeature(this)),this.registerFeature(new fo.DidCreateFilesFeature(this)),this.registerFeature(new fo.DidRenameFilesFeature(this)),this.registerFeature(new fo.DidDeleteFilesFeature(this)),this.registerFeature(new fo.WillCreateFilesFeature(this)),this.registerFeature(new fo.WillRenameFilesFeature(this)),this.registerFeature(new fo.WillDeleteFilesFeature(this)),this.registerFeature(new nx.TypeHierarchyFeature(this)),this.registerFeature(new rx.InlineValueFeature(this)),this.registerFeature(new ix.InlayHintsFeature(this)),this.registerFeature(new kq.DiagnosticFeature(this)),this.registerFeature(new Jy.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Yy.createAll(this))}fillInitializeParams(e){for(let t of this._features)Qn.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,On.ensure)(e,"workspace").applyEdit=!0;let t=(0,On.ensure)((0,On.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[O.ResourceOperationKind.Create,O.ResourceOperationKind.Rename,O.ResourceOperationKind.Delete],t.failureHandling=O.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,On.ensure)((0,On.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[O.DiagnosticTag.Unnecessary,O.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,On.ensure)(e,"window"),o=(0,On.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let s=(0,On.ensure)(i,"showDocument");s.support=!0;let a=(0,On.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(mr.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)Qn.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:t.id,registerOptions:i};try{r.register(o)}catch(s){return Promise.reject(s)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;De.workspace.textDocuments.forEach(s=>i.set(s.uri.toString(),s));let o=!1;if(t.documentChanges){for(let s of t.documentChanges)if(O.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=this._p2c.asUri(s.textDocument.uri).toString(),c=i.get(a);if(c&&c.version!==s.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):Qn.asPromise(De.workspace.applyEdit(r).then(s=>({applied:s})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof O.ResponseError){if(r.code===O.ErrorCodes.PendingResponseRejected||r.code===O.ErrorCodes.ConnectionInactive)return i;if(r.code===O.LSPErrorCodes.RequestCancelled||r.code===O.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new On.LSPCancellationError(r.data):new De.CancellationError}else if(r.code===O.LSPErrorCodes.ContentModified){if(mr.RequestsToCancelOnContentModified.has(e.method)||mr.CancellableResolveCalls.has(e.method))throw new De.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};Me.BaseLanguageClient=mr;mr.RequestsToCancelOnContentModified=new Set([O.SemanticTokensRequest.method,O.SemanticTokensRangeRequest.method,O.SemanticTokensDeltaRequest.method]);mr.CancellableResolveCalls=new Set([O.CompletionResolveRequest.method,O.CodeLensResolveRequest.method,O.CodeActionResolveRequest.method,O.InlayHintResolveRequest.method,O.DocumentLinkResolveRequest.method,O.WorkspaceSymbolResolveRequest.method]);var bp=class{error(e){(0,O.RAL)().console.error(e)}warn(e){(0,O.RAL)().console.warn(e)}info(e){(0,O.RAL)().console.info(e)}log(e){(0,O.RAL)().console.log(e)}};function ax(n,e,t,r,i){let o=new bp,s=(0,O.createProtocolConnection)(n,e,o,i);return s.onError(c=>{t(c[0],c[1],c[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:s.sendRequest,onRequest:s.onRequest,hasPendingResponse:s.hasPendingResponse,sendNotification:s.sendNotification,onNotification:s.onNotification,onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(c,l,d)=>{let g={sendNotification:!1,traceFormat:O.TraceFormat.Text};return d===void 0?s.trace(c,l,g):(Qn.boolean(d),s.trace(c,l,d))},initialize:c=>s.sendRequest(O.InitializeRequest.type,c),shutdown:()=>s.sendRequest(O.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(O.ExitNotification.type),end:()=>s.end(),dispose:()=>s.dispose()}}var Yy;(function(n){function e(t){return[]}n.createAll=e})(Yy=Me.ProposedFeatures||(Me.ProposedFeatures={}))});var eC=b(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.terminate=void 0;var Zy=require("child_process"),cx=require("path"),ux=process.platform==="win32",lx=process.platform==="darwin",dx=process.platform==="linux";function fx(n,e){if(ux)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Zy.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(dx||lx)try{var t=(0,cx.join)(__dirname,"terminateProcess.sh"),r=Zy.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}Cc.terminate=fx});var _s=b((RM,tC)=>{"use strict";tC.exports=H()});var ws=b((SM,nC)=>{var hx="2.0.0",px=Number.MAX_SAFE_INTEGER||9007199254740991,gx=16;nC.exports={SEMVER_SPEC_VERSION:hx,MAX_LENGTH:256,MAX_SAFE_INTEGER:px,MAX_SAFE_COMPONENT_LENGTH:gx}});var bs=b((TM,rC)=>{var mx=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};rC.exports=mx});var Ci=b((Ir,iC)=>{var{MAX_SAFE_COMPONENT_LENGTH:Rp}=ws(),vx=bs();Ir=iC.exports={};var yx=Ir.re=[],W=Ir.src=[],z=Ir.t={},Cx=0,ne=(n,e,t)=>{let r=Cx++;vx(n,r,e),z[n]=r,W[r]=e,yx[r]=new RegExp(e,t?"g":void 0)};ne("NUMERICIDENTIFIER","0|[1-9]\\d*");ne("NUMERICIDENTIFIERLOOSE","[0-9]+");ne("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ne("MAINVERSION",`(${W[z.NUMERICIDENTIFIER]})\\.(${W[z.NUMERICIDENTIFIER]})\\.(${W[z.NUMERICIDENTIFIER]})`);ne("MAINVERSIONLOOSE",`(${W[z.NUMERICIDENTIFIERLOOSE]})\\.(${W[z.NUMERICIDENTIFIERLOOSE]})\\.(${W[z.NUMERICIDENTIFIERLOOSE]})`);ne("PRERELEASEIDENTIFIER",`(?:${W[z.NUMERICIDENTIFIER]}|${W[z.NONNUMERICIDENTIFIER]})`);ne("PRERELEASEIDENTIFIERLOOSE",`(?:${W[z.NUMERICIDENTIFIERLOOSE]}|${W[z.NONNUMERICIDENTIFIER]})`);ne("PRERELEASE",`(?:-(${W[z.PRERELEASEIDENTIFIER]}(?:\\.${W[z.PRERELEASEIDENTIFIER]})*))`);ne("PRERELEASELOOSE",`(?:-?(${W[z.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${W[z.PRERELEASEIDENTIFIERLOOSE]})*))`);ne("BUILDIDENTIFIER","[0-9A-Za-z-]+");ne("BUILD",`(?:\\+(${W[z.BUILDIDENTIFIER]}(?:\\.${W[z.BUILDIDENTIFIER]})*))`);ne("FULLPLAIN",`v?${W[z.MAINVERSION]}${W[z.PRERELEASE]}?${W[z.BUILD]}?`);ne("FULL",`^${W[z.FULLPLAIN]}$`);ne("LOOSEPLAIN",`[v=\\s]*${W[z.MAINVERSIONLOOSE]}${W[z.PRERELEASELOOSE]}?${W[z.BUILD]}?`);ne("LOOSE",`^${W[z.LOOSEPLAIN]}$`);ne("GTLT","((?:<|>)?=?)");ne("XRANGEIDENTIFIERLOOSE",`${W[z.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ne("XRANGEIDENTIFIER",`${W[z.NUMERICIDENTIFIER]}|x|X|\\*`);ne("XRANGEPLAIN",`[v=\\s]*(${W[z.XRANGEIDENTIFIER]})(?:\\.(${W[z.XRANGEIDENTIFIER]})(?:\\.(${W[z.XRANGEIDENTIFIER]})(?:${W[z.PRERELEASE]})?${W[z.BUILD]}?)?)?`);ne("XRANGEPLAINLOOSE",`[v=\\s]*(${W[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${W[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${W[z.XRANGEIDENTIFIERLOOSE]})(?:${W[z.PRERELEASELOOSE]})?${W[z.BUILD]}?)?)?`);ne("XRANGE",`^${W[z.GTLT]}\\s*${W[z.XRANGEPLAIN]}$`);ne("XRANGELOOSE",`^${W[z.GTLT]}\\s*${W[z.XRANGEPLAINLOOSE]}$`);ne("COERCE",`(^|[^\\d])(\\d{1,${Rp}})(?:\\.(\\d{1,${Rp}}))?(?:\\.(\\d{1,${Rp}}))?(?:$|[^\\d])`);ne("COERCERTL",W[z.COERCE],!0);ne("LONETILDE","(?:~>?)");ne("TILDETRIM",`(\\s*)${W[z.LONETILDE]}\\s+`,!0);Ir.tildeTrimReplace="$1~";ne("TILDE",`^${W[z.LONETILDE]}${W[z.XRANGEPLAIN]}$`);ne("TILDELOOSE",`^${W[z.LONETILDE]}${W[z.XRANGEPLAINLOOSE]}$`);ne("LONECARET","(?:\\^)");ne("CARETTRIM",`(\\s*)${W[z.LONECARET]}\\s+`,!0);Ir.caretTrimReplace="$1^";ne("CARET",`^${W[z.LONECARET]}${W[z.XRANGEPLAIN]}$`);ne("CARETLOOSE",`^${W[z.LONECARET]}${W[z.XRANGEPLAINLOOSE]}$`);ne("COMPARATORLOOSE",`^${W[z.GTLT]}\\s*(${W[z.LOOSEPLAIN]})$|^$`);ne("COMPARATOR",`^${W[z.GTLT]}\\s*(${W[z.FULLPLAIN]})$|^$`);ne("COMPARATORTRIM",`(\\s*)${W[z.GTLT]}\\s*(${W[z.LOOSEPLAIN]}|${W[z.XRANGEPLAIN]})`,!0);Ir.comparatorTrimReplace="$1$2$3";ne("HYPHENRANGE",`^\\s*(${W[z.XRANGEPLAIN]})\\s+-\\s+(${W[z.XRANGEPLAIN]})\\s*$`);ne("HYPHENRANGELOOSE",`^\\s*(${W[z.XRANGEPLAINLOOSE]})\\s+-\\s+(${W[z.XRANGEPLAINLOOSE]})\\s*$`);ne("STAR","(<|>)?=?\\s*\\*");ne("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ne("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ds=b((PM,oC)=>{var _x=["includePrerelease","loose","rtl"],wx=n=>n?typeof n!="object"?{loose:!0}:_x.filter(e=>n[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};oC.exports=wx});var Sp=b((qM,cC)=>{var sC=/^[0-9]+$/,aC=(n,e)=>{let t=sC.test(n),r=sC.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},bx=(n,e)=>aC(e,n);cC.exports={compareIdentifiers:aC,rcompareIdentifiers:bx}});var Dt=b((xM,fC)=>{var _c=bs(),{MAX_LENGTH:uC,MAX_SAFE_INTEGER:wc}=ws(),{re:lC,t:dC}=Ci(),Dx=Ds(),{compareIdentifiers:ho}=Sp(),en=class{constructor(e,t){if(t=Dx(t),e instanceof en){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>uC)throw new TypeError(`version is longer than ${uC} characters`);_c("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?lC[dC.LOOSE]:lC[dC.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>wc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<wc)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_c("SemVer.compare",this.version,this.options,e),!(e instanceof en)){if(typeof e=="string"&&e===this.version)return 0;e=new en(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof en||(e=new en(e,this.options)),ho(this.major,e.major)||ho(this.minor,e.minor)||ho(this.patch,e.patch)}comparePre(e){if(e instanceof en||(e=new en(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(_c("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ho(r,i)}while(++t)}compareBuild(e){e instanceof en||(e=new en(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(_c("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ho(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(ho(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};fC.exports=en});var Mr=b((kM,mC)=>{var{MAX_LENGTH:Rx}=ws(),{re:hC,t:pC}=Ci(),gC=Dt(),Sx=Ds(),Tx=(n,e)=>{if(e=Sx(e),n instanceof gC)return n;if(typeof n!="string"||n.length>Rx||!(e.loose?hC[pC.LOOSE]:hC[pC.FULL]).test(n))return null;try{return new gC(n,e)}catch{return null}};mC.exports=Tx});var yC=b((EM,vC)=>{"use strict";vC.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var _C=b((OM,CC)=>{"use strict";CC.exports=me;me.Node=_i;me.create=me;function me(n){var e=this;if(e instanceof me||(e=new me),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}me.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,t=n.prev;return e&&(e.prev=t),t&&(t.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};me.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};me.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};me.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)qx(this,arguments[n]);return this.length};me.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)xx(this,arguments[n]);return this.length};me.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};me.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};me.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};me.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};me.prototype.get=function(n){for(var e=0,t=this.head;t!==null&&e<n;e++)t=t.next;if(e===n&&t!==null)return t.value};me.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&&e<n;e++)t=t.prev;if(e===n&&t!==null)return t.value};me.prototype.map=function(n,e){e=e||this;for(var t=new me,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};me.prototype.mapReverse=function(n,e){e=e||this;for(var t=new me,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};me.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};me.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};me.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};me.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};me.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new me;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)t.push(i.value);return t};me.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new me;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>n;r--,i=i.prev)t.push(i.value);return t};me.prototype.splice=function(n,e,...t){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(var o=[],r=0;i&&r<e;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<t.length;r++)i=Px(this,i,t[r]);return o};me.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function Px(n,e,t){var r=e===n.head?new _i(t,null,e,n):new _i(t,e,e.next,n);return r.next===null&&(n.tail=r),r.prev===null&&(n.head=r),n.length++,r}function qx(n,e){n.tail=new _i(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function xx(n,e){n.head=new _i(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function _i(n,e,t,r){if(!(this instanceof _i))return new _i(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{yC()(me)}catch{}});var SC=b((FM,RC)=>{"use strict";var kx=_C(),wi=Symbol("max"),yr=Symbol("length"),po=Symbol("lengthCalculator"),Ss=Symbol("allowStale"),bi=Symbol("maxAge"),vr=Symbol("dispose"),wC=Symbol("noDisposeOnSet"),ut=Symbol("lruList"),Fn=Symbol("cache"),DC=Symbol("updateAgeOnGet"),Tp=()=>1,qp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[wi]=e.max||1/0,r=e.length||Tp;if(this[po]=typeof r!="function"?Tp:r,this[Ss]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[bi]=e.maxAge||0,this[vr]=e.dispose,this[wC]=e.noDisposeOnSet||!1,this[DC]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[wi]=e||1/0,Rs(this)}get max(){return this[wi]}set allowStale(e){this[Ss]=!!e}get allowStale(){return this[Ss]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[bi]=e,Rs(this)}get maxAge(){return this[bi]}set lengthCalculator(e){typeof e!="function"&&(e=Tp),e!==this[po]&&(this[po]=e,this[yr]=0,this[ut].forEach(t=>{t.length=this[po](t.value,t.key),this[yr]+=t.length})),Rs(this)}get lengthCalculator(){return this[po]}get length(){return this[yr]}get itemCount(){return this[ut].length}rforEach(e,t){t=t||this;for(let r=this[ut].tail;r!==null;){let i=r.prev;bC(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[ut].head;r!==null;){let i=r.next;bC(this,e,r,t),r=i}}keys(){return this[ut].toArray().map(e=>e.key)}values(){return this[ut].toArray().map(e=>e.value)}reset(){this[vr]&&this[ut]&&this[ut].length&&this[ut].forEach(e=>this[vr](e.key,e.value)),this[Fn]=new Map,this[ut]=new kx,this[yr]=0}dump(){return this[ut].map(e=>bc(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[ut]}set(e,t,r){if(r=r||this[bi],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,o=this[po](t,e);if(this[Fn].has(e)){if(o>this[wi])return go(this,this[Fn].get(e)),!1;let c=this[Fn].get(e).value;return this[vr]&&(this[wC]||this[vr](e,c.value)),c.now=i,c.maxAge=r,c.value=t,this[yr]+=o-c.length,c.length=o,this.get(e),Rs(this),!0}let s=new xp(e,t,o,i,r);return s.length>this[wi]?(this[vr]&&this[vr](e,t),!1):(this[yr]+=s.length,this[ut].unshift(s),this[Fn].set(e,this[ut].head),Rs(this),!0)}has(e){if(!this[Fn].has(e))return!1;let t=this[Fn].get(e).value;return!bc(this,t)}get(e){return Pp(this,e,!0)}peek(e){return Pp(this,e,!1)}pop(){let e=this[ut].tail;return e?(go(this,e),e.value):null}del(e){go(this,this[Fn].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-t;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Fn].forEach((e,t)=>Pp(this,t,!1))}},Pp=(n,e,t)=>{let r=n[Fn].get(e);if(r){let i=r.value;if(bc(n,i)){if(go(n,r),!n[Ss])return}else t&&(n[DC]&&(r.value.now=Date.now()),n[ut].unshiftNode(r));return i.value}},bc=(n,e)=>{if(!e||!e.maxAge&&!n[bi])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:n[bi]&&t>n[bi]},Rs=n=>{if(n[yr]>n[wi])for(let e=n[ut].tail;n[yr]>n[wi]&&e!==null;){let t=e.prev;go(n,e),e=t}},go=(n,e)=>{if(e){let t=e.value;n[vr]&&n[vr](t.key,t.value),n[yr]-=t.length,n[Fn].delete(t.key),n[ut].removeNode(e)}},xp=class{constructor(e,t,r,i,o){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=o||0}},bC=(n,e,t,r)=>{let i=t.value;bc(n,i)&&(go(n,t),n[Ss]||(i=void 0)),i&&e.call(r,i.value,i.key,n)};RC.exports=qp});var hn=b((NM,PC)=>{var TC=Dt(),Ex=(n,e,t)=>new TC(n,t).compare(new TC(e,t));PC.exports=Ex});var Dc=b((IM,qC)=>{var Ox=hn(),Fx=(n,e,t)=>Ox(n,e,t)===0;qC.exports=Fx});var kp=b((MM,xC)=>{var Nx=hn(),Ix=(n,e,t)=>Nx(n,e,t)!==0;xC.exports=Ix});var Ts=b((LM,kC)=>{var Mx=hn(),Lx=(n,e,t)=>Mx(n,e,t)>0;kC.exports=Lx});var Rc=b((jM,EC)=>{var jx=hn(),Ax=(n,e,t)=>jx(n,e,t)>=0;EC.exports=Ax});var Sc=b((AM,OC)=>{var Hx=hn(),$x=(n,e,t)=>Hx(n,e,t)<0;OC.exports=$x});var Tc=b((HM,FC)=>{var Wx=hn(),zx=(n,e,t)=>Wx(n,e,t)<=0;FC.exports=zx});var Ep=b(($M,NC)=>{var Kx=Dc(),Ux=kp(),Bx=Ts(),Gx=Rc(),Vx=Sc(),Xx=Tc(),Jx=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Kx(n,t,r);case"!=":return Ux(n,t,r);case">":return Bx(n,t,r);case">=":return Gx(n,t,r);case"<":return Vx(n,t,r);case"<=":return Xx(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};NC.exports=Jx});var qs=b((WM,AC)=>{var Ps=Symbol("SemVer ANY"),mo=class{static get ANY(){return Ps}constructor(e,t){if(t=Qx(t),e instanceof mo){if(e.loose===!!t.loose)return e;e=e.value}Fp("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ps?this.value="":this.value=this.operator+this.semver.version,Fp("comp",this)}parse(e){let t=this.options.loose?IC[MC.COMPARATORLOOSE]:IC[MC.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new LC(r[2],this.options.loose):this.semver=Ps}toString(){return this.value}test(e){if(Fp("Comparator.test",e,this.options.loose),this.semver===Ps||e===Ps)return!0;if(typeof e=="string")try{e=new LC(e,this.options)}catch{return!1}return Op(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof mo))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new jC(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new jC(this.value,t).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=Op(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=Op(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||o&&s||a||c}};AC.exports=mo;var Qx=Ds(),{re:IC,t:MC}=Ci(),Op=Ep(),Fp=bs(),LC=Dt(),jC=pn()});var pn=b((zM,zC)=>{var Di=class{constructor(e,t){if(t=Zx(t),e instanceof Di)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Di(e.raw,t);if(e instanceof Np)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!$C(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&ik(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=HC.get(r);if(i)return i;let o=this.options.loose,s=o?Ht[kt.HYPHENRANGELOOSE]:Ht[kt.HYPHENRANGE];e=e.replace(s,pk(this.options.includePrerelease)),Ue("hyphen replace",e),e=e.replace(Ht[kt.COMPARATORTRIM],tk),Ue("comparator trim",e),e=e.replace(Ht[kt.TILDETRIM],nk),e=e.replace(Ht[kt.CARETTRIM],rk),e=e.split(/\s+/).join(" ");let a=e.split(" ").map(g=>ok(g,this.options)).join(" ").split(/\s+/).map(g=>hk(g,this.options));o&&(a=a.filter(g=>(Ue("loose invalid filter",g,this.options),!!g.match(Ht[kt.COMPARATORLOOSE])))),Ue("range list",a);let c=new Map,l=a.map(g=>new Np(g,this.options));for(let g of l){if($C(g))return[g];c.set(g.value,g)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return HC.set(r,d),d}intersects(e,t){if(!(e instanceof Di))throw new TypeError("a Range is required");return this.set.some(r=>WC(r,t)&&e.set.some(i=>WC(i,t)&&r.every(o=>i.every(s=>o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ek(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(gk(this.set[t],e,this.options))return!0;return!1}};zC.exports=Di;var Yx=SC(),HC=new Yx({max:1e3}),Zx=Ds(),Np=qs(),Ue=bs(),ek=Dt(),{re:Ht,t:kt,comparatorTrimReplace:tk,tildeTrimReplace:nk,caretTrimReplace:rk}=Ci(),$C=n=>n.value==="<0.0.0-0",ik=n=>n.value==="",WC=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(o=>i.intersects(o,e)),i=r.pop();return t},ok=(n,e)=>(Ue("comp",n,e),n=ck(n,e),Ue("caret",n),n=sk(n,e),Ue("tildes",n),n=lk(n,e),Ue("xrange",n),n=fk(n,e),Ue("stars",n),n),Et=n=>!n||n.toLowerCase()==="x"||n==="*",sk=(n,e)=>n.trim().split(/\s+/).map(t=>ak(t,e)).join(" "),ak=(n,e)=>{let t=e.loose?Ht[kt.TILDELOOSE]:Ht[kt.TILDE];return n.replace(t,(r,i,o,s,a)=>{Ue("tilde",n,r,i,o,s,a);let c;return Et(i)?c="":Et(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Et(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ue("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,Ue("tilde return",c),c})},ck=(n,e)=>n.trim().split(/\s+/).map(t=>uk(t,e)).join(" "),uk=(n,e)=>{Ue("caret",n,e);let t=e.loose?Ht[kt.CARETLOOSE]:Ht[kt.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,o,s,a,c)=>{Ue("caret",n,i,o,s,a,c);let l;return Et(o)?l="":Et(s)?l=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Et(a)?o==="0"?l=`>=${o}.${s}.0${r} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.0${r} <${+o+1}.0.0-0`:c?(Ue("replaceCaret pr",c),o==="0"?s==="0"?l=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(Ue("no pr"),o==="0"?s==="0"?l=`>=${o}.${s}.${a}${r} <${o}.${s}.${+a+1}-0`:l=`>=${o}.${s}.${a}${r} <${o}.${+s+1}.0-0`:l=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),Ue("caret return",l),l})},lk=(n,e)=>(Ue("replaceXRanges",n,e),n.split(/\s+/).map(t=>dk(t,e)).join(" ")),dk=(n,e)=>{n=n.trim();let t=e.loose?Ht[kt.XRANGELOOSE]:Ht[kt.XRANGE];return n.replace(t,(r,i,o,s,a,c)=>{Ue("xRange",n,r,i,o,s,a,c);let l=Et(o),d=l||Et(s),g=d||Et(a),f=g;return i==="="&&f&&(i=""),c=e.includePrerelease?"-0":"",l?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&f?(d&&(s=0),a=0,i===">"?(i=">=",d?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",d?o=+o+1:s=+s+1),i==="<"&&(c="-0"),r=`${i+o}.${s}.${a}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:g&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),Ue("xRange return",r),r})},fk=(n,e)=>(Ue("replaceStars",n,e),n.trim().replace(Ht[kt.STAR],"")),hk=(n,e)=>(Ue("replaceGTE0",n,e),n.trim().replace(Ht[e.includePrerelease?kt.GTE0PRE:kt.GTE0],"")),pk=n=>(e,t,r,i,o,s,a,c,l,d,g,f,p)=>(Et(r)?t="":Et(i)?t=`>=${r}.0.0${n?"-0":""}`:Et(o)?t=`>=${r}.${i}.0${n?"-0":""}`:s?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,Et(l)?c="":Et(d)?c=`<${+l+1}.0.0-0`:Et(g)?c=`<${l}.${+d+1}.0-0`:f?c=`<=${l}.${d}.${g}-${f}`:n?c=`<${l}.${d}.${+g+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),gk=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(Ue(n[r].semver),n[r].semver!==Np.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var vo=b((KM,KC)=>{var mk=pn(),vk=(n,e,t)=>{try{e=new mk(e,t)}catch{return!1}return e.test(n)};KC.exports=vk});var BC=b(tn=>{"use strict";var yk=tn&&tn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ip=tn&&tn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&yk(e,n,t)};Object.defineProperty(tn,"__esModule",{value:!0});tn.DiagnosticPullMode=tn.vsdiag=void 0;Ip(H(),tn);Ip(he(),tn);var UC=Bf();Object.defineProperty(tn,"vsdiag",{enumerable:!0,get:function(){return UC.vsdiag}});Object.defineProperty(tn,"DiagnosticPullMode",{enumerable:!0,get:function(){return UC.DiagnosticPullMode}});Ip(Dp(),tn)});var xs=b(Ot=>{"use strict";var Ck=Ot&&Ot.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),XC=Ot&&Ot.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ck(e,n,t)};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.SettingMonitor=Ot.LanguageClient=Ot.TransportKind=void 0;var Cr=require("child_process"),Mp=require("fs"),Lp=require("path"),jr=require("vscode"),Le=an(),GC=Dp(),_k=eC(),Be=_s(),wk=Mr(),bk=vo();XC(_s(),Ot);XC(BC(),Ot);var VC="^1.67.0",Je;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(Je=Ot.TransportKind||(Ot.TransportKind={}));var Lr;(function(n){function e(t){let r=t;return r&&r.kind===Je.socket&&Le.number(r.port)}n.isSocket=e})(Lr||(Lr={}));var jp;(function(n){function e(t){return Le.string(t.command)}n.is=e})(jp||(jp={}));var Ap;(function(n){function e(t){return Le.string(t.module)}n.is=e})(Ap||(Ap={}));var Hp;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(Hp||(Hp={}));var $p;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})($p||($p={}));var Wp=class extends GC.BaseLanguageClient{constructor(e,t,r,i,o){let s,a,c,l,d;Le.string(t)?(s=e,a=t,c=r,l=i,d=!!o):(s=e.toLowerCase(),a=e,c=t,l=r,d=i),d===void 0&&(d=!1),super(s,a,l),this._serverOptions=c,this._forceDebug=d,this._isInDebugMode=d;try{this.checkVersion()}catch(g){throw Le.string(g.message)&&this.outputChannel.appendLine(g.message),g}}checkVersion(){let e=wk(jr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!bk(e,VC))throw new Error(`The language client requires VS Code version ${VC} but received version ${jr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,_k.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(d,g){if(!d&&!g)return;let f=Object.create(null);return Object.keys(process.env).forEach(p=>f[p]=process.env[p]),g&&(f.ELECTRON_RUN_AS_NODE="1",f.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(p=>f[p]=d[p]),f}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let d=process.execArgv;return d?d.some(g=>r.some(f=>g.startsWith(f))||i.some(f=>g===f)):!1}function s(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Le.func(a))return a().then(d=>{if(GC.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(Hp.is(d))return this._isDetached=!!d.detached,{reader:new Be.StreamMessageReader(d.reader),writer:new Be.StreamMessageWriter(d.writer)};{let g;return $p.is(d)?(g=d.process,this._isDetached=d.detached):(g=d,this._isDetached=!1),g.stderr.on("data",f=>this.outputChannel.append(Le.string(f)?f:f.toString(e))),{reader:new Be.StreamMessageReader(g.stdout),writer:new Be.StreamMessageWriter(g.stdin)}}});let c,l=a;return l.run||l.debug?this._forceDebug||o()?(c=l.debug,this._isInDebugMode=!0):(c=l.run,this._isInDebugMode=!1):c=a,this._getServerWorkingDir(c.options).then(d=>{if(Ap.is(c)&&c.module){let g=c,f=g.transport||Je.stdio;if(g.runtime){let p=[],m=g.options??Object.create(null);m.execArgv&&m.execArgv.forEach(C=>p.push(C)),p.push(g.module),g.args&&g.args.forEach(C=>p.push(C));let w=Object.create(null);w.cwd=d,w.env=t(m.env,!1);let D=this._getRuntimePath(g.runtime,d),P;if(f===Je.ipc?(w.stdio=[null,null,null,"ipc"],p.push("--node-ipc")):f===Je.stdio?p.push("--stdio"):f===Je.pipe?(P=(0,Be.generateRandomPipeName)(),p.push(`--pipe=${P}`)):Lr.isSocket(f)&&p.push(`--socket=${f.port}`),p.push(`--clientProcessId=${process.pid.toString()}`),f===Je.ipc||f===Je.stdio){let C=Cr.spawn(D,p,w);return!C||!C.pid?yo(C,`Launching server using runtime ${D} failed.`):(this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(Le.string(y)?y:y.toString(e))),f===Je.ipc?(C.stdout.on("data",y=>this.outputChannel.append(Le.string(y)?y:y.toString(e))),Promise.resolve({reader:new Be.IPCMessageReader(C),writer:new Be.IPCMessageWriter(C)})):Promise.resolve({reader:new Be.StreamMessageReader(C.stdout),writer:new Be.StreamMessageWriter(C.stdin)}))}else{if(f===Je.pipe)return(0,Be.createClientPipeTransport)(P).then(C=>{let y=Cr.spawn(D,p,w);return!y||!y.pid?yo(y,`Launching server using runtime ${D} failed.`):(this._serverProcess=y,y.stderr.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),y.stdout.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),C.onConnected().then(S=>({reader:S[0],writer:S[1]})))});if(Lr.isSocket(f))return(0,Be.createClientSocketTransport)(f.port).then(C=>{let y=Cr.spawn(D,p,w);return!y||!y.pid?yo(y,`Launching server using runtime ${D} failed.`):(this._serverProcess=y,y.stderr.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),y.stdout.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),C.onConnected().then(S=>({reader:S[0],writer:S[1]})))})}}else{let p;return new Promise((m,w)=>{let D=(g.args&&g.args.slice())??[];f===Je.ipc?D.push("--node-ipc"):f===Je.stdio?D.push("--stdio"):f===Je.pipe?(p=(0,Be.generateRandomPipeName)(),D.push(`--pipe=${p}`)):Lr.isSocket(f)&&D.push(`--socket=${f.port}`),D.push(`--clientProcessId=${process.pid.toString()}`);let P=g.options??Object.create(null);if(P.env=t(P.env,!0),P.execArgv=P.execArgv||[],P.cwd=d,P.silent=!0,f===Je.ipc||f===Je.stdio){let C=Cr.fork(g.module,D||[],P);s(C),this._serverProcess=C,C.stderr.on("data",y=>this.outputChannel.append(Le.string(y)?y:y.toString(e))),f===Je.ipc?(C.stdout.on("data",y=>this.outputChannel.append(Le.string(y)?y:y.toString(e))),m({reader:new Be.IPCMessageReader(this._serverProcess),writer:new Be.IPCMessageWriter(this._serverProcess)})):m({reader:new Be.StreamMessageReader(C.stdout),writer:new Be.StreamMessageWriter(C.stdin)})}else f===Je.pipe?(0,Be.createClientPipeTransport)(p).then(C=>{let y=Cr.fork(g.module,D||[],P);s(y),this._serverProcess=y,y.stderr.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),y.stdout.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),C.onConnected().then(S=>{m({reader:S[0],writer:S[1]})},w)},w):Lr.isSocket(f)&&(0,Be.createClientSocketTransport)(f.port).then(C=>{let y=Cr.fork(g.module,D||[],P);s(y),this._serverProcess=y,y.stderr.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),y.stdout.on("data",S=>this.outputChannel.append(Le.string(S)?S:S.toString(e))),C.onConnected().then(S=>{m({reader:S[0],writer:S[1]})},w)},w)})}}else if(jp.is(c)&&c.command){let g=c,f=c.args!==void 0?c.args.slice(0):[],p,m=c.transport;if(m===Je.stdio)f.push("--stdio");else if(m===Je.pipe)p=(0,Be.generateRandomPipeName)(),f.push(`--pipe=${p}`);else if(Lr.isSocket(m))f.push(`--socket=${m.port}`);else if(m===Je.ipc)throw new Error("Transport kind ipc is not support for command executable");let w=Object.assign({},g.options);if(w.cwd=w.cwd||d,m===void 0||m===Je.stdio){let D=Cr.spawn(g.command,f,w);return!D||!D.pid?yo(D,`Launching server using command ${g.command} failed.`):(D.stderr.on("data",P=>this.outputChannel.append(Le.string(P)?P:P.toString(e))),this._serverProcess=D,this._isDetached=!!w.detached,Promise.resolve({reader:new Be.StreamMessageReader(D.stdout),writer:new Be.StreamMessageWriter(D.stdin)}))}else{if(m===Je.pipe)return(0,Be.createClientPipeTransport)(p).then(D=>{let P=Cr.spawn(g.command,f,w);return!P||!P.pid?yo(P,`Launching server using command ${g.command} failed.`):(this._serverProcess=P,this._isDetached=!!w.detached,P.stderr.on("data",C=>this.outputChannel.append(Le.string(C)?C:C.toString(e))),P.stdout.on("data",C=>this.outputChannel.append(Le.string(C)?C:C.toString(e))),D.onConnected().then(C=>({reader:C[0],writer:C[1]})))});if(Lr.isSocket(m))return(0,Be.createClientSocketTransport)(m.port).then(D=>{let P=Cr.spawn(g.command,f,w);return!P||!P.pid?yo(P,`Launching server using command ${g.command} failed.`):(this._serverProcess=P,this._isDetached=!!w.detached,P.stderr.on("data",C=>this.outputChannel.append(Le.string(C)?C:C.toString(e))),P.stdout.on("data",C=>this.outputChannel.append(Le.string(C)?C:C.toString(e))),D.onConnected().then(C=>({reader:C[0],writer:C[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Lp.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Lp.join(r,e);if(Mp.existsSync(i))return i}if(t!==void 0){let i=Lp.join(t,e);if(Mp.existsSync(i))return i}return e}_mainGetRootPath(){let e=jr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{Mp.lstat(t,(i,o)=>{r(!i&&o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};Ot.LanguageClient=Wp;var zp=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?jr.workspace.getConfiguration(t).get(r,!1):jr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};Ot.SettingMonitor=zp;function yo(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var QC=b((GM,JC)=>{"use strict";JC.exports=xs()});var Kp=b(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.ReportStats=ve.GetVirtualFileRequest=ve.GetVirtualFileNamesRequest=ve.ReloadProjectNotification=ve.WriteVirtualFilesNotification=ve.AutoInsertRequest=ve.GetMatchTsConfigRequest=ve.FindFileReferenceRequest=ve.FsReadDirectoryRequest=ve.FsReadFileRequest=void 0;var Yn=H(),Dk;(function(n){n.type=new Yn.RequestType("volar/server/fs/readFile")})(Dk=ve.FsReadFileRequest||(ve.FsReadFileRequest={}));var Rk;(function(n){n.type=new Yn.RequestType("volar/server/fs/readDirectory")})(Rk=ve.FsReadDirectoryRequest||(ve.FsReadDirectoryRequest={}));var Sk;(function(n){n.type=new Yn.RequestType("volar/client/findFileReference")})(Sk=ve.FindFileReferenceRequest||(ve.FindFileReferenceRequest={}));var Tk;(function(n){n.type=new Yn.RequestType("volar/client/tsconfig")})(Tk=ve.GetMatchTsConfigRequest||(ve.GetMatchTsConfigRequest={}));var Pk;(function(n){n.type=new Yn.RequestType("volar/client/autoInsert")})(Pk=ve.AutoInsertRequest||(ve.AutoInsertRequest={}));var qk;(function(n){n.type=new Yn.NotificationType("volar/client/writeVirtualFiles")})(qk=ve.WriteVirtualFilesNotification||(ve.WriteVirtualFilesNotification={}));var xk;(function(n){n.type=new Yn.NotificationType("volar/client/reloadProject")})(xk=ve.ReloadProjectNotification||(ve.ReloadProjectNotification={}));var kk;(function(n){n.type=new Yn.RequestType("volar/client/virtualFileNames")})(kk=ve.GetVirtualFileNamesRequest||(ve.GetVirtualFileNamesRequest={}));var Ek;(function(n){n.type=new Yn.RequestType("volar/client/virtualFile")})(Ek=ve.GetVirtualFileRequest||(ve.GetVirtualFileRequest={}));var Ok;(function(n){n.type=new Yn.NotificationType0("volar/client/stats")})(Ok=ve.ReportStats||(ve.ReportStats={}))});var Up=b(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.DiagnosticModel=Ar.ServerMode=void 0;var Fk;(function(n){n[n.Semantic=0]="Semantic",n[n.PartialSemantic=1]="PartialSemantic",n[n.Syntactic=2]="Syntactic"})(Fk=Ar.ServerMode||(Ar.ServerMode={}));var Nk;(function(n){n[n.None=0]="None",n[n.Push=1]="Push",n[n.Pull=2]="Pull"})(Nk=Ar.DiagnosticModel||(Ar.DiagnosticModel={}))});var Pc=b(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.thenable=nt.typedArray=nt.stringArray=nt.array=nt.func=nt.error=nt.number=nt.string=nt.boolean=void 0;function Ik(n){return n===!0||n===!1}nt.boolean=Ik;function YC(n){return typeof n=="string"||n instanceof String}nt.string=YC;function Mk(n){return typeof n=="number"||n instanceof Number}nt.number=Mk;function Lk(n){return n instanceof Error}nt.error=Lk;function ZC(n){return typeof n=="function"}nt.func=ZC;function e_(n){return Array.isArray(n)}nt.array=e_;function jk(n){return e_(n)&&n.every(e=>YC(e))}nt.stringArray=jk;function Ak(n,e){return Array.isArray(n)&&n.every(e)}nt.typedArray=Ak;function Hk(n){return n&&ZC(n.then)}nt.thenable=Hk});var Bp=b(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.generateUuid=gn.parse=gn.isUUID=gn.v4=gn.empty=void 0;var ks=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},re=class extends ks{constructor(){super([re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),"-",re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),"-","4",re._randomHex(),re._randomHex(),re._randomHex(),"-",re._oneOf(re._timeHighBits),re._randomHex(),re._randomHex(),re._randomHex(),"-",re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex(),re._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return re._oneOf(re._chars)}};re._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];re._timeHighBits=["8","9","a","b"];gn.empty=new ks("00000000-0000-0000-0000-000000000000");function t_(){return new re}gn.v4=t_;var $k=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function n_(n){return $k.test(n)}gn.isUUID=n_;function Wk(n){if(!n_(n))throw new Error("invalid uuid");return new ks(n)}gn.parse=Wk;function zk(){return t_().asHex()}gn.generateUuid=zk});var r_=b($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.attachPartialResult=$r.ProgressFeature=$r.attachWorkDone=void 0;var Hr=H(),Kk=Bp(),Zn=class{constructor(e,t){this._connection=e,this._token=t,Zn.Instances.set(this._token,this)}begin(e,t,r,i){let o={kind:"begin",title:e,percentage:t,message:r,cancellable:i};this._connection.sendProgress(Hr.WorkDoneProgress.type,this._token,o)}report(e,t){let r={kind:"report"};typeof e=="number"?(r.percentage=e,t!==void 0&&(r.message=t)):r.message=e,this._connection.sendProgress(Hr.WorkDoneProgress.type,this._token,r)}done(){Zn.Instances.delete(this._token),this._connection.sendProgress(Hr.WorkDoneProgress.type,this._token,{kind:"end"})}};Zn.Instances=new Map;var qc=class extends Zn{constructor(e,t){super(e,t),this._source=new Hr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Es=class{constructor(){}begin(){}report(){}done(){}},xc=class extends Es{constructor(){super(),this._source=new Hr.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Uk(n,e){if(e===void 0||e.workDoneToken===void 0)return new Es;let t=e.workDoneToken;return delete e.workDoneToken,new Zn(n,t)}$r.attachWorkDone=Uk;var Bk=n=>class extends n{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(Hr.WorkDoneProgressCancelNotification.type,t=>{let r=Zn.Instances.get(t.token);(r instanceof qc||r instanceof xc)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new Es:new Zn(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,Kk.generateUuid)();return this.connection.sendRequest(Hr.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new qc(this.connection,e))}else return Promise.resolve(new xc)}};$r.ProgressFeature=Bk;var Gp;(function(n){n.type=new Hr.ProgressType})(Gp||(Gp={}));var Vp=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(Gp.type,this._token,e)}};function Gk(n,e){if(e===void 0||e.partialResultToken===void 0)return;let t=e.partialResultToken;return delete e.partialResultToken,new Vp(n,t)}$r.attachPartialResult=Gk});var i_=b(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.ConfigurationFeature=void 0;var Vk=H(),Xk=Pc(),Jk=n=>class extends n{getConfiguration(e){return e?Xk.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Vk.ConfigurationRequest.type,t).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}};kc.ConfigurationFeature=Jk});var o_=b(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.WorkspaceFoldersFeature=void 0;var Ec=H(),Qk=n=>class extends n{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Ec.Emitter,this.connection.onNotification(Ec.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Ec.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Ec.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Oc.WorkspaceFoldersFeature=Qk});var s_=b(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.CallHierarchyFeature=void 0;var Xp=H(),Yk=n=>class extends n{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(Xp.CallHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let t=Xp.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onOutgoingCalls:e=>{let t=Xp.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Fc.CallHierarchyFeature=Yk});var Qp=b(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.SemanticTokensBuilder=Wr.SemanticTokensDiff=Wr.SemanticTokensFeature=void 0;var Nc=H(),Zk=n=>class extends n{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Nc.SemanticTokensRefreshRequest.type),on:e=>{let t=Nc.SemanticTokensRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onDelta:e=>{let t=Nc.SemanticTokensDeltaRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onRange:e=>{let t=Nc.SemanticTokensRangeRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Wr.SemanticTokensFeature=Zk;var Ic=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,r=0;for(;r<t&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<t&&r<e){let i=e-1,o=t-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let s=i-r+1,a=this.modifiedSequence.slice(r,o+1);return a.length===1&&a[0]===this.originalSequence[i]?[{start:r,deleteCount:s-1}]:[{start:r,deleteCount:s,data:a}]}else return r<t?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};Wr.SemanticTokensDiff=Ic;var Jp=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,r,i,o){let s=e,a=t;this._dataLen>0&&(s-=this._prevLine,s===0&&(a-=this._prevChar)),this._data[this._dataLen++]=s,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Ic(this._prevData,this._data).computeDiff()}:this.build()}};Wr.SemanticTokensBuilder=Jp});var a_=b(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.ShowDocumentFeature=void 0;var e0=H(),t0=n=>class extends n{showDocument(e){return this.connection.sendRequest(e0.ShowDocumentRequest.type,e)}};Mc.ShowDocumentFeature=t0});var c_=b(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.FileOperationsFeature=void 0;var Co=H(),n0=n=>class extends n{onDidCreateFiles(e){return this.connection.onNotification(Co.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(Co.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(Co.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(Co.WillCreateFilesRequest.type,(t,r)=>e(t,r))}onWillRenameFiles(e){return this.connection.onRequest(Co.WillRenameFilesRequest.type,(t,r)=>e(t,r))}onWillDeleteFiles(e){return this.connection.onRequest(Co.WillDeleteFilesRequest.type,(t,r)=>e(t,r))}};Lc.FileOperationsFeature=n0});var u_=b(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.LinkedEditingRangeFeature=void 0;var r0=H(),i0=n=>class extends n{onLinkedEditingRange(e){return this.connection.onRequest(r0.LinkedEditingRangeRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0))}};jc.LinkedEditingRangeFeature=i0});var l_=b(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.TypeHierarchyFeature=void 0;var Yp=H(),o0=n=>class extends n{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(Yp.TypeHierarchyPrepareRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let t=Yp.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))},onSubtypes:e=>{let t=Yp.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Ac.TypeHierarchyFeature=o0});var f_=b(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.InlineValueFeature=void 0;var d_=H(),s0=n=>class extends n{get inlineValue(){return{refresh:()=>this.connection.sendRequest(d_.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(d_.InlineValueRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t)))}}};Hc.InlineValueFeature=s0});var h_=b($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.InlayHintFeature=void 0;var Zp=H(),a0=n=>class extends n{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Zp.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(Zp.InlayHintRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(Zp.InlayHintResolveRequest.type,(t,r)=>e(t,r))}}};$c.InlayHintFeature=a0});var p_=b(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.DiagnosticFeature=void 0;var Os=H(),c0=n=>class extends n{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Os.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(Os.DocumentDiagnosticRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Os.DocumentDiagnosticRequest.partialResult,t))),onWorkspace:e=>this.connection.onRequest(Os.WorkspaceDiagnosticRequest.type,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(Os.WorkspaceDiagnosticRequest.partialResult,t)))}}};Wc.DiagnosticFeature=c0});var tg=b(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.TextDocuments=void 0;var Ri=H(),eg=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new Ri.Emitter,this._onDidOpen=new Ri.Emitter,this._onDidClose=new Ri.Emitter,this._onDidSave=new Ri.Emitter,this._onWillSave=new Ri.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=Ri.TextDocumentSyncKind.Incremental;let t=[];return t.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let s=Object.freeze({document:o});this._onDidOpen.fire(s),this._onDidChangeContent.fire(s)})),t.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:s}=i;if(s==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let a=this._syncedDocuments.get(i.uri);a!==void 0&&(a=this._configuration.update(a,o,s),this._syncedDocuments.set(i.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),t.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),t.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),t.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),t.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),Ri.Disposable.create(()=>{t.forEach(r=>r.dispose())})}};zc.TextDocuments=eg});var rg=b(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.NotebookDocuments=_o.NotebookSyncFeature=void 0;var mn=H(),g_=tg(),u0=n=>class extends n{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(mn.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(mn.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(mn.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(mn.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};_o.NotebookSyncFeature=u0;var zr=class{onDidOpenTextDocument(e){return this.openHandler=e,mn.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,mn.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,mn.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return zr.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return zr.NULL_DISPOSE}onDidSaveTextDocument(){return zr.NULL_DISPOSE}};zr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var ng=class{constructor(e){e instanceof g_.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new g_.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new mn.Emitter,this._onDidChange=new mn.Emitter,this._onDidSave=new mn.Emitter,this._onDidClose=new mn.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(t);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let t=new zr,r=[];return r.push(this.cellTextDocuments.listen(t)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)t.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let s=o.metadata,a=!1,c=i.change;c.metadata!==void 0&&(a=!0,o.metadata=c.metadata);let l=[],d=[],g=[],f=[];if(c.cells!==void 0){let P=c.cells;if(P.structure!==void 0){let C=P.structure.array;if(o.cells.splice(C.start,C.deleteCount,...C.cells!==void 0?C.cells:[]),P.structure.didOpen!==void 0)for(let y of P.structure.didOpen)t.openTextDocument({textDocument:y}),l.push(y.uri);if(P.structure.didClose)for(let y of P.structure.didClose)t.closeTextDocument({textDocument:y}),d.push(y.uri)}if(P.data!==void 0){let C=new Map(P.data.map(y=>[y.document,y]));for(let y=0;y<=o.cells.length;y++){let S=C.get(o.cells[y].document);if(S!==void 0){let I=o.cells.splice(y,1,S);if(g.push({old:I[0],new:S}),C.delete(S.document),C.size===0)break}}}if(P.textContent!==void 0)for(let C of P.textContent)t.changeTextDocument({textDocument:C.document,contentChanges:C.changes}),f.push(C.document.uri)}this.updateCellMap(o);let p={notebookDocument:o};a&&(p.metadata={old:s,new:o.metadata});let m=[];for(let P of l)m.push(this.getNotebookCell(P));let w=[];for(let P of d)w.push(this.getNotebookCell(P));let D=[];for(let P of f)D.push(this.getNotebookCell(P));(m.length>0||w.length>0||g.length>0||D.length>0)&&(p.cells={added:m,removed:w,changed:{data:g,textContent:D}}),(p.metadata!==void 0||p.cells!==void 0)&&this._onDidChange.fire(p)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let s of i.cellTextDocuments)t.closeTextDocument({textDocument:s});this.notebookDocuments.delete(i.notebookDocument.uri);for(let s of o.cells)this.notebookCellMap.delete(s.document)}})),mn.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};_o.NotebookDocuments=ng});var m_=b(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.MonikerFeature=void 0;var l0=H(),d0=n=>class extends n{get moniker(){return{on:e=>{let t=l0.MonikerRequest.type;return this.connection.onRequest(t,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(t,r)))}}}};Kc.MonikerFeature=d0});var ug=b(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.createConnection=fe.combineFeatures=fe.combineNotebooksFeatures=fe.combineLanguagesFeatures=fe.combineWorkspaceFeatures=fe.combineWindowFeatures=fe.combineClientFeatures=fe.combineTracerFeatures=fe.combineTelemetryFeatures=fe.combineConsoleFeatures=fe._NotebooksImpl=fe._LanguagesImpl=fe.BulkUnregistration=fe.BulkRegistration=fe.ErrorMessageTracker=void 0;var L=H(),vn=Pc(),og=Bp(),J=r_(),f0=i_(),h0=o_(),p0=s_(),g0=Qp(),m0=a_(),v0=c_(),y0=u_(),C0=l_(),_0=f_(),w0=h_(),b0=p_(),D0=rg(),R0=m_();function ig(n){if(n!==null)return n}var sg=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};fe.ErrorMessageTracker=sg;var Uc=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(L.MessageType.Error,e)}warn(e){this.send(L.MessageType.Warning,e)}info(e){this.send(L.MessageType.Info,e)}log(e){this.send(L.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(L.LogMessageNotification.type,{type:e,message:t}).catch(()=>{(0,L.RAL)().console.error("Sending log message failed")})}},ag=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let r={type:L.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(L.ShowMessageRequest.type,r).then(ig)}showWarningMessage(e,...t){let r={type:L.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(L.ShowMessageRequest.type,r).then(ig)}showInformationMessage(e,...t){let r={type:L.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(L.ShowMessageRequest.type,r).then(ig)}},v_=(0,m0.ShowDocumentFeature)((0,J.ProgressFeature)(ag)),S0;(function(n){function e(){return new Bc}n.create=e})(S0=fe.BulkRegistration||(fe.BulkRegistration={}));var Bc=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let r=vn.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=og.generateUuid();this._registrations.push({id:i,method:r,registerOptions:t||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},T0;(function(n){function e(){return new Fs(void 0,[])}n.create=e})(T0=fe.BulkUnregistration||(fe.BulkUnregistration={}));var Fs=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let t={unregisterations:e};this._connection.sendRequest(L.UnregistrationRequest.type,t).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let t=vn.string(e)?e:e.method,r=this._unregistrations.get(t);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(L.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(t)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Gc=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,r){return e instanceof Bc?this.registerMany(e):e instanceof Fs?this.registerSingle1(e,t,r):this.registerSingle2(e,t)}registerSingle1(e,t,r){let i=vn.string(t)?t:t.method,o=og.generateUuid(),s={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(L.RegistrationRequest.type,s).then(a=>(e.add({id:o,method:i}),e),a=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(a)))}registerSingle2(e,t){let r=vn.string(e)?e:e.method,i=og.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:t||{}}]};return this.connection.sendRequest(L.RegistrationRequest.type,o).then(s=>L.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),s=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(s)))}unregisterSingle(e,t){let r={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(L.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(L.RegistrationRequest.type,t).then(()=>new Fs(this._connection,t.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},cg=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function t(i){return i&&!!i.edit}let r=t(e)?e:{edit:e};return this.connection.sendRequest(L.ApplyWorkspaceEditRequest.type,r)}},y_=(0,v0.FileOperationsFeature)((0,h0.WorkspaceFoldersFeature)((0,f0.ConfigurationFeature)(cg))),Vc=class{constructor(){this._trace=L.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==L.Trace.Off&&this.connection.sendNotification(L.LogTraceNotification.type,{message:e,verbose:this._trace===L.Trace.Verbose?t:void 0}).catch(()=>{})}},Xc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(L.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},Jc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,J.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,J.attachPartialResult)(this.connection,t)}};fe._LanguagesImpl=Jc;var C_=(0,R0.MonikerFeature)((0,b0.DiagnosticFeature)((0,w0.InlayHintFeature)((0,_0.InlineValueFeature)((0,C0.TypeHierarchyFeature)((0,y0.LinkedEditingRangeFeature)((0,g0.SemanticTokensFeature)((0,p0.CallHierarchyFeature)(Jc)))))))),Qc=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,J.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,J.attachPartialResult)(this.connection,t)}};fe._NotebooksImpl=Qc;var __=(0,D0.NotebookSyncFeature)(Qc);function w_(n,e){return function(t){return e(n(t))}}fe.combineConsoleFeatures=w_;function b_(n,e){return function(t){return e(n(t))}}fe.combineTelemetryFeatures=b_;function D_(n,e){return function(t){return e(n(t))}}fe.combineTracerFeatures=D_;function R_(n,e){return function(t){return e(n(t))}}fe.combineClientFeatures=R_;function S_(n,e){return function(t){return e(n(t))}}fe.combineWindowFeatures=S_;function T_(n,e){return function(t){return e(n(t))}}fe.combineWorkspaceFeatures=T_;function P_(n,e){return function(t){return e(n(t))}}fe.combineLanguagesFeatures=P_;function q_(n,e){return function(t){return e(n(t))}}fe.combineNotebooksFeatures=q_;function P0(n,e){function t(i,o,s){return i&&o?s(i,o):i||o}return{__brand:"features",console:t(n.console,e.console,w_),tracer:t(n.tracer,e.tracer,D_),telemetry:t(n.telemetry,e.telemetry,b_),client:t(n.client,e.client,R_),window:t(n.window,e.window,S_),workspace:t(n.workspace,e.workspace,T_),languages:t(n.languages,e.languages,P_),notebooks:t(n.notebooks,e.notebooks,q_)}}fe.combineFeatures=P0;function q0(n,e,t){let r=t&&t.console?new(t.console(Uc)):new Uc,i=n(r);r.rawAttach(i);let o=t&&t.tracer?new(t.tracer(Vc)):new Vc,s=t&&t.telemetry?new(t.telemetry(Xc)):new Xc,a=t&&t.client?new(t.client(Gc)):new Gc,c=t&&t.window?new(t.window(v_)):new v_,l=t&&t.workspace?new(t.workspace(y_)):new y_,d=t&&t.languages?new(t.languages(C_)):new C_,g=t&&t.notebooks?new(t.notebooks(__)):new __,f=[r,o,s,a,c,l,d,g];function p(C){return C instanceof Promise?C:vn.thenable(C)?new Promise((y,S)=>{C.then(I=>y(I),I=>S(I))}):Promise.resolve(C)}let m,w,D,P={listen:()=>i.listen(),sendRequest:(C,...y)=>i.sendRequest(vn.string(C)?C:C.method,...y),onRequest:(C,y)=>i.onRequest(C,y),sendNotification:(C,y)=>{let S=vn.string(C)?C:C.method;return arguments.length===1?i.sendNotification(S):i.sendNotification(S,y)},onNotification:(C,y)=>i.onNotification(C,y),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:C=>(w=C,{dispose:()=>{w=void 0}}),onInitialized:C=>i.onNotification(L.InitializedNotification.type,C),onShutdown:C=>(m=C,{dispose:()=>{m=void 0}}),onExit:C=>(D=C,{dispose:()=>{D=void 0}}),get console(){return r},get telemetry(){return s},get tracer(){return o},get client(){return a},get window(){return c},get workspace(){return l},get languages(){return d},get notebooks(){return g},onDidChangeConfiguration:C=>i.onNotification(L.DidChangeConfigurationNotification.type,C),onDidChangeWatchedFiles:C=>i.onNotification(L.DidChangeWatchedFilesNotification.type,C),__textDocumentSync:void 0,onDidOpenTextDocument:C=>i.onNotification(L.DidOpenTextDocumentNotification.type,C),onDidChangeTextDocument:C=>i.onNotification(L.DidChangeTextDocumentNotification.type,C),onDidCloseTextDocument:C=>i.onNotification(L.DidCloseTextDocumentNotification.type,C),onWillSaveTextDocument:C=>i.onNotification(L.WillSaveTextDocumentNotification.type,C),onWillSaveTextDocumentWaitUntil:C=>i.onRequest(L.WillSaveTextDocumentWaitUntilRequest.type,C),onDidSaveTextDocument:C=>i.onNotification(L.DidSaveTextDocumentNotification.type,C),sendDiagnostics:C=>i.sendNotification(L.PublishDiagnosticsNotification.type,C),onHover:C=>i.onRequest(L.HoverRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),onCompletion:C=>i.onRequest(L.CompletionRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onCompletionResolve:C=>i.onRequest(L.CompletionResolveRequest.type,C),onSignatureHelp:C=>i.onRequest(L.SignatureHelpRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),onDeclaration:C=>i.onRequest(L.DeclarationRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onDefinition:C=>i.onRequest(L.DefinitionRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onTypeDefinition:C=>i.onRequest(L.TypeDefinitionRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onImplementation:C=>i.onRequest(L.ImplementationRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onReferences:C=>i.onRequest(L.ReferencesRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onDocumentHighlight:C=>i.onRequest(L.DocumentHighlightRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onDocumentSymbol:C=>i.onRequest(L.DocumentSymbolRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onWorkspaceSymbol:C=>i.onRequest(L.WorkspaceSymbolRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onWorkspaceSymbolResolve:C=>i.onRequest(L.WorkspaceSymbolResolveRequest.type,C),onCodeAction:C=>i.onRequest(L.CodeActionRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onCodeActionResolve:C=>i.onRequest(L.CodeActionResolveRequest.type,(y,S)=>C(y,S)),onCodeLens:C=>i.onRequest(L.CodeLensRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onCodeLensResolve:C=>i.onRequest(L.CodeLensResolveRequest.type,(y,S)=>C(y,S)),onDocumentFormatting:C=>i.onRequest(L.DocumentFormattingRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),onDocumentRangeFormatting:C=>i.onRequest(L.DocumentRangeFormattingRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),onDocumentOnTypeFormatting:C=>i.onRequest(L.DocumentOnTypeFormattingRequest.type,(y,S)=>C(y,S)),onRenameRequest:C=>i.onRequest(L.RenameRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),onPrepareRename:C=>i.onRequest(L.PrepareRenameRequest.type,(y,S)=>C(y,S)),onDocumentLinks:C=>i.onRequest(L.DocumentLinkRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onDocumentLinkResolve:C=>i.onRequest(L.DocumentLinkResolveRequest.type,(y,S)=>C(y,S)),onDocumentColor:C=>i.onRequest(L.DocumentColorRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onColorPresentation:C=>i.onRequest(L.ColorPresentationRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onFoldingRanges:C=>i.onRequest(L.FoldingRangeRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onSelectionRanges:C=>i.onRequest(L.SelectionRangeRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),(0,J.attachPartialResult)(i,y))),onExecuteCommand:C=>i.onRequest(L.ExecuteCommandRequest.type,(y,S)=>C(y,S,(0,J.attachWorkDone)(i,y),void 0)),dispose:()=>i.dispose()};for(let C of f)C.attach(P);return i.onRequest(L.InitializeRequest.type,C=>{e.initialize(C),vn.string(C.trace)&&(o.trace=L.Trace.fromString(C.trace));for(let y of f)y.initialize(C.capabilities);if(w){let y=w(C,new L.CancellationTokenSource().token,(0,J.attachWorkDone)(i,C),void 0);return p(y).then(S=>{if(S instanceof L.ResponseError)return S;let I=S;I||(I={capabilities:{}});let X=I.capabilities;X||(X={},I.capabilities=X),X.textDocumentSync===void 0||X.textDocumentSync===null?X.textDocumentSync=vn.number(P.__textDocumentSync)?P.__textDocumentSync:L.TextDocumentSyncKind.None:!vn.number(X.textDocumentSync)&&!vn.number(X.textDocumentSync.change)&&(X.textDocumentSync.change=vn.number(P.__textDocumentSync)?P.__textDocumentSync:L.TextDocumentSyncKind.None);for(let $ of f)$.fillServerCapabilities(X);return I})}else{let y={capabilities:{textDocumentSync:L.TextDocumentSyncKind.None}};for(let S of f)S.fillServerCapabilities(y.capabilities);return y}}),i.onRequest(L.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,m)return m(new L.CancellationTokenSource().token)}),i.onNotification(L.ExitNotification.type,()=>{try{D&&D()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(L.SetTraceNotification.type,C=>{o.trace=L.Trace.fromString(C.value)}),P}fe.createConnection=q0});var k_=b(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.resolveModulePath=Ft.FileSystem=Ft.resolveGlobalYarnPath=Ft.resolveGlobalNodePath=Ft.resolve=Ft.uriToFilePath=void 0;var x0=require("url"),Nn=require("path"),lg=require("fs"),hg=require("child_process");function k0(n){let e=x0.parse(n);if(e.protocol!=="file:"||!e.path)return;let t=e.path.split("/");for(var r=0,i=t.length;r<i;r++)t[r]=decodeURIComponent(t[r]);if(process.platform==="win32"&&t.length>1){let o=t[0],s=t[1];o.length===0&&s.length>1&&s[1]===":"&&t.shift()}return Nn.normalize(t.join("/"))}Ft.uriToFilePath=k0;function dg(){return process.platform==="win32"}function Yc(n,e,t,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((s,a)=>{let c=process.env,l=Object.create(null);Object.keys(c).forEach(d=>l[d]=c[d]),e&&lg.existsSync(e)&&(l[i]?l[i]=e+Nn.delimiter+l[i]:l[i]=e,r&&r(`NODE_PATH value is: ${l[i]}`)),l.ELECTRON_RUN_AS_NODE="1";try{let d=(0,hg.fork)("",[],{cwd:t,env:l,execArgv:["-e",o]});if(d.pid===void 0){a(new Error(`Starting process to resolve node module  ${n} failed`));return}d.on("error",f=>{a(f)}),d.on("message",f=>{f.c==="r"&&(d.send({c:"e"}),f.s?s(f.r):a(new Error(`Failed to resolve module: ${n}`)))});let g={c:"rs",a:n};d.send(g)}catch(d){a(d)}})}Ft.resolve=Yc;function fg(n){let e="npm",t=Object.create(null);Object.keys(process.env).forEach(o=>t[o]=process.env[o]),t.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:t};dg()&&(e="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let o=(0,hg.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){n&&n("'npm config get prefix' didn't return a value.");return}let s=o.trim();return n&&n(`'npm config get prefix' value is: ${s}`),s.length>0?dg()?Nn.join(s,"node_modules"):Nn.join(s,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Ft.resolveGlobalNodePath=fg;function E0(n){let e="yarn",t={encoding:"utf8"};dg()&&(e="yarn.cmd",t.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,hg.spawnSync)(e,["global","dir","--json"],t),o=i.stdout;if(!o){n&&(n("'yarn global dir' didn't return a value."),i.stderr&&n(i.stderr));return}let s=o.trim().split(/\r?\n/);for(let a of s)try{let c=JSON.parse(a);if(c.type==="log")return Nn.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Ft.resolveGlobalYarnPath=E0;var x_;(function(n){let e;function t(){return e!==void 0||(process.platform==="win32"?e=!1:e=!lg.existsSync(__filename.toUpperCase())||!lg.existsSync(__filename.toLowerCase())),e}n.isCaseSensitive=t;function r(i,o){return t()?Nn.normalize(o).indexOf(Nn.normalize(i))===0:Nn.normalize(o).toLowerCase().indexOf(Nn.normalize(i).toLowerCase())===0}n.isParent=r})(x_=Ft.FileSystem||(Ft.FileSystem={}));function O0(n,e,t,r){return t?(Nn.isAbsolute(t)||(t=Nn.join(n,t)),Yc(e,t,t,r).then(i=>x_.isParent(t,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Yc(e,fg(r),n,r))):Yc(e,fg(r),n,r)}Ft.resolveModulePath=O0});var O_=b(mt=>{"use strict";var F0=mt&&mt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),E_=mt&&mt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&F0(e,n,t)};Object.defineProperty(mt,"__esModule",{value:!0});mt.ProposedFeatures=mt.NotebookDocuments=mt.TextDocuments=mt.SemanticTokensBuilder=void 0;var N0=Qp();Object.defineProperty(mt,"SemanticTokensBuilder",{enumerable:!0,get:function(){return N0.SemanticTokensBuilder}});E_(H(),mt);var I0=tg();Object.defineProperty(mt,"TextDocuments",{enumerable:!0,get:function(){return I0.TextDocuments}});var M0=rg();Object.defineProperty(mt,"NotebookDocuments",{enumerable:!0,get:function(){return M0.NotebookDocuments}});E_(ug(),mt);var L0;(function(n){n.all={__brand:"features"}})(L0=mt.ProposedFeatures||(mt.ProposedFeatures={}))});var M_=b(nn=>{"use strict";var j0=nn&&nn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),N_=nn&&nn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&j0(e,n,t)};Object.defineProperty(nn,"__esModule",{value:!0});nn.createConnection=nn.Files=void 0;var pg=Pc(),A0=ug(),Ns=k_(),Si=_s();N_(_s(),nn);N_(O_(),nn);var H0;(function(n){n.uriToFilePath=Ns.uriToFilePath,n.resolveGlobalNodePath=Ns.resolveGlobalNodePath,n.resolveGlobalYarnPath=Ns.resolveGlobalYarnPath,n.resolve=Ns.resolve,n.resolveModulePath=Ns.resolveModulePath})(H0=nn.Files||(nn.Files={}));var F_;function Zc(){if(F_!==void 0)try{F_.end()}catch{}}var wo=!1,I_;function $0(){let n="--clientProcessId";function e(t){try{let r=parseInt(t);isNaN(r)||(I_=setInterval(()=>{try{process.kill(r,0)}catch{Zc(),process.exit(wo?0:1)}},3e3))}catch{}}for(let t=2;t<process.argv.length;t++){let r=process.argv[t];if(r===n&&t+1<process.argv.length){e(process.argv[t+1]);return}else{let i=r.split("=");i[0]===n&&e(i[1])}}}$0();var W0={initialize:n=>{let e=n.processId;pg.number(e)&&I_===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(wo?0:1)}},3e3)},get shutdownReceived(){return wo},set shutdownReceived(n){wo=n},exit:n=>{Zc(),process.exit(n)}};function z0(n,e,t,r){let i,o,s,a;return n!==void 0&&n.__brand==="features"&&(i=n,n=e,e=t,t=r),Si.ConnectionStrategy.is(n)||Si.ConnectionOptions.is(n)?a=n:(o=n,s=e,a=t),K0(o,s,a,i)}nn.createConnection=z0;function K0(n,e,t,r){if(!n&&!e&&process.argv.length>2){let a,c,l=process.argv.slice(2);for(let d=0;d<l.length;d++){let g=l[d];if(g==="--node-ipc"){n=new Si.IPCMessageReader(process),e=new Si.IPCMessageWriter(process);break}else if(g==="--stdio"){n=process.stdin,e=process.stdout;break}else if(g==="--socket"){a=parseInt(l[d+1]);break}else if(g==="--pipe"){c=l[d+1];break}else{var i=g.split("=");if(i[0]==="--socket"){a=parseInt(i[1]);break}else if(i[0]==="--pipe"){c=i[1];break}}}if(a){let d=(0,Si.createServerSocketTransport)(a);n=d[0],e=d[1]}else if(c){let d=(0,Si.createServerPipeTransport)(c);n=d[0],e=d[1]}}var o="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!n)throw new Error("Connection input stream is not set. "+o);if(!e)throw new Error("Connection output stream is not set. "+o);if(pg.func(n.read)&&pg.func(n.on)){let a=n;a.on("end",()=>{Zc(),process.exit(wo?0:1)}),a.on("close",()=>{Zc(),process.exit(wo?0:1)})}let s=a=>(0,Si.createProtocolConnection)(n,e,a,t);return(0,A0.createConnection)(s,W0,r)}});var L_=b($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.FileKind=$t.MirrorBehaviorCapabilities=$t.FileRangeCapabilities=$t.FileCapabilities=void 0;var U0;(function(n){n.full={diagnostic:!0,foldingRange:!0,documentFormatting:!0,documentSymbol:!0,codeAction:!0,inlayHint:!0}})(U0=$t.FileCapabilities||($t.FileCapabilities={}));var B0;(function(n){n.full={hover:!0,references:!0,definition:!0,rename:!0,completion:!0,diagnostic:!0,semanticTokens:!0}})(B0=$t.FileRangeCapabilities||($t.FileRangeCapabilities={}));var G0;(function(n){n.full={references:!0,definition:!0,rename:!0}})(G0=$t.MirrorBehaviorCapabilities||($t.MirrorBehaviorCapabilities={}));var V0;(function(n){n[n.TextFile=0]="TextFile",n[n.TypeScriptHostFile=1]="TypeScriptHostFile"})(V0=$t.FileKind||($t.FileKind={}))});var gg=b(Ti=>{"use strict";var X0=Ti&&Ti.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),J0=Ti&&Ti.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&X0(e,n,t)};Object.defineProperty(Ti,"__esModule",{value:!0});J0(H(),Ti)});var _r=b(In=>{"use strict";var Q0=In&&In.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Is=In&&In.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Q0(e,n,t)};Object.defineProperty(In,"__esModule",{value:!0});Is(Kp(),In);Is(Up(),In);Is(M_(),In);Is(L_(),In);Is(gg(),In)});var j_=b(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.activate=void 0;var rn=require("vscode"),Y0=_r();async function Z0(n,e){let t=!1,r;s();let i=rn.workspace.onDidChangeTextDocument(a,null),o=rn.window.onDidChangeActiveTextEditor(s,null);return rn.Disposable.from(i,o);function s(){t=!1;let l=rn.window.activeTextEditor;if(!l)return;let d=l.document;!e(d)||(t=!0)}function a({document:l,contentChanges:d,reason:g}){if(!t||d.length===0||g===rn.TextDocumentChangeReason.Undo||g===rn.TextDocumentChangeReason.Redo)return;let f=rn.window.activeTextEditor?.document;if(l!==f)return;let p=d[d.length-1];c(l,p,async(m,w,D,P)=>{for(let C of n){let y={...C.code2ProtocolConverter.asTextDocumentPositionParams(m,w),options:{lastChange:{...D,range:C.code2ProtocolConverter.asRange(D.range)}}};if(P())return;let S=await C.sendRequest(Y0.AutoInsertRequest.type,y);if(S!=null)return typeof S=="string"?S:C.protocol2CodeConverter.asTextEdit(S)}})}function c(l,d,g){r&&(clearTimeout(r),r=void 0);let f=l.version;r=setTimeout(()=>{let p=d.range.start,m=new rn.Position(p.line,p.character+d.text.length);g(l,m,d,()=>rn.window.activeTextEditor?.document.version!==f).then(w=>{if(w&&t){let D=rn.window.activeTextEditor;if(D){let P=D.document;if(l===P&&P.version===f)if(typeof w=="string"){let C=D.selections;C.length&&C.some(y=>y.active.isEqual(m))?D.insertSnippet(new rn.SnippetString(w),C.map(y=>y.active)):D.insertSnippet(new rn.SnippetString(w),m)}else D.insertSnippet(new rn.SnippetString(w.newText),w.range)}}}),r=void 0},100)}}eu.activate=Z0});var A_=b(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.binarySearch=void 0;function eE(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=Math.floor((t+r)/2),o=n[i];if(o<e)t=i+1;else if(o>e)r=i-1;else{t=i,r=i;break}}return Math.max(Math.min(t,r,n.length-1),0)}tu.binarySearch=eE});var U_=b(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.replaceRange=Rt.replaceSourceRange=Rt.replaceAll=Rt.replace=Rt.create=Rt.toString=Rt.getLength=void 0;var H_=A_(),M1=Symbol();function $_(n){let e=0;for(let t of n)e+=typeof t=="string"?t.length:t[0].length;return e}Rt.getLength=$_;function mg(n){return n.map(e=>typeof e=="string"?e:e[0]).join("")}Rt.toString=mg;function tE(n){return[[n,void 0,0]]}Rt.create=tE;function nE(n,e,...t){let i=mg(n).match(e);if(i&&i.index!==void 0){let o=i.index,s=o+i[0].length;vg(n,o,s,...t.map(a=>typeof a=="function"?a(i[0]):a))}}Rt.replace=nE;function rE(n,e,...t){let r=mg(n),i=r.matchAll(e),o=r.length,s=0;for(let a of i)if(a.index!==void 0){let c=a.index+s,l=c+a[0].length;vg(n,c,l,...t.map(g=>typeof g=="function"?g(a[0]):g));let d=$_(n);s+=d-o,o=d}}Rt.replaceAll=rE;function iE(n,e,t,r,...i){for(let o of n)if(typeof o!="string"&&o[1]===e){let s=typeof o[2]=="number"?o[2]:o[2][0],a=typeof o[2]=="number"?o[2]+o[0].length:o[2][1];if(s<=t&&a>=r){let c=[];t>s&&c.push(z_(o,t-s));for(let l of i)c.push(l);return r<a&&c.push(K_(o,r-a)),W_(c),n.splice(n.indexOf(o),1,...c),!0}}return!1}Rt.replaceSourceRange=iE;function vg(n,e,t,...r){let i=oE(n),o=(0,H_.binarySearch)(i,e),s=(0,H_.binarySearch)(i,t),a=n[o],c=n[s],l=i[o],d=i[s],g=i[s]+(typeof c=="string"?c.length:c[0].length),f=[];e>l&&f.push(z_(a,e-l));for(let p of r)f.push(p);t<g&&f.push(K_(c,t-d)),W_(f),n.splice(o,s-o+1,...f)}Rt.replaceRange=vg;function W_(n){for(let e=n.length-1;e>=1;e--)typeof n[e]=="string"&&typeof n[e-1]=="string"&&(n[e-1]=n[e-1]+n[e],n.splice(e,1))}function z_(n,e){if(typeof n=="string")return n.slice(0,e);let t=n[0],r=n[2],i=t.slice(0,e),o=typeof r=="number"?r:[r[0],r[1]-(t.length-i.length)];return[i,n[1],o,...n.slice(3)]}function K_(n,e){if(typeof n=="string")return n.slice(e);let t=n[0],r=n[2],i=t.slice(e);e<0&&(e+=t.length);let o=typeof r=="number"?r+e:[r[0]+e,r[1]];return[i,n[1],o,...n.slice(3)]}function oE(n){let e=[],t=0;for(let r of n)e.push(t),t+=typeof r=="string"?r.length:r[0].length;return e}});var B_=b(Mn=>{"use strict";var sE=Mn&&Mn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),aE=Mn&&Mn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sE(e,n,t)};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.buildMappings=Mn.SourceMap=void 0;aE(U_(),Mn);var yg=class{get memo(){if(!this._memo){let t=function(r){let i=new Set;for(let a of e.mappings)i.add(a[r][0]),i.add(a[r][1]);let o=[...i].sort((a,c)=>a-c).map(a=>({offset:a,mappings:new Set}));for(let a of e.mappings){let c=s(a[r][0]),l=s(a[r][1]);for(let d=c;d<=l;d++)o[d].mappings.add(a)}return o;function s(a){let c=0,l=o.length-1;for(;c<=l;){let d=Math.floor((c+l)/2),g=o[d];if(g.offset<a)c=d+1;else if(g.offset>a)l=d-1;else return d}}},e=this;this._memo={sourceRange:t("sourceRange"),generatedRange:t("generatedRange")}}return this._memo}constructor(e){this.mappings=e}toSourceOffset(e,t=!1){for(let r of this.matching(e,"generatedRange","sourceRange",t))return r}toGeneratedOffset(e,t=!1){for(let r of this.matching(e,"sourceRange","generatedRange",t))return r}toSourceOffsets(e,t=!1){return this.matching(e,"generatedRange","sourceRange",t)}toGeneratedOffsets(e,t=!1){return this.matching(e,"sourceRange","generatedRange",t)}*matching(e,t,r,i){let o=this.memo[t];if(o.length===0)return;let{low:s,high:a}=this.binarySearchMemo(o,e),c=new Set;for(let l=s;l<=a;l++)for(let d of o[l].mappings){if(c.has(d))continue;c.add(d);let g=this.matchOffset(e,d[t],d[r],i);g!==void 0&&(yield[g,d])}}matchOffset(e,t,r,i){if(e>=t[0]&&e<=t[1]){let o=r[0]+e-t[0];if(i&&(o+=r[1]-r[0]-(t[1]-t[0])),o>=r[0]&&o<=r[1])return o}}binarySearchMemo(e,t){let r=0,i=e.length-1;for(;r<=i;){let o=Math.floor((r+i)/2),s=e[o];if(s.offset<t)r=o+1;else if(s.offset>t)i=o-1;else{r=o,i=o;break}}return{low:Math.max(Math.min(r,i,e.length-1),0),high:Math.min(Math.max(r,i,0),e.length-1)}}};Mn.SourceMap=yg;function cE(n){let e=0,t=[];for(let r of n)typeof r=="string"?e+=r.length:(t.push({generatedRange:[e,e+r[0].length],source:r[1],sourceRange:typeof r[2]=="number"?[r[2],r[2]+r[0].length]:r[2],data:r[3]}),e+=r[0].length);return t}Mn.buildMappings=cE});var V_=b(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.activate=void 0;var ce=require("vscode"),uE=xs(),G_=_r(),lE=B_(),Cg="volar-virtual-file",_g=ce.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:ce.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}}),bo=ce.window.createTextEditorDecorationType({cursor:"crosshair",light:{backgroundColor:"lightblue"},dark:{backgroundColor:"darkblue"}});async function dE(n,e){class t{async provideHover(m,w,D){let P=s.get(m.uri.toString());if(!P)return;let C=[];for(let[y,S,I]of P){let X=I.toSourceOffset(m.offsetAt(w));X&&C.push({uri:y,mapping:X})}if(C.length!==0)return new ce.Hover(C.map(y=>[y.uri,"","","```json",JSON.stringify(y.mapping,null,2),"```"].join(`
`)))}}let r=[];r.push(ce.languages.registerHoverProvider({scheme:Cg},new t));let i=new Map,o=new Map,s=new Map,a=new ce.EventEmitter,c=new Map,l,d;return r.push(ce.window.onDidChangeActiveTextEditor(g)),r.push(ce.window.onDidChangeTextEditorSelection(g)),r.push(ce.window.onDidChangeVisibleTextEditors(g)),r.push(ce.workspace.onDidChangeTextDocument(p=>{if(i.has(p.document.uri.toString())){let m=i.get(p.document.uri.toString());clearTimeout(l),l=setTimeout(()=>{m?.forEach(w=>{a.fire(ce.Uri.parse(w))})},100)}})),r.push(ce.workspace.registerTextDocumentContentProvider(Cg,{onDidChange:a.event,async provideTextDocumentContent(p){let m=p.with({scheme:"file"}).fsPath,w=o.get(p.toString());if(w){let D=await e.sendRequest(G_.GetVirtualFileRequest.type,{sourceFileUri:w.document.uri.toString(),virtualFileName:m});return s.set(p.toString(),[]),Object.entries(D.mappings).forEach(([P,C])=>{let y=ce.window.visibleTextEditors.find(S=>S.document.uri.toString()===P);y&&(s.get(p.toString())?.push([y.document.uri.toString(),y.document.version,new lE.SourceMap(C)]),i.has(P)||i.set(P,new Set),i.get(P)?.add(p.toString()))}),c.set(p.toString(),uE.TextDocument.create("","",0,D.content)),clearTimeout(d),d=setTimeout(g,100),D.content}}})),r.push(ce.commands.registerCommand(n,async()=>{let p=ce.window.activeTextEditor;if(p){let w=(await e.sendRequest(G_.GetVirtualFileNamesRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(p.document))).map(D=>ce.Uri.file(D).with({scheme:Cg}));i.set(p.document.uri.toString(),new Set(w.map(D=>D.toString())));for(let D of w)o.set(D.toString(),p),ce.window.showTextDocument(D,{viewColumn:ce.ViewColumn.Two,preview:!1})}})),ce.Disposable.from(...r);function g(){for(let[p,m]of s){let w=ce.window.visibleTextEditors.find(C=>C.document.uri.toString()===p),D=[],P=[];if(w){for(let[C,y,S]of m){let I=ce.window.visibleTextEditors.find(X=>X.document.uri.toString()===C);if(I&&I.document.version===y){let X=S.mappings.map($=>new ce.Range(I.document.positionAt($.sourceRange[0]),I.document.positionAt($.sourceRange[1])));if(I.setDecorations(_g,X),D=D.concat(S.mappings.map($=>new ce.Range(f(p,$.generatedRange[0]),f(p,$.generatedRange[1])))),ce.window.activeTextEditor){let $=ce.window.activeTextEditor.selection,Y=ce.window.activeTextEditor.document.offsetAt($.start);if(I.setDecorations(bo,[]),ce.window.activeTextEditor===I){let Z=[...S.toGeneratedOffsets(Y)];I.setDecorations(bo,Z.map(pe=>new ce.Range(I.document.positionAt(pe[1].sourceRange[0]),I.document.positionAt(pe[1].sourceRange[1])))),P=P.concat(Z.map(pe=>new ce.Range(f(p,pe[1].generatedRange[0]),f(p,pe[1].generatedRange[1]))));let Ae=Z.sort((pe,st)=>pe[1].generatedRange[0]-st[1].generatedRange[0])[0];Ae&&w.revealRange(new ce.Range(f(p,Ae[1].generatedRange[0]),f(p,Ae[1].generatedRange[1])))}else if(ce.window.activeTextEditor===w){let Z=[...S.toSourceOffsets(Y)];I.setDecorations(bo,Z.map(pe=>new ce.Range(I.document.positionAt(pe[1].sourceRange[0]),I.document.positionAt(pe[1].sourceRange[1])))),P=P.concat(Z.map(pe=>new ce.Range(f(p,pe[1].generatedRange[0]),f(p,pe[1].generatedRange[1]))));let Ae=Z.sort((pe,st)=>pe[1].sourceRange[0]-st[1].sourceRange[0])[0];Ae&&I.revealRange(new ce.Range(I.document.positionAt(Ae[1].sourceRange[0]),I.document.positionAt(Ae[1].sourceRange[1])))}}else I.setDecorations(bo,[])}}w.setDecorations(_g,D),w.setDecorations(bo,P)}else for(let[C]of m){let y=ce.window.visibleTextEditors.find(S=>S.document.uri.toString()===C);y&&(y.setDecorations(_g,[]),y.setDecorations(bo,[]))}}}function f(p,m){let D=c.get(p).positionAt(m);return new ce.Position(D.line,D.character)}}nu.activate=dE});var X_=b(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.activate=void 0;var wg=require("vscode"),fE=_r();async function hE(n,e){return wg.commands.registerCommand(n,()=>{wg.window.activeTextEditor&&e.sendNotification(fE.WriteVirtualFilesNotification.type,e.code2ProtocolConverter.asTextDocumentIdentifier(wg.window.activeTextEditor.document))})}ru.activate=hE});var Sg=b(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});var bg;function Dg(){if(bg===void 0)throw new Error("No runtime abstraction layer installed");return bg}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");bg=t}n.install=e})(Dg||(Dg={}));Rg.default=Dg});var Pg=b(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.config=je.loadMessageBundle=je.localize=je.format=je.setPseudo=je.isPseudo=je.isDefined=je.BundleFormat=je.MessageFormat=void 0;var Q_=Sg(),pE;(function(n){n.file="file",n.bundle="bundle",n.both="both"})(pE=je.MessageFormat||(je.MessageFormat={}));var gE;(function(n){n.standalone="standalone",n.languagePack="languagePack"})(gE=je.BundleFormat||(je.BundleFormat={}));var J_;(function(n){function e(t){var r=t;return r&&Tg(r.key)&&Tg(r.comment)}n.is=e})(J_||(J_={}));function Tg(n){return typeof n<"u"}je.isDefined=Tg;je.isPseudo=!1;function mE(n){je.isPseudo=n}je.setPseudo=mE;function Y_(n,e){var t;return je.isPseudo&&(n="\uFF3B"+n.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?t=n:t=n.replace(/\{(\d+)\}/g,function(r,i){var o=i[0],s=e[o],a=r;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),t}je.format=Y_;function vE(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return Y_(e,t)}je.localize=vE;function yE(n){return(0,Q_.default)().loadMessageBundle(n)}je.loadMessageBundle=yE;function CE(n){return(0,Q_.default)().config(n)}je.config=CE});var rw=b(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.config=er.loadMessageBundle=er.BundleFormat=er.MessageFormat=void 0;var Ln=require("path"),yn=require("fs"),_E=Sg(),Wt=Pg(),ew=Pg();Object.defineProperty(er,"MessageFormat",{enumerable:!0,get:function(){return ew.MessageFormat}});Object.defineProperty(er,"BundleFormat",{enumerable:!0,get:function(){return ew.BundleFormat}});var tw=Object.prototype.toString;function wE(n){return tw.call(n)==="[object Number]"}function wr(n){return tw.call(n)==="[object String]"}function bE(n){return n===!0||n===!1}function Do(n){return JSON.parse(yn.readFileSync(n,"utf8"))}var iu,ue;function DE(){if(ue={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:Wt.MessageFormat.bundle},wr(process.env.VSCODE_NLS_CONFIG))try{var n=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0;if(n.availableLanguages){var t=n.availableLanguages["*"];wr(t)&&(e=t)}if(wr(n.locale)&&(ue.locale=n.locale.toLowerCase()),e===void 0?ue.language=ue.locale:e!=="en"&&(ue.language=e),bE(n._languagePackSupport)&&(ue.languagePackSupport=n._languagePackSupport),wr(n._cacheRoot)&&(ue.cacheRoot=n._cacheRoot),wr(n._languagePackId)&&(ue.languagePackId=n._languagePackId),wr(n._translationsConfigFile)){ue.translationsConfigFile=n._translationsConfigFile;try{ue.translationsConfig=Do(ue.translationsConfigFile)}catch{if(n._corruptedFile){var r=Ln.dirname(n._corruptedFile);yn.exists(r,function(o){o&&yn.writeFile(n._corruptedFile,"corrupted","utf8",function(s){console.error(s)})})}}}}catch{}(0,Wt.setPseudo)(ue.locale==="pseudo"),iu=Object.create(null)}DE();function RE(){return ue.languagePackSupport===!0&&ue.cacheRoot!==void 0&&ue.languagePackId!==void 0&&ue.translationsConfigFile!==void 0&&ue.translationsConfig!==void 0}function qg(n){return function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(wE(e)){if(e>=n.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack));return}return(0,Wt.format)(n[e],r)}else{if(wr(t))return console.warn("Message ".concat(t," didn't get externalized correctly.")),(0,Wt.format)(t,r);console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}}function SE(n){var e;if(ue.cacheLanguageResolution&&e)e=e;else{if(Wt.isPseudo||!ue.language)e=".nls.json";else for(var t=ue.language;t;){var r=".nls."+t+".json";if(yn.existsSync(n+r)){e=r;break}else{var i=t.lastIndexOf("-");i>0?t=t.substring(0,i):(e=".nls.json",t=null)}}ue.cacheLanguageResolution&&(e=e)}return n+e}function TE(n){for(var e=ue.language;e;){var t=Ln.join(n,"nls.bundle.".concat(e,".json"));if(yn.existsSync(t))return t;var r=e.lastIndexOf("-");r>0?e=e.substring(0,r):e=void 0}if(e===void 0){var t=Ln.join(n,"nls.bundle.json");if(yn.existsSync(t))return t}}function PE(n){var e=Do(Ln.join(n,"nls.metadata.json")),t=Object.create(null);for(var r in e){var i=e[r];t[r]=i.messages}return t}function qE(n,e){var t=ue.translationsConfig[n.id];if(!!t){var r=Do(t).contents,i=Do(Ln.join(e,"nls.metadata.json")),o=Object.create(null);for(var s in i){var a=i[s],c=r["".concat(n.outDir,"/").concat(s)];if(c){for(var l=[],d=0;d<a.keys.length;d++){var g=a.keys[d],f=wr(g)?g:g.key,p=c[f];p===void 0&&(p=a.messages[d]),l.push(p)}o[s]=l}else o[s]=a.messages}return o}}function xE(n){var e=new Date;yn.utimes(n,e,e,function(){})}function xg(n,e){return iu[n]=e,e}function kE(n,e){var t,r=Ln.join(ue.cacheRoot,"".concat(n.id,"-").concat(n.hash,".json")),i=!1,o=!1;try{return t=JSON.parse(yn.readFileSync(r,{encoding:"utf8",flag:"r"})),xE(r),t}catch(s){if(s.code==="ENOENT")o=!0;else if(s instanceof SyntaxError)console.log("Syntax error parsing message bundle: ".concat(s.message,".")),yn.unlink(r,function(a){a&&console.error("Deleting corrupted bundle ".concat(r," failed."))}),i=!0;else throw s}if(t=qE(n,e),!t||i)return t;if(o)try{yn.writeFileSync(r,JSON.stringify(t),{encoding:"utf8",flag:"wx"})}catch(s){if(s.code==="EEXIST")return t;throw s}return t}function Z_(n){try{return PE(n)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function EE(n,e){var t;if(RE())try{t=kE(n,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!t){if(ue.languagePackSupport)return Z_(e);var r=TE(e);if(r)try{return Do(r)}catch(i){console.log("Loading in the box message bundle failed.",i)}t=Z_(e)}return t}function OE(n){for(var e,t=Ln.dirname(n);e=Ln.join(t,"nls.metadata.header.json"),!yn.existsSync(e);){var r=Ln.dirname(t);if(r===t){e=void 0;break}else t=r}return e}function kg(n){if(!n)return Wt.localize;var e=Ln.extname(n);if(e&&(n=n.substr(0,n.length-e.length)),ue.messageFormat===Wt.MessageFormat.both||ue.messageFormat===Wt.MessageFormat.bundle){var t=OE(n);if(t){var r=Ln.dirname(t),i=iu[r];if(i===void 0)try{var o=JSON.parse(yn.readFileSync(t,"utf8"));try{var s=EE(o,r);i=xg(r,s?{header:o,nlsBundle:s}:null)}catch(d){console.error("Failed to load nls bundle",d),i=xg(r,null)}}catch(d){console.error("Failed to read header file",d),i=xg(r,null)}if(i){var a=n.substr(r.length+1).replace(/\\/g,"/"),c=i.nlsBundle[a];return c===void 0?(console.error("Messages for file ".concat(n," not found. See console for details.")),function(){return"Messages not found."}):qg(c)}}}if(ue.messageFormat===Wt.MessageFormat.both||ue.messageFormat===Wt.MessageFormat.file)try{var l=Do(SE(n));return Array.isArray(l)?qg(l):(0,Wt.isDefined)(l.messages)&&(0,Wt.isDefined)(l.keys)?qg(l.messages):(console.error("String bundle '".concat(n,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(d){d.code!=="ENOENT"&&console.error("Failed to load single file bundle",d)}return console.error("Failed to load message bundle for file ".concat(n)),function(){return"Failed to load message bundle. See console for details."}}er.loadMessageBundle=kg;function nw(n){return n&&(wr(n.locale)&&(ue.locale=n.locale.toLowerCase(),ue.language=ue.locale,iu=Object.create(null)),n.messageFormat!==void 0&&(ue.messageFormat=n.messageFormat),n.bundleFormat===Wt.BundleFormat.standalone&&ue.languagePackSupport===!0&&(ue.languagePackSupport=!1)),(0,Wt.setPseudo)(ue.locale==="pseudo"),kg}er.config=nw;_E.default.install(Object.freeze({loadMessageBundle:kg,config:nw}))});var iw=b(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.activate=void 0;var Pi=require("vscode"),FE=rw(),NE=_r(),IE=FE.loadMessageBundle();async function ME(n,e){return Pi.commands.registerCommand(n,async t=>{await Pi.window.withProgress({location:Pi.ProgressLocation.Window,title:IE("progress.title","Finding file references")},async r=>{if(!t){let c=Pi.window.activeTextEditor;if(!c)return;t=c.document.uri}let i=await e.sendRequest(NE.FindFileReferenceRequest.type,{textDocument:{uri:t.toString()}});if(!i)return;let o=i.map(c=>e.protocol2CodeConverter.asLocation(c)),s=Pi.workspace.getConfiguration("references"),a=s.inspect("preferredLocation");await s.update("preferredLocation","view");try{await Pi.commands.executeCommand("editor.action.showReferences",t,new Pi.Position(0,0),o)}finally{await s.update("preferredLocation",a?.workspaceFolderValue??a?.workspaceValue)}})})}ou.activate=ME});var ow=b(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.activate=void 0;var Eg=require("vscode"),LE=_r();async function jE(n,e){return Eg.commands.registerCommand(n,()=>{if(Eg.window.activeTextEditor)for(let t of e)t.sendNotification(LE.ReloadProjectNotification.type,t.code2ProtocolConverter.asTextDocumentIdentifier(Eg.window.activeTextEditor.document))})}su.activate=jE});var sw=b(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.activate=void 0;var AE=require("vscode"),HE=_r();async function $E(n,e){return AE.commands.registerCommand(n,async()=>{for(let t of e)await t.sendNotification(HE.ReportStats.type),t.outputChannel.show()})}au.activate=$E});var Og=b((G1,aw)=>{aw.exports=require("path")});var cw=b(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.activate=void 0;var jn=require("vscode"),WE=_r(),zE=Og();async function KE(n,e,t){let r=[],i=jn.window.createStatusBarItem(jn.StatusBarAlignment.Right),o;s(),jn.window.onDidChangeActiveTextEditor(s,void 0,r),r.push(jn.commands.registerCommand(n,async()=>{if(o){let a=await jn.workspace.openTextDocument(o);await jn.window.showTextDocument(a)}})),r.push(...r);async function s(){if(!jn.window.activeTextEditor||!t(jn.window.activeTextEditor.document))i.hide();else{let a=await e.sendRequest(WE.GetMatchTsConfigRequest.type,e.code2ProtocolConverter.asTextDocumentIdentifier(jn.window.activeTextEditor.document));a?.uri?(o=jn.Uri.parse(a.uri),i.text=zE.relative(jn.workspace.rootPath||"/",o.fsPath),i.command=n):(i.text="No tsconfig",i.command=void 0),i.show()}}}cu.activate=KE});var lw=b(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.activate=void 0;var Fg=require("vscode"),UE=xs(),uw=_r();async function BE(n,e,t){let r=[];return i(),r.push(e.onDidChangeState(()=>{e.state===UE.State.Running&&i()})),t&&console.log("skips:",n.globalState.keys().filter(o=>o.startsWith(t)).length),Fg.Disposable.from(...r);function i(){r.push(e.onRequest(uw.FsReadFileRequest.type,async o=>{if(t&&o.startsWith(t)&&n.globalState.get(o)===!1)return;let s=e.protocol2CodeConverter.asUri(o);try{return await Fg.workspace.fs.readFile(s)}catch{t&&o.startsWith(t)&&n.globalState.update(o,!1)}})),r.push(e.onRequest(uw.FsReadDirectoryRequest.type,async o=>{try{if(t&&o.startsWith(t))return[];let s=e.protocol2CodeConverter.asUri(o),a=await Fg.workspace.fs.readDirectory(s);return a=a.filter(([c])=>!c.startsWith(".")),a}catch{return[]}}))}}uu.activate=BE});var Ng=b(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.quickPick=void 0;var dw=require("vscode");function GE(n,e){return new Promise(t=>{let r=dw.window.createQuickPick(),i=[];for(let o of Array.isArray(n)?n:[n]){let s=Object.values(o);if(s.length){i.length&&i.push({label:"",kind:dw.QuickPickItemKind.Separator});for(let a of s)a&&i.push(a)}}r.items=i,r.placeholder=e,r.onDidChangeSelection(o=>{if(o[0])for(let s of Array.isArray(n)?n:[n])for(let a in s){let c=s[a];if(o[0]===c){t(a),r.hide();break}}}),r.onDidHide(()=>{r.dispose(),t(void 0)}),r.show()})}lu.quickPick=GE});var pw=b(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.getTsdk=Ro.activate=void 0;var fu=Og(),ot=require("vscode"),VE=Ng(),Ms="node_modules/typescript/lib";async function XE(n,e,t,r,i,o,s="https://unpkg.com/"){let a=[],c=ot.window.createStatusBarItem(ot.StatusBarAlignment.Right);return c.command=n,a.push({dispose:()=>c.dispose()}),a.push(ot.commands.registerCommand(n,l)),ot.workspace.onDidChangeConfiguration(d,void 0,a),ot.window.onDidChangeActiveTextEditor(g,void 0,a),g(),ot.Disposable.from(...a);async function l(){let p=await du(e),m=hw(),w=await fw(),D=await(0,VE.quickPick)([{useVSCodeTsdk:{label:(p.isWorkspacePath?"":"\u2022 ")+"Use VS Code's Version",description:w.version,detail:w.isWeb?w.path.replace("/node_modules/",s):void 0},useConfigWorkspaceTsdk:m&&!w.isWeb?{label:(p.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:await Ls(Ig(m)??"/")??"Could not load the TypeScript version at this path",detail:m}:void 0,useDefaultWorkspaceTsdk:m!==Ms&&!w.isWeb?{label:(p.isWorkspacePath?"\u2022 ":"")+"Use Workspace Version",description:await Ls(Ig(Ms)??"/")??"Could not load the TypeScript version at this path",detail:Ms}:void 0},...o?[]:[{takeover:{label:"What is Takeover Mode?"}}]]);if(D===void 0)return;if(D==="takeover"){ot.env.openExternal(ot.Uri.parse("https://vuejs.org/guide/typescript/overview.html#volar-takeover-mode"));return}D==="useDefaultWorkspaceTsdk"&&await ot.workspace.getConfiguration("typescript").update("tsdk",Ms);let P=D==="useConfigWorkspaceTsdk"||D==="useDefaultWorkspaceTsdk";P!==Mg(e)&&(e.workspaceState.update("typescript.useWorkspaceTsdk",P),f()),g()}function d(p){p.affectsConfiguration("typescript.tsdk")&&Mg(e)&&f()}async function g(){if(!ot.window.activeTextEditor||!r(ot.window.activeTextEditor.document))c.hide();else{let p=(await du(e)).version;c.text=p??"x.x.x",c.text=i(c.text),c.show()}}async function f(){let p=await du(e),m={...t.clientOptions.initializationOptions,typescript:p};t.clientOptions.initializationOptions=m,ot.commands.executeCommand("volar.action.restartServer")}}Ro.activate=XE;async function du(n){if(Mg(n)){let t=Ig(hw()||Ms);if(t)return{tsdk:t,version:await Ls(t),isWorkspacePath:!0}}let e=await fw();return{tsdk:e.path,version:e.version,isWorkspacePath:!1}}Ro.getTsdk=du;function Ig(n){if(fu.isAbsolute(n))try{if(require.resolve("./typescript.js",{paths:[n]}))return n.replace(/\\/g,"/")}catch{}let e=(ot.workspace.workspaceFolders??[]).map(t=>t.uri.fsPath);for(let t of e){let r=fu.join(t,n);try{if(require.resolve("./typescript.js",{paths:[r]}))return r.replace(/\\/g,"/")}catch{}}}async function fw(){let n=ot.extensions.getExtension("ms-vscode.vscode-typescript-next");if(n){let t=fu.join(n.extensionPath,"node_modules/typescript/lib").replace(/\\/g,"/");return{path:t,version:await Ls(t),isWeb:!1}}if(ot.env.appRoot){let t=fu.join(ot.env.appRoot,"extensions/node_modules/typescript/lib").replace(/\\/g,"/");return{path:t,version:await Ls(t),isWeb:!1}}let e=require("typescript/package.json").version;return{path:`/node_modules/typescript@${e}/lib`,version:e,isWeb:!0}}function hw(){return ot.workspace.getConfiguration("typescript").get("tsdk")}function Mg(n){return n.workspaceState.get("typescript.useWorkspaceTsdk",!1)}async function Ls(n){let i=n.toString().split("/").slice(0,-1).join("/")+"/package.json",o=await JE(i);if(o===void 0)return;let s=null;try{s=JSON.parse(o)}catch{return}if(!(!s||!s.version))return s.version}async function JE(n){try{let e=await ot.workspace.fs.readFile(ot.Uri.file(n));return new TextDecoder("utf8").decode(e)}catch{}}});var hu=b(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.parseServerCommand=Pe.middleware=Pe.takeOverModeActive=Pe.getTsdk=Pe.activateTsVersionStatusItem=Pe.activateServerSys=Pe.activateTsConfigStatusItem=Pe.activateServerStats=Pe.activateReloadProjects=Pe.activateFindFileReferences=Pe.activateWriteVirtualFiles=Pe.activateShowVirtualFiles=Pe.activateAutoInsertion=void 0;var An=require("vscode"),QE=j_();Object.defineProperty(Pe,"activateAutoInsertion",{enumerable:!0,get:function(){return QE.activate}});var YE=V_();Object.defineProperty(Pe,"activateShowVirtualFiles",{enumerable:!0,get:function(){return YE.activate}});var ZE=X_();Object.defineProperty(Pe,"activateWriteVirtualFiles",{enumerable:!0,get:function(){return ZE.activate}});var eO=iw();Object.defineProperty(Pe,"activateFindFileReferences",{enumerable:!0,get:function(){return eO.activate}});var tO=ow();Object.defineProperty(Pe,"activateReloadProjects",{enumerable:!0,get:function(){return tO.activate}});var nO=sw();Object.defineProperty(Pe,"activateServerStats",{enumerable:!0,get:function(){return nO.activate}});var rO=cw();Object.defineProperty(Pe,"activateTsConfigStatusItem",{enumerable:!0,get:function(){return rO.activate}});var iO=lw();Object.defineProperty(Pe,"activateServerSys",{enumerable:!0,get:function(){return iO.activate}});var gw=pw();Object.defineProperty(Pe,"activateTsVersionStatusItem",{enumerable:!0,get:function(){return gw.activate}});Object.defineProperty(Pe,"getTsdk",{enumerable:!0,get:function(){return gw.getTsdk}});function oO(n){return An.workspace.getConfiguration("volar").get("takeOverMode.extension")===n.extension.id?!An.extensions.getExtension("vscode.typescript-language-features"):!1}Pe.takeOverModeActive=oO;Pe.middleware={async provideHover(n,e,t,r){let i=await r(n,e,t);for(let o of i?.contents??[])o instanceof An.MarkdownString&&(o.isTrusted=!0,o.supportHtml=!0);return i},async provideCodeActions(n,e,t,r,i){let o=await i(n,e,t,r);return o=o?.map(s=>s instanceof An.CodeAction?(s.command&&(s.command=So(s.command)),s):So(s)),o},async resolveCodeAction(n,e,t){let r=await t(n,e);return r?.command&&(r.command=So(r.command)),r},async provideCodeLenses(n,e,t){let r=await t(n,e);return r=r?.map(i=>(i.command&&(i.command=So(i.command)),i)),r},async resolveCodeLens(n,e,t){let r=await t(n,e);return r?.command&&(r.command=So(r.command)),r}};function So(n){return n.command==="editor.action.rename"&&n.arguments?{...n,arguments:[[An.Uri.parse(n.arguments[0]),new An.Position(n.arguments[1].line,n.arguments[1].character)]]}:n.command==="editor.action.showReferences"&&n.arguments?{...n,arguments:[An.Uri.parse(n.arguments[0]),new An.Position(n.arguments[1].line,n.arguments[1].character),n.arguments[2].map(e=>new An.Location(An.Uri.parse(e.uri),new An.Range(e.range.start.line,e.range.start.character,e.range.end.line,e.range.end.character)))]}:n}Pe.parseServerCommand=So});var mw=b(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.ParseSFCRequest=vt.GetConvertAttrCasingEditsRequest=vt.GetConvertTagCasingEditsRequest=vt.DetectNameCasingRequest=vt.GetComponentMeta=void 0;var js=H(),sO;(function(n){n.type=new js.RequestType("vue/componentMeta")})(sO=vt.GetComponentMeta||(vt.GetComponentMeta={}));var aO;(function(n){n.type=new js.RequestType("vue/detectTagCasing")})(aO=vt.DetectNameCasingRequest||(vt.DetectNameCasingRequest={}));var cO;(function(n){n.type=new js.RequestType("vue/convertTagNameCasing")})(cO=vt.GetConvertTagCasingEditsRequest||(vt.GetConvertTagCasingEditsRequest={}));var uO;(function(n){n.type=new js.RequestType("vue/convertPropNameCasing")})(uO=vt.GetConvertAttrCasingEditsRequest||(vt.GetConvertAttrCasingEditsRequest={}));var lO;(function(n){n.type=new js.RequestType("vue/parseSfc")})(lO=vt.ParseSFCRequest||(vt.ParseSFCRequest={}))});var yw=b(vw=>{"use strict";Object.defineProperty(vw,"__esModule",{value:!0})});var _w=b(Cw=>{"use strict";Object.defineProperty(Cw,"__esModule",{value:!0})});var bw=b(zt=>{"use strict";var dO=zt&&zt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ww=zt&&zt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&dO(e,n,t)};Object.defineProperty(zt,"__esModule",{value:!0});zt.AttrNameCasing=zt.TagNameCasing=void 0;var fO;(function(n){n[n.Kebab=0]="Kebab",n[n.Pascal=1]="Pascal"})(fO=zt.TagNameCasing||(zt.TagNameCasing={}));var hO;(function(n){n[n.Kebab=0]="Kebab",n[n.Camel=1]="Camel"})(hO=zt.AttrNameCasing||(zt.AttrNameCasing={}));ww(gg(),zt);ww(_w(),zt)});var Kr=b(Hn=>{"use strict";var pO=Hn&&Hn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),As=Hn&&Hn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pO(e,n,t)};Object.defineProperty(Hn,"__esModule",{value:!0});As(mw(),Hn);As(yw(),Hn);As(Kp(),Hn);As(Up(),Hn);As(bw(),Hn)});var Rw=b(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.register=void 0;var br=require("vscode"),gO=Kr(),Dw="vue-component-meta";async function mO(n,e){let t=new Map,r=new Map,i=new br.EventEmitter,o;n.subscriptions.push(br.workspace.onDidChangeTextDocument(s=>{let a=t.get(s.document.uri.toString());a&&(clearTimeout(o),o=setTimeout(()=>{i.fire(br.Uri.parse(a))},100))})),n.subscriptions.push(br.workspace.registerTextDocumentContentProvider(Dw,{onDidChange:i.event,async provideTextDocumentContent(s){let a=r.get(s.toString());if(a){let c=await e.sendRequest(gO.GetComponentMeta.type,{uri:a.document.uri.toString()});return JSON.stringify(c,void 0,"	")}}})),n.subscriptions.push(br.commands.registerCommand("volar.action.showComponentMeta",async()=>{let s=br.window.activeTextEditor;if(s){let a=s.document.uri.with({scheme:Dw}).toString()+".meta.json";t.set(s.document.uri.toString(),a),r.set(a,s),br.window.showTextDocument(br.Uri.parse(a),{viewColumn:br.ViewColumn.Two,preview:!1})}}))}pu.register=mO});var Tw=b((oL,Sw)=>{var vO=Mr(),yO=(n,e)=>{let t=vO(n,e);return t?t.version:null};Sw.exports=yO});var qw=b((sL,Pw)=>{var CO=Mr(),_O=(n,e)=>{let t=CO(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Pw.exports=_O});var Ew=b((aL,kw)=>{var xw=Dt(),wO=(n,e,t,r)=>{typeof t=="string"&&(r=t,t=void 0);try{return new xw(n instanceof xw?n.version:n,t).inc(e,r).version}catch{return null}};kw.exports=wO});var Nw=b((cL,Fw)=>{var Ow=Mr(),bO=Dc(),DO=(n,e)=>{if(bO(n,e))return null;{let t=Ow(n),r=Ow(e),i=t.prerelease.length||r.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in t)if((a==="major"||a==="minor"||a==="patch")&&t[a]!==r[a])return o+a;return s}};Fw.exports=DO});var Mw=b((uL,Iw)=>{var RO=Dt(),SO=(n,e)=>new RO(n,e).major;Iw.exports=SO});var jw=b((lL,Lw)=>{var TO=Dt(),PO=(n,e)=>new TO(n,e).minor;Lw.exports=PO});var Hw=b((dL,Aw)=>{var qO=Dt(),xO=(n,e)=>new qO(n,e).patch;Aw.exports=xO});var Ww=b((fL,$w)=>{var kO=Mr(),EO=(n,e)=>{let t=kO(n,e);return t&&t.prerelease.length?t.prerelease:null};$w.exports=EO});var Kw=b((hL,zw)=>{var OO=hn(),FO=(n,e,t)=>OO(e,n,t);zw.exports=FO});var Bw=b((pL,Uw)=>{var NO=hn(),IO=(n,e)=>NO(n,e,!0);Uw.exports=IO});var gu=b((gL,Vw)=>{var Gw=Dt(),MO=(n,e,t)=>{let r=new Gw(n,t),i=new Gw(e,t);return r.compare(i)||r.compareBuild(i)};Vw.exports=MO});var Jw=b((mL,Xw)=>{var LO=gu(),jO=(n,e)=>n.sort((t,r)=>LO(t,r,e));Xw.exports=jO});var Yw=b((vL,Qw)=>{var AO=gu(),HO=(n,e)=>n.sort((t,r)=>AO(r,t,e));Qw.exports=HO});var eb=b((yL,Zw)=>{var $O=Dt(),WO=Mr(),{re:mu,t:vu}=Ci(),zO=(n,e)=>{if(n instanceof $O)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(mu[vu.COERCE]);else{let r;for(;(r=mu[vu.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&&(t=r),mu[vu.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;mu[vu.COERCERTL].lastIndex=-1}return t===null?null:WO(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};Zw.exports=zO});var nb=b((CL,tb)=>{var KO=pn(),UO=(n,e)=>new KO(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));tb.exports=UO});var ib=b((_L,rb)=>{var BO=Dt(),GO=pn(),VO=(n,e,t)=>{let r=null,i=null,o=null;try{o=new GO(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===-1)&&(r=s,i=new BO(r,t))}),r};rb.exports=VO});var sb=b((wL,ob)=>{var XO=Dt(),JO=pn(),QO=(n,e,t)=>{let r=null,i=null,o=null;try{o=new JO(e,t)}catch{return null}return n.forEach(s=>{o.test(s)&&(!r||i.compare(s)===1)&&(r=s,i=new XO(r,t))}),r};ob.exports=QO});var ub=b((bL,cb)=>{var Lg=Dt(),YO=pn(),ab=Ts(),ZO=(n,e)=>{n=new YO(n,e);let t=new Lg("0.0.0");if(n.test(t)||(t=new Lg("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=>{let a=new Lg(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||ab(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!t||ab(t,o))&&(t=o)}return t&&n.test(t)?t:null};cb.exports=ZO});var db=b((DL,lb)=>{var eF=pn(),tF=(n,e)=>{try{return new eF(n,e).range||"*"}catch{return null}};lb.exports=tF});var yu=b((RL,gb)=>{var nF=Dt(),pb=qs(),{ANY:rF}=pb,iF=pn(),oF=vo(),fb=Ts(),hb=Sc(),sF=Tc(),aF=Rc(),cF=(n,e,t,r)=>{n=new nF(n,r),e=new iF(e,r);let i,o,s,a,c;switch(t){case">":i=fb,o=sF,s=hb,a=">",c=">=";break;case"<":i=hb,o=aF,s=fb,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(oF(n,e,r))return!1;for(let l=0;l<e.set.length;++l){let d=e.set[l],g=null,f=null;if(d.forEach(p=>{p.semver===rF&&(p=new pb(">=0.0.0")),g=g||p,f=f||p,i(p.semver,g.semver,r)?g=p:s(p.semver,f.semver,r)&&(f=p)}),g.operator===a||g.operator===c||(!f.operator||f.operator===a)&&o(n,f.semver))return!1;if(f.operator===c&&s(n,f.semver))return!1}return!0};gb.exports=cF});var vb=b((SL,mb)=>{var uF=yu(),lF=(n,e,t)=>uF(n,e,">",t);mb.exports=lF});var Cb=b((TL,yb)=>{var dF=yu(),fF=(n,e,t)=>dF(n,e,"<",t);yb.exports=fF});var bb=b((PL,wb)=>{var _b=pn(),hF=(n,e,t)=>(n=new _b(n,t),e=new _b(e,t),n.intersects(e));wb.exports=hF});var Rb=b((qL,Db)=>{var pF=vo(),gF=hn();Db.exports=(n,e,t)=>{let r=[],i=null,o=null,s=n.sort((d,g)=>gF(d,g,t));for(let d of s)pF(d,e,t)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let a=[];for(let[d,g]of r)d===g?a.push(d):!g&&d===s[0]?a.push("*"):g?d===s[0]?a.push(`<=${g}`):a.push(`${d} - ${g}`):a.push(`>=${d}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var xb=b((xL,qb)=>{var Sb=pn(),Cu=qs(),{ANY:jg}=Cu,Hs=vo(),Ag=hn(),mF=(n,e,t={})=>{if(n===e)return!0;n=new Sb(n,t),e=new Sb(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=vF(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},vF=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===jg){if(e.length===1&&e[0].semver===jg)return!0;t.includePrerelease?n=[new Cu(">=0.0.0-0")]:n=[new Cu(">=0.0.0")]}if(e.length===1&&e[0].semver===jg){if(t.includePrerelease)return!0;e=[new Cu(">=0.0.0")]}let r=new Set,i,o;for(let p of n)p.operator===">"||p.operator===">="?i=Tb(i,p,t):p.operator==="<"||p.operator==="<="?o=Pb(o,p,t):r.add(p.semver);if(r.size>1)return null;let s;if(i&&o){if(s=Ag(i.semver,o.semver,t),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of r){if(i&&!Hs(p,String(i),t)||o&&!Hs(p,String(o),t))return null;for(let m of e)if(!Hs(p,String(m),t))return!1;return!0}let a,c,l,d,g=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,f=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;g&&g.prerelease.length===1&&o.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(let p of e){if(d=d||p.operator===">"||p.operator===">=",l=l||p.operator==="<"||p.operator==="<=",i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(a=Tb(i,p,t),a===p&&a!==i)return!1}else if(i.operator===">="&&!Hs(i.semver,String(p),t))return!1}if(o){if(g&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===g.major&&p.semver.minor===g.minor&&p.semver.patch===g.patch&&(g=!1),p.operator==="<"||p.operator==="<="){if(c=Pb(o,p,t),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Hs(o.semver,String(p),t))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&l&&!o&&s!==0||o&&d&&!i&&s!==0||f||g)},Tb=(n,e,t)=>{if(!n)return e;let r=Ag(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},Pb=(n,e,t)=>{if(!n)return e;let r=Ag(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};qb.exports=mF});var Ob=b((kL,Eb)=>{var Hg=Ci(),yF=ws(),CF=Dt(),kb=Sp(),_F=Mr(),wF=Tw(),bF=qw(),DF=Ew(),RF=Nw(),SF=Mw(),TF=jw(),PF=Hw(),qF=Ww(),xF=hn(),kF=Kw(),EF=Bw(),OF=gu(),FF=Jw(),NF=Yw(),IF=Ts(),MF=Sc(),LF=Dc(),jF=kp(),AF=Rc(),HF=Tc(),$F=Ep(),WF=eb(),zF=qs(),KF=pn(),UF=vo(),BF=nb(),GF=ib(),VF=sb(),XF=ub(),JF=db(),QF=yu(),YF=vb(),ZF=Cb(),eN=bb(),tN=Rb(),nN=xb();Eb.exports={parse:_F,valid:wF,clean:bF,inc:DF,diff:RF,major:SF,minor:TF,patch:PF,prerelease:qF,compare:xF,rcompare:kF,compareLoose:EF,compareBuild:OF,sort:FF,rsort:NF,gt:IF,lt:MF,eq:LF,neq:jF,gte:AF,lte:HF,cmp:$F,coerce:WF,Comparator:zF,Range:KF,satisfies:UF,toComparators:BF,maxSatisfying:GF,minSatisfying:VF,minVersion:XF,validRange:JF,outside:QF,gtr:YF,ltr:ZF,intersects:eN,simplifyRange:tN,subset:nN,SemVer:CF,re:Hg.re,src:Hg.src,tokens:Hg.t,SEMVER_SPEC_VERSION:yF.SEMVER_SPEC_VERSION,compareIdentifiers:kb.compareIdentifiers,rcompareIdentifiers:kb.rcompareIdentifiers}});var qi=b(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.config=void 0;var rN=require("vscode"),Ur=()=>rN.workspace.getConfiguration("vue");_u.config={update:(n,e)=>Ur().update(n,e),get splitEditors(){return Ur().get("splitEditors")},get doctor(){return Ur().get("doctor")},get server(){return Ur().get("server")},get updateImportsOnFileMove(){return Ur().get("updateImportsOnFileMove")},get codeActions(){return Ur().get("codeActions")},get codeLens(){return Ur().get("codeLens")},get complete(){return Ur().get("complete")}}});var Ib=b(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.register=void 0;var St=require("vscode"),$s=Ob(),iN=Kr(),oN=hu(),sN=qi(),Fb="vue-doctor",Nb={postcss:["cpylua.language-postcss","vunguyentuan.vscode-postcss","csstools.postcss"],stylus:["sysoev.language-stylus"],sass:["Syler.sass-indented"]};async function aN(n,e){let t=St.window.createStatusBarItem(St.StatusBarAlignment.Right);t.backgroundColor=new St.ThemeColor("statusBarItem.warningBackground"),t.command="volar.action.doctor";let r=new St.EventEmitter;o(St.window.activeTextEditor),n.subscriptions.push(St.window.onDidChangeActiveTextEditor(o)),n.subscriptions.push(St.workspace.registerTextDocumentContentProvider(Fb,{onDidChange:r.event,async provideTextDocumentContent(a){let c=a.with({scheme:"file",path:a.path.substring(0,a.path.length-10)}),l=await s(c),d=`# ${c.path.split("/").pop()} Doctor

`;for(let g of l)d+="## \u2757 "+g.title+`

`,d+=g.message+`

`;return d+=`---

`,d+=`> Have any questions about the report message? You can see how it is composed by inspecting the [source code](https://github.com/vuejs/language-tools/blob/master/packages/vscode-vue/src/features/doctor.ts).

`,d.trim()}})),n.subscriptions.push(St.commands.registerCommand("volar.action.doctor",()=>{let a=St.window.activeTextEditor?.document;a&&(a.languageId==="vue"||a.uri.toString().endsWith(".vue"))&&a.uri.scheme==="file"&&St.commands.executeCommand("markdown.showPreviewToSide",i(a.uri))}));function i(a){return a.with({scheme:Fb,path:a.path+"/Doctor.md"})}async function o(a){if(sN.config.doctor.status&&a&&(a.document.languageId==="vue"||a.document.uri.toString().endsWith(".vue"))&&a.document.uri.scheme==="file"){let c=await s(a.document.uri);c.length&&St.window.activeTextEditor?.document===a.document&&(t.show(),t.text=c.length+(c.length===1?" known issue":" known issues"),r.fire(i(a.document.uri)))}else t.hide()}async function s(a){let c=St.workspace.textDocuments.find(y=>y.fileName===a.fsPath),l=await(c?e.sendRequest(iN.ParseSFCRequest.type,c.getText()):void 0),d=Ws(a.fsPath,"vue"),g=Ws(a.fsPath,"@vue/runtime-dom"),f=[];d&&$s.lt(d.json.version,"2.7.0")&&!g&&f.push({title:"`@vue/runtime-dom` missing for Vue 2",message:["Vue 2 does not have JSX types definitions, so template type checking will not work correctly. You can resolve this problem by installing `@vue/runtime-dom` and adding it to your project's `devDependencies`.","","- vue: "+d.path].join(`
`)}),d&&$s.gte(d.json.version,"2.7.0")&&$s.lt(d.json.version,"3.0.0")&&g&&f.push({title:"Unnecessary `@vue/runtime-dom`",message:["Vue 2.7 already includes JSX type definitions. You can remove the `@vue/runtime-dom` dependency from package.json.","","- vue: "+d.path,"- @vue/runtime-dom: "+g.path].join(`
`)});let p=Ws(a.fsPath,"@types/node");if(p&&$s.gte(p.json.version,"18.8.1")&&$s.lte(p.json.version,"18.11.0")&&f.push({title:"Incompatible `@types/node` version",message:["`@types/node`'s version `"+p.json.version+"` is incompatible with Vue. It will cause broken DOM event types in template.","","You can update `@types/node` to `18.11.1` or later to resolve.","","- @types/node: "+p.path,"- Issue: https://github.com/johnsoncodehk/volar/issues/1985"].join(`
`)}),St.extensions.getExtension("octref.vetur")?.isActive&&f.push({title:"Use @volar-plugins/vetur instead of Vetur",message:"Detected Vetur enabled. Consider disabling Vetur and use [@volar-plugins/vetur](https://github.com/johnsoncodehk/volar-plugins/tree/master/packages/vetur) instead."}),l?.descriptor.template?.lang==="pug"&&!await Ws(a.fsPath,"@volar/vue-language-plugin-pug")&&f.push({title:"`@volar/vue-language-plugin-pug` missing",message:['For `<template lang="pug">`, the `@volar/vue-language-plugin-pug` plugin is required. Install it using `$ npm install -D @volar/vue-language-plugin-pug` and add it to `vueCompilerOptions.plugins` to support TypeScript intellisense in Pug templates.',"","- package.json","```json",JSON.stringify({devDependencies:{"@volar/vue-language-plugin-pug":"latest"}},void 0,2),"```","","- tsconfig.json / jsconfig.json","```jsonc",JSON.stringify({vueCompilerOptions:{plugins:["@volar/vue-language-plugin-pug"]}},void 0,2),"```"].join(`
`)}),l){let y=[l.descriptor.template,l.descriptor.script,l.descriptor.scriptSetup,...l.descriptor.styles,...l.descriptor.customBlocks];for(let S of y)if(!!S&&S.lang&&S.lang in Nb){let I=Nb[S.lang];I.some($=>!!St.extensions.getExtension($))||f.push({title:"Syntax Highlighting for "+S.lang,message:`Did not find a valid syntax highlighter extension for ${S.lang} language block; you can choose to install one of the following:

`+I.map($=>`- [${$}](https://marketplace.visualstudio.com/items?itemName=${$})
`)})}}St.workspace.getConfiguration("emmet").get("includeLanguages")?.vue&&f.push({title:"Unnecessary `emmet.includeLanguages.vue`",message:"Vue language server already supports Emmet. You can remove `emmet.includeLanguages.vue` from `.vscode/settings.json`."}),St.workspace.getConfiguration("files").get("associations")?.["*.vue"]==="html"&&f.push({title:'Unnecessary `files.associations["*.vue"]`',message:'With `"files.associations": { "*.vue": html }`, language server cannot to recognize Vue files. You can remove `files.associations["*.vue"]` from `.vscode/settings.json`.'});let P=["@volar-plugins/eslint","@volar-plugins/prettier","@volar-plugins/prettyhtml","@volar-plugins/pug-beautify","@volar-plugins/sass-formatter","@volar-plugins/tslint","@volar-plugins/vetur"];for(let y of P){let S=await Ws(a.fsPath,y);!S||S.json.version.startsWith("2.")||f.push({title:`Outdated ${y}`,message:[`The ${y} plugin is outdated. Please update it to the latest version.`,"","- plugin package.json: "+S.path,"- plugin version: "+S.json.version,"- expected version: >= 2.0.0"].join(`
`)})}return(await(0,oN.getTsdk)(n))?.version?.startsWith("4.9")&&f.push({title:"Bad TypeScript version",message:["TS 4.9 has a bug that will cause auto import to fail. Please downgrade to TS 4.8 or upgrade to TS 5.0+.","","Issue: https://github.com/vuejs/language-tools/issues/2190"].join(`
`)}),f}}wu.register=aN;function Ws(n,e){try{let t=require.resolve(e+"/package.json",{paths:[n]});return{path:t,json:require(t)}}catch{}}});var $g=b(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.activate=Fe.tagNameCasings=Fe.attrNameCasings=void 0;var Nt=require("vscode"),cN=Ng(),uN=xs(),Oe=Kr(),zs=qi();Fe.attrNameCasings=new Map;Fe.tagNameCasings=new Map;async function lN(n,e){await e.start();let t=Nt.window.createStatusBarItem(Nt.StatusBarAlignment.Right);t.command="volar.action.nameCasing",l(Nt.window.activeTextEditor?.document);let r=Nt.window.onDidChangeActiveTextEditor(f=>{l(f?.document)}),i=Nt.workspace.onDidChangeConfiguration(()=>{Fe.attrNameCasings.clear(),Fe.tagNameCasings.clear(),l(Nt.window.activeTextEditor?.document)}),o=Nt.workspace.onDidCloseTextDocument(f=>{Fe.attrNameCasings.delete(f.uri.toString()),Fe.tagNameCasings.delete(f.uri.toString())}),s=Nt.commands.registerCommand("volar.action.nameCasing",async()=>{if(!Nt.window.activeTextEditor?.document)return;let f=Nt.window.activeTextEditor.document,p=Fe.attrNameCasings.get(f.uri.toString()),m=Fe.tagNameCasings.get(f.uri.toString()),w=await(0,cN.quickPick)([{1:{label:(m===Oe.TagNameCasing.Kebab?"\u2022 ":"")+"Component Name Using kebab-case"},2:{label:(m===Oe.TagNameCasing.Pascal?"\u2022 ":"")+"Component Name Using PascalCase"},3:{label:"Convert Component Name to kebab-case"},4:{label:"Convert Component Name to PascalCase"}},{5:{label:(p===Oe.AttrNameCasing.Kebab?"\u2022 ":"")+"Prop Name Using kebab-case"},6:{label:(p===Oe.AttrNameCasing.Camel?"\u2022 ":"")+"Prop Name Using camelCase"},7:{label:"Convert Prop Name to kebab-case"},8:{label:"Convert Prop Name to camelCase"}}]);w!==void 0&&(w==="1"&&Fe.tagNameCasings.set(f.uri.toString(),Oe.TagNameCasing.Kebab),w==="2"&&Fe.tagNameCasings.set(f.uri.toString(),Oe.TagNameCasing.Pascal),w==="3"&&await a(Nt.window.activeTextEditor,Oe.TagNameCasing.Kebab),w==="4"&&await a(Nt.window.activeTextEditor,Oe.TagNameCasing.Pascal),w==="5"&&Fe.attrNameCasings.set(f.uri.toString(),Oe.AttrNameCasing.Kebab),w==="6"&&Fe.attrNameCasings.set(f.uri.toString(),Oe.AttrNameCasing.Camel),w==="7"&&await c(Nt.window.activeTextEditor,Oe.AttrNameCasing.Kebab),w==="8"&&await c(Nt.window.activeTextEditor,Oe.AttrNameCasing.Camel),g())});e.onDidChangeState(f=>{f.newState===uN.State.Stopped&&(r.dispose(),i.dispose(),o.dispose(),s.dispose(),t.dispose())});async function a(f,p){let m=await e.sendRequest(Oe.GetConvertTagCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f.document),casing:p}),w=await e.protocol2CodeConverter.asTextEdits(m);w&&f.edit(D=>{for(let P of w)D.replace(P.range,P.newText)}),Fe.tagNameCasings.set(f.document.uri.toString(),p),g()}async function c(f,p){let m=await e.sendRequest(Oe.GetConvertAttrCasingEditsRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f.document),casing:p}),w=await e.protocol2CodeConverter.asTextEdits(m);w&&f.edit(D=>{for(let P of w)D.replace(P.range,P.newText)}),Fe.attrNameCasings.set(f.document.uri.toString(),p),g()}async function l(f){if(zs.config.complete.casing.status&&(f?.languageId==="vue"||zs.config.server.vitePress.supportMdFile&&f?.languageId==="markdown"||zs.config.server.petiteVue.supportHtmlFile&&f?.languageId==="html")){let p,m=Fe.attrNameCasings.get(f.uri.toString()),w=Fe.tagNameCasings.get(f.uri.toString());if(!m){let D=zs.config.complete.casing.props;D==="kebab"?m=Oe.AttrNameCasing.Kebab:D==="camel"?m=Oe.AttrNameCasing.Camel:(p??=await d(f),p?.attr.length===1?m=p.attr[0]:D==="autoCamel"?m=Oe.AttrNameCasing.Camel:m=Oe.AttrNameCasing.Kebab),Fe.attrNameCasings.set(f.uri.toString(),m)}if(!w){let D=zs.config.complete.casing.tags;D==="kebab"?w=Oe.TagNameCasing.Kebab:D==="pascal"?w=Oe.TagNameCasing.Pascal:(p??=await d(f),p?.tag.length===1?w=p.tag[0]:w=Oe.TagNameCasing.Pascal),Fe.tagNameCasings.set(f.uri.toString(),w)}g(),t.show()}else t.hide()}function d(f){return e.sendRequest(Oe.DetectNameCasingRequest.type,{textDocument:e.code2ProtocolConverter.asTextDocumentIdentifier(f)})}function g(){let f=Nt.window.activeTextEditor?.document;if(!f)return;let p=Fe.attrNameCasings.get(f.uri.toString()),m=Fe.tagNameCasings.get(f.uri.toString()),w="<";m===Oe.TagNameCasing.Kebab?w+="tag-name ":m===Oe.TagNameCasing.Pascal?w+="TagName ":w+="? ",p===Oe.AttrNameCasing.Kebab?w+="prop-name":p===Oe.AttrNameCasing.Camel?w+="propName":w+="?",w+=" />",t.text=w}}Fe.activate=lN});var Mb=b(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.register=void 0;var xi=require("vscode"),bu=qi();function dN(){let n,e=!1;return[xi.workspace.onWillSaveTextDocument(t=>{t.document.languageId==="vue"&&(n!==void 0&&(e=!0),n=Date.now())}),xi.workspace.onDidSaveTextDocument(async()=>{if(e&&(e=!1,n=void 0),n===void 0)return;let t=Date.now()-n;if(n=void 0,bu.config.codeActions.enabled&&t>bu.config.codeActions.savingTimeLimit){let r=["Disable codeActions","Increase saveTimeLimit","What is this?"],i=await xi.window.showInformationMessage(`Saving time is too long. (${t} ms > ${bu.config.codeActions.savingTimeLimit} ms), `,...r);i===r[0]?(bu.config.update("codeActions.enabled",!1),xi.window.showInformationMessage("Code Actions is disabled. (You can enable it in .vscode/settings.json)")):i===r[1]?xi.commands.executeCommand("workbench.action.openSettings2",{query:"vue.codeActions.savingTimeLimit"}):i===r[2]&&xi.env.openExternal(xi.Uri.parse("https://github.com/vuejs/language-tools/discussions/2740"))}})]}Du.register=dN});var Lb=b(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.register=void 0;var Kt=require("vscode"),fN=Kr(),hN=qi();function pN(n,e){let t=i();n.subscriptions.push(Kt.commands.registerCommand("volar.action.splitEditors",r));async function r(){let o=Kt.window.activeTextEditor;if(!o)return;let s=hN.config.splitEditors.layout,a=o.document,{descriptor:c}=await t(a.getText()),l=[],d=[];c.script&&(s.left.includes("script")&&l.push(c.script),s.right.includes("script")&&d.push(c.script)),c.scriptSetup&&(s.left.includes("scriptSetup")&&l.push(c.scriptSetup),s.right.includes("scriptSetup")&&d.push(c.scriptSetup)),c.template&&(s.left.includes("template")&&l.push(c.template),s.right.includes("template")&&d.push(c.template)),s.left.includes("styles")&&(l=l.concat(c.styles)),s.right.includes("styles")&&(d=d.concat(c.styles)),s.left.includes("customBlocks")&&(l=l.concat(c.customBlocks)),s.right.includes("customBlocks")&&(d=d.concat(c.customBlocks)),await Kt.commands.executeCommand("workbench.action.joinEditorInGroup"),Kt.window.activeTextEditor===o?(await g(l),await Kt.commands.executeCommand("workbench.action.toggleSplitEditorInGroup"),await g(d)):await Kt.commands.executeCommand("editor.unfoldAll");async function g(f){let p=Kt.window.activeTextEditor;if(!p)return;p.selections=f.length?f.map(w=>new Kt.Selection(a.positionAt(w.loc.start.offset),a.positionAt(w.loc.start.offset))):[new Kt.Selection(a.positionAt(a.getText().length),a.positionAt(a.getText().length))],await Kt.commands.executeCommand("editor.unfoldAll"),await Kt.commands.executeCommand("editor.foldLevel1");let m=f.sort((w,D)=>w.loc.start.offset-D.loc.start.offset)[0];m&&p.revealRange(new Kt.Range(a.positionAt(m.loc.start.offset),new Kt.Position(p.document.lineCount,0)),Kt.TextEditorRevealType.AtTop)}}function i(){let o,s;return a;async function a(c){return c!==o&&(o=c,s=await e.sendRequest(fN.ParseSFCRequest.type,c)),s}}}Ru.register=pN});var Ab=b(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.getDocumentSelector=Gr.deactivate=Gr.activate=void 0;var It=hu(),Br=Kr(),Dr=require("vscode"),gN=Rw(),mN=Ib(),vN=$g(),yN=Mb(),CN=Lb(),yt=qi(),Ut,Ks;async function _N(n,e){let t=Dr.window.onDidChangeActiveTextEditor(r);r();function r(){if(!Dr.window.activeTextEditor){Wg(n,e),t.dispose();return}let i=Dr.window.activeTextEditor.document.languageId;(i==="vue"||i==="markdown"&&yt.config.server.vitePress.supportMdFile||i==="html"&&yt.config.server.petiteVue.supportHtmlFile)&&(Wg(n,e),t.dispose()),(0,It.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(i)&&(Wg(n,e),t.dispose())}}Gr.activate=_N;async function Wg(n,e){Dr.commands.executeCommand("setContext","volar.activated",!0),[Ut,Ks]=await Promise.all([e("vue-semantic-server","Vue Semantic Server",zg(n,Br.ServerMode.PartialSemantic),await jb(Br.ServerMode.PartialSemantic,n),6009),e("vue-syntactic-server","Vue Syntactic Server",zg(n,Br.ServerMode.Syntactic),await jb(Br.ServerMode.Syntactic,n),6011)]);let t=[Ut,Ks];o(),s(),a(),n.subscriptions.push(...yN.register()),CN.register(n,Ks),mN.register(n,Ut),gN.register(n,Ut);let r={vue:!0,markdown:!0,javascript:!0,typescript:!0,javascriptreact:!0,typescriptreact:!0};(0,It.activateAutoInsertion)([Ks,Ut],c=>r[c.languageId]),(0,It.activateShowVirtualFiles)("volar.action.showVirtualFiles",Ut),(0,It.activateWriteVirtualFiles)("volar.action.writeVirtualFiles",Ut),(0,It.activateFindFileReferences)("volar.vue.findAllFileReferences",Ut),(0,It.activateTsConfigStatusItem)("volar.openTsconfig",Ut,c=>c.languageId==="vue"||yt.config.server.vitePress.supportMdFile&&c.languageId==="markdown"||yt.config.server.petiteVue.supportHtmlFile&&c.languageId==="html"||(0,It.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId)),(0,It.activateReloadProjects)("volar.action.reloadProject",[Ut]),(0,It.activateServerStats)("volar.action.serverStats",[Ut]),(0,It.activateTsVersionStatusItem)("volar.selectTypeScriptVersion",n,Ut,c=>c.languageId==="vue"||yt.config.server.vitePress.supportMdFile&&c.languageId==="markdown"||yt.config.server.petiteVue.supportHtmlFile&&c.languageId==="html"||(0,It.takeOverModeActive)(n)&&["javascript","typescript","javascriptreact","typescriptreact"].includes(c.languageId),c=>((0,It.takeOverModeActive)(n)&&(c+=" (takeover)"),c),!1);for(let c of t)(0,It.activateServerSys)(n,c,void 0);async function i(){await Dr.window.showInformationMessage("Please reload VSCode to restart language servers.","Reload Window")!==void 0&&Dr.commands.executeCommand("workbench.action.reloadWindow")}function o(){Dr.workspace.onDidChangeConfiguration(c=>{c.affectsConfiguration("vue.server")?i():c.affectsConfiguration("vue")&&Dr.commands.executeCommand("volar.action.restartServer")})}async function s(){n.subscriptions.push(Dr.commands.registerCommand("volar.action.restartServer",async()=>{await Promise.all(t.map(c=>c.stop())),await Promise.all(t.map(c=>c.start())),a()}))}function a(){vN.activate(n,Ut)}}function wN(){return Promise.all([Ut?.stop(),Ks?.stop()])}Gr.deactivate=wN;function zg(n,e){let t=(0,It.takeOverModeActive)(n),r=[];return r.push({language:"vue"}),t&&(r.push({language:"javascript"}),r.push({language:"typescript"}),r.push({language:"javascriptreact"}),r.push({language:"typescriptreact"}),(e===Br.ServerMode.Semantic||e===Br.ServerMode.PartialSemantic)&&r.push({language:"json"})),yt.config.server.petiteVue.supportHtmlFile&&r.push({language:"html"}),yt.config.server.vitePress.supportMdFile&&r.push({language:"markdown"}),r}Gr.getDocumentSelector=zg;async function jb(n,e){return{configFilePath:yt.config.server.configFilePath,serverMode:n,diagnosticModel:yt.config.server.diagnosticModel==="pull"?Br.DiagnosticModel.Pull:Br.DiagnosticModel.Push,typescript:{tsdk:(await(0,It.getTsdk)(e)).tsdk},reverseConfigFilePriority:yt.config.server.reverseConfigFilePriority,maxFileSize:yt.config.server.maxFileSize,semanticTokensLegend:{tokenTypes:["component"],tokenModifiers:[]},fullCompletionList:yt.config.server.fullCompletionList,json:{customBlockSchemaUrls:yt.config.server.json.customBlockSchemaUrls},additionalExtensions:[...yt.config.server.additionalExtensions,...yt.config.server.petiteVue.supportHtmlFile?["html"]:[],...yt.config.server.vitePress.supportMdFile?["md"]:[]]}}});var Wb=b(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.middleware=void 0;var Su=Kr(),bN=hu(),Hb=require("vscode"),$b=$g();Tu.middleware={...bN.middleware,workspace:{configuration(n,e,t){return n.items.some(r=>r.section==="vue.complete.casing.props"||r.section==="vue.complete.casing.tags")?n.items.map(r=>{if(r.scopeUri){if(r.section==="vue.complete.casing.tags"){let i=$b.tagNameCasings.get(r.scopeUri);if(i===Su.TagNameCasing.Kebab)return"kebab";if(i===Su.TagNameCasing.Pascal)return"pascal"}if(r.section==="vue.complete.casing.props"){let i=$b.attrNameCasings.get(r.scopeUri);if(i===Su.AttrNameCasing.Kebab)return"kebab";if(i===Su.AttrNameCasing.Camel)return"camel"}}return Hb.workspace.getConfiguration(r.section,r.scopeUri?Hb.Uri.parse(r.scopeUri):void 0)}):t(n,e)}}}});Object.defineProperty(exports,"__esModule",{value:!0});exports.deactivate=exports.activate=void 0;var DN=require("fs"),RN=require("os"),SN=require("path"),Kg=require("vscode"),Us=QC(),Ug=Ab(),TN=Wb(),PN=Kr(),Bs=qi();function qN(n){let e=SN.join(RN.tmpdir(),`vscode-${n.extension.id}-cancellation-pipe.tmp`),t=(0,Ug.getDocumentSelector)(n,PN.ServerMode.Semantic),r;return Kg.workspace.onDidChangeTextDocument(i=>{let o=i.document.uri.toString()+"|"+i.document.version;if(r===void 0){r=o;return}t.some(s=>s.language===i.document.languageId)&&r!==o&&(r=o,DN.writeFileSync(e,""))}),(0,Ug.activate)(n,(i,o,s,a,c)=>{a.cancellationPipeName=e;class l extends Us.LanguageClient{fillInitializeParams(C){C.locale=Kg.env.language}}let d=Kg.Uri.joinPath(n.extensionUri,"server.js"),g={};Bs.config.server.maxOldSpaceSize&&(g.execArgv??=[],g.execArgv.push("--max-old-space-size="+Bs.config.server.maxOldSpaceSize));let f={execArgv:["--nolazy","--inspect="+c]},p={run:{module:d.fsPath,transport:Us.TransportKind.ipc,options:g},debug:{module:d.fsPath,transport:Us.TransportKind.ipc,options:f}},m=void 0;m&&(p={run:{transport:{kind:Us.TransportKind.socket,port:c+10},options:g,command:m,args:["run",d.fsPath]},debug:{transport:{kind:Us.TransportKind.socket,port:c+10},options:f,command:m,args:["run",d.fsPath]}});let w={middleware:TN.middleware,documentSelector:s,initializationOptions:a},D=new l(i,o,p,w);return D.start(),kN(D),D})}exports.activate=qN;function xN(){return(0,Ug.deactivate)()}exports.deactivate=xN;function kN(n){let e=n.initializeFeatures;n.initializeFeatures=(...t)=>{let r=n._capabilities;return Bs.config.codeActions.enabled||(r.codeActionProvider=void 0),Bs.config.codeLens.enabled||(r.codeLensProvider=void 0),!Bs.config.updateImportsOnFileMove.enabled&&r.workspace?.fileOperations?.willRename&&(r.workspace.fileOperations.willRename=void 0),e.call(n,...t)}}
